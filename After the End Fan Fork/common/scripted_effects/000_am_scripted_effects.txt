#	Example:
# 
#	example_effect = {
#		treasury = 100
#		prestige = 50
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#
# Naming convention:  xxxx_effect
#

#CONTAINS ALL EFFECTS THAT HAVE TO BE MODIFIED

##ATE SPECIFIC##
clear_banking_flags_effect = {
	clr_character_flag = loan_taken
	clr_character_flag = loan_100
	clr_character_flag = loan_200
	clr_character_flag = loan_400
	clr_character_flag = loan_600
	clr_character_flag = loan_800
	clr_character_flag = loan_1000
}

clear_selling_shares_flags_effect = {
	clr_character_flag = shares_selling
	clr_character_flag = shares_100
	clr_character_flag = shares_200
	clr_character_flag = shares_400
	clr_character_flag = shares_600
	clr_character_flag = shares_800
	clr_character_flag = shares_1000
}

add_am_crusade_trait_effect = {
	if = {
		limit = {
			OR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
			}
		}
		add_trait = valhalla_bound
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = revelationist
				religion = revelationist_reformed
			}
		}
		add_trait = sword_of_the_lamb
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = rust_cultist
				religion = rust_cultist_reformed
			}
		}
		add_trait = fords_striker
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = occultist
				religion = occultist_reformed
			}
		}
		add_trait = knight_templar
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = thelemic
				religion = thelemic_reformed
			}
		}
		add_trait = order_of_the_garter
		break = yes
	}
	if = {
		limit = {
			religion_group = christian
		}
		add_trait = crusader
		break = yes
	}
	if = {
		limit = {
			religion_group = latter_day_saints
		}
		add_trait = danite
		break = yes
	}
	if = {
		limit = {
			religion_group = jewish_group
		}
		add_trait = shaddai
	}
	if = {
		limit = {
			OR = {
				religion = espiritista
				religion = espiritista_reformed
			}
		}
		add_trait = jaguar_warrior
	}
}

##SECRET RELIGIONS##
# Add a sympathy trait for the current religion
add_sympathy_effect = {
	if = {
		limit = { religion_group = pagan_group }
		add_trait = sympathy_pagans
	}
	if = {
		limit = { religion_group = afro_syncretic }
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { religion_group = american_native }
		add_trait = sympathy_american_native
	}
	if = {
		limit = { religion_group = christian }
		add_trait = sympathy_christendom
	}
	if = {
		limit = { religion_group = cult_of_saints }
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { religion_group = pacific }
		add_trait = sympathy_pacific
	}
	if = {
		limit = { religion_group = latter_day_saints }
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { religion_group = mesoamerican_gods }
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { religion_group = oldworld }
		add_trait = sympathy_oldworld
	}
	if = {
		limit = { religion_group = pirate }
		add_trait = sympathy_pirate
	}
	if = {
		limit = { religion_group = jewish_group }
		add_trait = sympathy_judaism
	}
	if = {
		limit = { religion_group = indian_group }
		add_trait = sympathy_indian
	}
}

# Add a sympathy trait for the true religion
add_sympathy_true_effect = {
	if = {
		limit = { PREV = { true_religion_group = pagan_group } }
		add_trait = sympathy_pagans
	}
	if = {
		limit = { PREV = { true_religion_group = afro_syncretic } }
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { PREV = { true_religion_group = american_native } }
		add_trait = sympathy_american_native
	}
	if = {
		limit = { PREV = { true_religion_group = christian } }
		add_trait = sympathy_christendom
	}
	if = {
		limit = { PREV = { true_religion_group = cult_of_saints } }
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { PREV = { true_religion_group = pacific } }
		add_trait = sympathy_pacific
	}
	if = {
		limit = { PREV = { true_religion_group = latter_day_saints } }
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { PREV = { true_religion_group = mesoamerican_gods } }
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { PREV = { true_religion_group = oldworld } }
		add_trait = sympathy_oldworld
	}	
	if = {
		limit = { PREV = { true_religion_group = pirate } }
		add_trait = sympathy_pirate
	}
	if = {
		limit = { PREV = { true_religion_group = jewish_group } }
		add_trait = sympathy_judaism
	}
	if = {
		limit = { PREV = { true_religion_group = indian_group } }
		add_trait = sympathy_indian
	}
}

add_sympathy_for_prevs_true_religion_effect = {
	if = {
		limit = { 
			PREV = { true_religion_group_afro_syncretic_trigger = yes } 
			NOT = { religion_group = afro_syncretic }
		}
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { 
			PREV = { true_religion_group_christian_trigger = yes } 
			NOT = { religion_group = christian }
		}
		add_trait = sympathy_christendom
	}
	if = {
		limit = { 
			PREV = { true_religion_group_cult_of_saints_trigger = yes } 
			NOT = { religion_group = cult_of_saints }
		}
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pacific_trigger = yes } 
			NOT = { religion_group = pacific }
		}
		add_trait = sympathy_pacific
	}
	if = {
		limit = { 
			PREV = { true_religion_group_latter_day_saints_trigger = yes } 
			NOT = { religion_group = latter_day_saints }
		}
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { 
			PREV = { true_religion_group_mesoamerican_gods_trigger = yes } 
			NOT = { religion_group = mesoamerican_gods }
		}
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { 
			PREV = { true_religion_group_oldworld_trigger = yes } 
			NOT = { religion_group = oldworld }
		}
		add_trait = sympathy_oldworld
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pagan_group_trigger = yes } 
			NOT = { religion_group = pagan_group }
		}
		add_trait = sympathy_pagans
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pirate_trigger = yes } 
			NOT = { religion_group = pirate }
		}
		add_trait = sympathy_pirate
	}
	if = {
		limit = { 
			PREV = { true_religion_group_jewish_group_trigger = yes } 
			NOT = { religion_group = jewish_group }
		}
		add_trait = sympathy_judaism
	}
	if = {
		limit = { 
			PREV = { true_religion_group_indian_group_trigger = yes } 
			NOT = { religion_group = indian_group }
		}
		add_trait = sympathy_indian
	}
}

add_sympathy_for_prevs_open_religion_effect = {
	if = {
		limit = { 
			PREV = { religion_group_afro_syncretic_trigger = yes } 
			NOT = { religion_group = afro_syncretic }
		}
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { 
			PREV = { religion_group_christian_trigger = yes } 
			NOT = { religion_group = christian }
		}
		add_trait = sympathy_christendom
	}
	if = {
		limit = { 
			PREV = { religion_group_cult_of_saints_trigger = yes } 
			NOT = { religion_group = cult_of_saints }
		}
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { 
			PREV = { religion_group_pacific_trigger = yes } 
			NOT = { religion_group = pacific }
		}
		add_trait = sympathy_pacific
	}
	if = {
		limit = { 
			PREV = { religion_group_latter_day_saints_trigger = yes } 
			NOT = { religion_group = latter_day_saints }
		}
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { 
			PREV = { religion_group_mesoamerican_gods_trigger = yes } 
			NOT = { religion_group = mesoamerican_gods }
		}
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { 
			PREV = { religion_group_oldworld_trigger = yes } 
			NOT = { religion_group = oldworld }
		}
		add_trait = sympathy_oldworld
	}
	if = {
		limit = { 
			PREV = { religion_group_pagan_group_trigger = yes } 
			NOT = { religion_group = pagan_group }
		}
		add_trait = sympathy_pagans
	}
	if = {
		limit = { 
			PREV = { religion_group_pirate_trigger = yes } 
			NOT = { religion_group = pirate }
		}
		add_trait = sympathy_pirate
	}
	if = {
		limit = { 
			PREV = { religion_group_jewish_group_trigger = yes } 
			NOT = { religion_group = jewish_group }
		}
		add_trait = sympathy_judaism
	}
	if = {
		limit = { 
			PREV = { religion_group_indian_group_trigger = yes } 
			NOT = { religion_group = indian_group }
		}
		add_trait = sympathy_indian
	}
}


add_trait_for_prevs_secret_religion_society_effect = {
	set_secret_religion = PREV
}

flip_to_secret_religion_effect = {
	convert_to_secret_religion = yes
}

add_prevs_secret_religion_trait_effect = {
	set_secret_religion = PREV
}

add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect = {
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rastafarian
    			}
    			has_character_flag = character_was_rastafarian
			}
    	}
    	set_secret_religion = rastafarian
    	clr_character_flag = character_was_rastafarian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = voodoo
    			}
    			has_character_flag = character_was_voodoo
			}
    	}
    	set_secret_religion = voodoo
    	clr_character_flag = character_was_voodoo
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = santeria
    			}
    			has_character_flag = character_was_santeria
			}
    	}
    	set_secret_religion = santeria
    	clr_character_flag = character_was_santeria
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = candomble
    			}
    			has_character_flag = character_was_candomble
			}
    	}
    	set_secret_religion = candomble
    	clr_character_flag = character_was_candomble
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = espiritista
    			}
    			has_character_flag = character_was_espiritista
			}
    	}
    	set_secret_religion = espiritista
    	clr_character_flag = character_was_espiritista
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = espiritista_reformed
    			}
    			has_character_flag = character_was_espiritista_reformed
			}
    	}
    	set_secret_religion = espiritista_reformed
    	clr_character_flag = character_was_espiritista_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = ghost_dance
    			}
    			has_character_flag = character_was_ghost_dance
			}
    	}
    	set_secret_religion = ghost_dance
    	clr_character_flag = character_was_ghost_dance
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = raven_tales
    			}
    			has_character_flag = character_was_raven_tales
			}
    	}
    	set_secret_religion = raven_tales
    	clr_character_flag = character_was_raven_tales
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = catholic
    			}
    			has_character_flag = character_was_catholic
			}
    	}
    	set_secret_religion = catholic
    	clr_character_flag = character_was_catholic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = neognostic
    			}
    			has_character_flag = character_was_neognostic
			}
    	}
    	set_secret_religion = neognostic
    	clr_character_flag = character_was_neognostic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sedevacantist
    			}
    			has_character_flag = character_was_sedevacantist
			}
    	}
    	set_secret_religion = sedevacantist
    	clr_character_flag = character_was_sedevacantist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = nestorian
    			}
    			has_character_flag = character_was_nestorian
			}
    	}
    	set_secret_religion = nestorian
    	clr_character_flag = character_was_nestorian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = ursuline
    			}
    			has_character_flag = character_was_ursuline
			}
    	}
    	set_secret_religion = ursuline
    	clr_character_flag = character_was_ursuline
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = angeline
    			}
    			has_character_flag = character_was_angeline
			}
    	}
    	set_secret_religion = angeline
    	clr_character_flag = character_was_angeline
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = confederated
    			}
    			has_character_flag = character_was_confederated
			}
    	}
    	set_secret_religion = confederated
    	clr_character_flag = character_was_confederated
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = anabaptist
    			}
    			has_character_flag = character_was_anabaptist
			}
    	}
    	set_secret_religion = anabaptist
    	clr_character_flag = character_was_anabaptist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = batenburger
    			}
    			has_character_flag = character_was_batenburger
			}
    	}
    	set_secret_religion = batenburger
    	clr_character_flag = character_was_batenburger
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = evangelical
    			}
    			has_character_flag = character_was_evangelical
			}
    	}
    	set_secret_religion = evangelical
    	clr_character_flag = character_was_evangelical
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = antinomian
    			}
    			has_character_flag = character_was_antinomian
			}
    	}
    	set_secret_religion = antinomian
    	clr_character_flag = character_was_antinomian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = charismatic
    			}
    			has_character_flag = character_was_charismatic
			}
    	}
    	set_secret_religion = charismatic
    	clr_character_flag = character_was_charismatic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = postadventist
    			}
    			has_character_flag = character_was_postadventist
			}
    	}
    	set_secret_religion = postadventist
    	clr_character_flag = character_was_postadventist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = falling_star
    			}
    			has_character_flag = character_was_falling_star
			}
    	}
    	set_secret_religion = falling_star
    	clr_character_flag = character_was_falling_star
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = moravian
    			}
    			has_character_flag = character_was_moravian
			}
    	}
    	set_secret_religion = moravian
    	clr_character_flag = character_was_moravian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = high_church
    			}
    			has_character_flag = character_was_high_church
			}
    	}
    	set_secret_religion = high_church
    	clr_character_flag = character_was_high_church
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = united_church
    			}
    			has_character_flag = character_was_united_church
			}
    	}
    	set_secret_religion = united_church
    	clr_character_flag = character_was_united_church
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = apostolic
    			}
    			has_character_flag = character_was_apostolic
			}
    	}
    	set_secret_religion = apostolic
    	clr_character_flag = character_was_apostolic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sacred_heart
    			}
    			has_character_flag = character_was_sacred_heart
			}
    	}
    	set_secret_religion = sacred_heart
    	clr_character_flag = character_was_sacred_heart
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = gracia_divina
    			}
    			has_character_flag = character_was_gracia_divina
			}
    	}
    	set_secret_religion = gracia_divina
    	clr_character_flag = character_was_gracia_divina
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = cetic
    			}
    			has_character_flag = character_was_cetic
			}
    	}
    	set_secret_religion = cetic
    	clr_character_flag = character_was_cetic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = gaian
    			}
    			has_character_flag = character_was_gaian
			}
    	}
    	set_secret_religion = gaian
    	clr_character_flag = character_was_gaian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = shinto
    			}
    			has_character_flag = character_was_shinto
			}
    	}
    	set_secret_religion = shinto
    	clr_character_flag = character_was_shinto
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = nousthreskeia
    			}
    			has_character_flag = character_was_nousthreskeia
			}
    	}
    	set_secret_religion = nousthreskeia
    	clr_character_flag = character_was_nousthreskeia
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = mormon
    			}
    			has_character_flag = character_was_mormon
			}
    	}
    	set_secret_religion = mormon
    	clr_character_flag = character_was_mormon
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = bickertonite
    			}
    			has_character_flag = character_was_bickertonite
			}
    	}
    	set_secret_religion = bickertonite
    	clr_character_flag = character_was_bickertonite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = woolleyite
    			}
    			has_character_flag = character_was_woolleyite
			}
    	}
    	set_secret_religion = woolleyite
    	clr_character_flag = character_was_woolleyite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = strangite
    			}
    			has_character_flag = character_was_strangite
			}
    	}
    	set_secret_religion = strangite
    	clr_character_flag = character_was_strangite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sol_invicta
    			}
    			has_character_flag = character_was_sol_invicta
			}
    	}
    	set_secret_religion = sol_invicta
    	clr_character_flag = character_was_sol_invicta
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = mictlantec
    			}
    			has_character_flag = character_was_mictlantec
			}
    	}
    	set_secret_religion = mictlantec
    	clr_character_flag = character_was_mictlantec
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = uahomche
    			}
    			has_character_flag = character_was_uahomche
			}
    	}
    	set_secret_religion = uahomche
    	clr_character_flag = character_was_uahomche
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = neomayan
    			}
    			has_character_flag = character_was_neomayan
			}
    	}
    	set_secret_religion = neomayan
    	clr_character_flag = character_was_neomayan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = americanist
    			}
    			has_character_flag = character_was_americanist
			}
    	}
    	set_secret_religion = americanist
    	clr_character_flag = character_was_americanist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = hamiltonian
    			}
    			has_character_flag = character_was_hamiltonian
			}
    	}
    	set_secret_religion = hamiltonian
    	clr_character_flag = character_was_hamiltonian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = jeffersonian
    			}
    			has_character_flag = character_was_jeffersonian
			}
    	}
    	set_secret_religion = jeffersonian
    	clr_character_flag = character_was_jeffersonian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = libertarian
    			}
    			has_character_flag = character_was_libertarian
			}
    	}
    	set_secret_religion = libertarian
    	clr_character_flag = character_was_libertarian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = consumerist
    			}
    			has_character_flag = character_was_consumerist
			}
    	}
    	set_secret_religion = consumerist
    	clr_character_flag = character_was_consumerist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = atomicist
    			}
    			has_character_flag = character_was_atomicist
			}
    	}
    	set_secret_religion = atomicist
    	clr_character_flag = character_was_atomicist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = aphite
    			}
    			has_character_flag = character_was_aphite
			}
    	}
    	set_secret_religion = aphite
    	clr_character_flag = character_was_aphite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = pagan
    			}
    			has_character_flag = character_was_pagan
			}
    	}
    	set_secret_religion = pagan
    	clr_character_flag = character_was_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = revelationist_reformed
    			}
    			has_character_flag = character_was_revelationist_reformed
			}
    	}
    	set_secret_religion = revelationist_reformed
    	clr_character_flag = character_was_revelationist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = revelationist
    			}
    			has_character_flag = character_was_revelationist
			}
    	}
    	set_secret_religion = revelationist
    	clr_character_flag = character_was_revelationist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rust_cultist_reformed
    			}
    			has_character_flag = character_was_rust_cultist_reformed
			}
    	}
    	set_secret_religion = rust_cultist_reformed
    	clr_character_flag = character_was_rust_cultist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rust_cultist
    			}
    			has_character_flag = character_was_rust_cultist
			}
    	}
    	set_secret_religion = rust_cultist
    	clr_character_flag = character_was_rust_cultist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = occultist_reformed
    			}
    			has_character_flag = character_was_occultist_reformed
			}
    	}
    	set_secret_religion = occultist_reformed
    	clr_character_flag = character_was_occultist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = occultist
    			}
    			has_character_flag = character_was_occultist
			}
    	}
    	set_secret_religion = occultist
    	clr_character_flag = character_was_occultist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = thelemic_reformed
    			}
    			has_character_flag = character_was_thelemic_reformed
			}
    	}
    	set_secret_religion = thelemic_reformed
    	clr_character_flag = character_was_thelemic_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = thelemic
    			}
    			has_character_flag = character_was_thelemic
			}
    	}
    	set_secret_religion = thelemic
    	clr_character_flag = character_was_thelemic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = norse_pagan_reformed
    			}
    			has_character_flag = character_was_norse_pagan_reformed
			}
    	}
    	set_secret_religion = norse_pagan_reformed
    	clr_character_flag = character_was_norse_pagan_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = norse_pagan
    			}
    			has_character_flag = character_was_norse_pagan
			}
    	}
    	set_secret_religion = norse_pagan
    	clr_character_flag = character_was_norse_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = celtic_pagan
    			}
    			has_character_flag = character_was_celtic_pagan
			}
    	}
    	set_secret_religion = celtic_pagan
    	clr_character_flag = character_was_celtic_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = celtic_pagan_reformed
    			}
    			has_character_flag = character_was_celtic_pagan_reformed
			}
    	}
    	set_secret_religion = celtic_pagan_reformed
    	clr_character_flag = character_was_celtic_pagan_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = brethren
    			}
    			has_character_flag = character_was_brethren
			}
    	}
    	set_secret_religion = brethren
    	clr_character_flag = character_was_brethren
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = jewish
    			}
    			has_character_flag = character_was_jewish
			}
    	}
    	set_secret_religion = jewish
    	clr_character_flag = character_was_jewish
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = reform
    			}
    			has_character_flag = character_was_reform
			}
    	}
    	set_secret_religion = reform
    	clr_character_flag = character_was_reform
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = meshichist
    			}
    			has_character_flag = character_was_meshichist
			}
    	}
    	set_secret_religion = meshichist
    	clr_character_flag = character_was_meshichist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = hindu
    			}
    			has_character_flag = character_was_hindu
			}
    	}
    	set_secret_religion = hindu
    	clr_character_flag = character_was_hindu
		break = yes
    }
}

add_religion_char_flag_effect = {
	if = {
    	limit = { religion = rastafarian }
    	set_character_flag = character_was_rastafarian
    }
	if = {
    	limit = { religion = voodoo }
    	set_character_flag = character_was_voodoo
    }
	if = {
    	limit = { religion = santeria }
    	set_character_flag = character_was_santeria
    }
	if = {
    	limit = { religion = candomble }
    	set_character_flag = character_was_candomble
    }
	if = {
    	limit = { religion = espiritista }
    	set_character_flag = character_was_espiritista
    }
	if = {
    	limit = { religion = espiritista_reformed }
    	set_character_flag = character_was_espiritista_reformed
    }
	if = {
    	limit = { religion = ghost_dance }
    	set_character_flag = character_was_ghost_dance
    }
	if = {
    	limit = { religion = raven_tales }
    	set_character_flag = character_was_raven_tales
    }
	if = {
    	limit = { religion = catholic }
    	set_character_flag = character_was_catholic
    }
	if = {
    	limit = { religion = neognostic }
    	set_character_flag = character_was_neognostic
    }
	if = {
    	limit = { religion = sedevacantist }
    	set_character_flag = character_was_sedevacantist
    }
	if = {
    	limit = { religion = nestorian }
    	set_character_flag = character_was_nestorian
    }
	if = {
    	limit = { religion = ursuline }
    	set_character_flag = character_was_ursuline
    }
	if = {
    	limit = { religion = angeline }
    	set_character_flag = character_was_angeline
    }
	if = {
    	limit = { religion = confederated }
    	set_character_flag = character_was_confederated
    }
	if = {
    	limit = { religion = anabaptist }
    	set_character_flag = character_was_anabaptist
    }
	if = {
    	limit = { religion = batenburger }
    	set_character_flag = character_was_batenburger
    }
	if = {
    	limit = { religion = evangelical }
    	set_character_flag = character_was_evangelical
    }
	if = {
    	limit = { religion = antinomian }
    	set_character_flag = character_was_antinomian
    }
	if = {
    	limit = { religion = charismatic }
    	set_character_flag = character_was_charismatic
    }
	if = {
    	limit = { religion = postadventist }
    	set_character_flag = character_was_postadventist
    }
	if = {
    	limit = { religion = falling_star }
    	set_character_flag = character_was_falling_star
    }
	if = {
    	limit = { religion = moravian }
    	set_character_flag = character_was_moravian
    }
	if = {
    	limit = { religion = high_church }
    	set_character_flag = character_was_high_church
    }
	if = {
    	limit = { religion = united_church }
    	set_character_flag = character_was_united_church
    }
	if = {
    	limit = { religion = apostolic }
    	set_character_flag = character_was_apostolic
    }
	if = {
    	limit = { religion = sacred_heart }
    	set_character_flag = character_was_sacred_heart
    }
	if = {
    	limit = { religion = gracia_divina }
    	set_character_flag = character_was_gracia_divina
    }
	if = {
    	limit = { religion = cetic }
    	set_character_flag = character_was_cetic
    }
	if = {
    	limit = { religion = gaian }
    	set_character_flag = character_was_gaian
    }
	if = {
    	limit = { religion = shinto }
    	set_character_flag = character_was_shinto
    }
	if = {
    	limit = { religion = nousthreskeia }
    	set_character_flag = character_was_nousthreskeia
    }
	if = {
    	limit = { religion = mormon }
    	set_character_flag = character_was_mormon
    }
	if = {
    	limit = { religion = bickertonite }
    	set_character_flag = character_was_bickertonite
    }
	if = {
    	limit = { religion = woolleyite }
    	set_character_flag = character_was_woolleyite
    }
	if = {
    	limit = { religion = strangite }
    	set_character_flag = character_was_strangite
    }
	if = {
    	limit = { religion = sol_invicta }
    	set_character_flag = character_was_sol_invicta
    }
	if = {
    	limit = { religion = mictlantec }
    	set_character_flag = character_was_mictlantec
    }
	if = {
    	limit = { religion = uahomche }
    	set_character_flag = character_was_uahomche
    }
	if = {
    	limit = { religion = neomayan }
    	set_character_flag = character_was_neomayan
    }
	if = {
    	limit = { religion = americanist }
    	set_character_flag = character_was_americanist
    }
	if = {
    	limit = { religion = hamiltonian }
    	set_character_flag = character_was_hamiltonian
    }
	if = {
    	limit = { religion = jeffersonian }
    	set_character_flag = character_was_jeffersonian
    }
	if = {
    	limit = { religion = libertarian }
    	set_character_flag = character_was_libertarian
    }
	if = {
    	limit = { religion = consumerist }
    	set_character_flag = character_was_consumerist
    }
	if = {
    	limit = { religion = atomicist }
    	set_character_flag = character_was_atomicist
    }
	if = {
    	limit = { religion = aphite }
    	set_character_flag = character_was_aphite
    }
	if = {
    	limit = { religion = pagan }
    	set_character_flag = character_was_pagan
    }
	if = {
    	limit = { religion = revelationist_reformed }
    	set_character_flag = character_was_revelationist_reformed
    }
	if = {
    	limit = { religion = revelationist }
    	set_character_flag = character_was_revelationist
    }
	if = {
    	limit = { religion = rust_cultist_reformed }
    	set_character_flag = character_was_rust_cultist_reformed
    }
	if = {
    	limit = { religion = rust_cultist }
    	set_character_flag = character_was_rust_cultist
    }
	if = {
    	limit = { religion = occultist_reformed }
    	set_character_flag = character_was_occultist_reformed
    }
	if = {
    	limit = { religion = occultist }
    	set_character_flag = character_was_occultist
    }
	if = {
    	limit = { religion = thelemic_reformed }
    	set_character_flag = character_was_thelemic_reformed
    }
	if = {
    	limit = { religion = thelemic }
    	set_character_flag = character_was_thelemic
    }
	if = {
    	limit = { religion = norse_pagan_reformed }
    	set_character_flag = character_was_norse_pagan_reformed
    }
	if = {
    	limit = { religion = norse_pagan }
    	set_character_flag = character_was_norse_pagan
    }
	if = {
    	limit = { religion = brethren }
    	set_character_flag = character_was_brethren
    }
	if = {
    	limit = { religion = jewish }
    	set_character_flag = character_was_jewish
    }
	if = {
    	limit = { religion = reform }
    	set_character_flag = character_was_reform
    }
	if = {
    	limit = { religion = meshichist }
    	set_character_flag = character_was_meshichist
    }
	if = {
    	limit = { religion = hindu }
    	set_character_flag = character_was_hindu
    }
	if = {
    	limit = { religion = celtic_pagan }
    	set_character_flag = character_was_celtic_pagan
    }
	if = {
    	limit = { religion = celtic_pagan_reformed }
    	set_character_flag = character_was_celtic_pagan_reformed
    }
}

clr_religion_char_flag_effect = {
    clr_character_flag = character_was_rastafarian
	clr_character_flag = character_was_voodoo
	clr_character_flag = character_was_santeria
	clr_character_flag = character_was_candomble
	clr_character_flag = character_was_espiritista
	clr_character_flag = character_was_espiritista_reformed
	clr_character_flag = character_was_ghost_dance
	clr_character_flag = character_was_raven_tales
	clr_character_flag = character_was_catholic
	clr_character_flag = character_was_neognostic
	clr_character_flag = character_was_sedevacantist
	clr_character_flag = character_was_ursuline
	clr_character_flag = character_was_angeline
	clr_character_flag = character_was_confederated
	clr_character_flag = character_was_anabaptist
	clr_character_flag = character_was_batenburger
	clr_character_flag = character_was_evangelical
	clr_character_flag = character_was_antinomian
	clr_character_flag = character_was_charismatic
	clr_character_flag = character_was_postadventist
	clr_character_flag = character_was_falling_star
	clr_character_flag = character_was_moravian
	clr_character_flag = character_was_high_church
	clr_character_flag = character_was_united_church
	clr_character_flag = character_was_apostolic
	clr_character_flag = character_was_sacred_heart
	clr_character_flag = character_was_gracia_divina
	clr_character_flag = character_was_cetic
	clr_character_flag = character_was_gaian
	clr_character_flag = character_was_shinto
	clr_character_flag = character_was_nousthreskeia
	clr_character_flag = character_was_mormon
	clr_character_flag = character_was_bickertonite
	clr_character_flag = character_was_woolleyite
	clr_character_flag = character_was_strangite
	clr_character_flag = character_was_sol_invicta
	clr_character_flag = character_was_mictlantec
	clr_character_flag = character_was_uahomche
	clr_character_flag = character_was_neomayan
	clr_character_flag = character_was_americanist
	clr_character_flag = character_was_hamiltonian
	clr_character_flag = character_was_jeffersonian
	clr_character_flag = character_was_libertarian
	clr_character_flag = character_was_consumerist
	clr_character_flag = character_was_atomicist
	clr_character_flag = character_was_pagan
	clr_character_flag = character_was_revelationist_reformed
	clr_character_flag = character_was_revelationist
	clr_character_flag = character_was_rust_cultist_reformed
	clr_character_flag = character_was_rust_cultist
	clr_character_flag = character_was_occultist_reformed
	clr_character_flag = character_was_occultist
	clr_character_flag = character_was_thelemic_reformed
	clr_character_flag = character_was_thelemic
	clr_character_flag = character_was_norse_pagan_reformed
	clr_character_flag = character_was_norse_pagan
	clr_character_flag = character_was_celtic_pagan_reformed
	clr_character_flag = character_was_celtic_pagan
	clr_character_flag = character_was_brethren
	clr_character_flag = character_was_jewish
	clr_character_flag = character_was_reform
	clr_character_flag = character_was_meshichist
	clr_character_flag = character_was_hindu
}

event_target_old_religion_from_flag_effect = {
	if = {
    	limit = { has_character_flag = character_was_rastafarian }
    	random_character = {
    		limit = { religion = rastafarian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_voodoo }
    	random_character = {
    		limit = { religion = voodoo }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_santeria }
    	random_character = {
    		limit = { religion = santeria }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_candomble }
    	random_character = {
    		limit = { religion = candomble }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_espiritista }
    	random_character = {
    		limit = { religion = espiritista }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_espiritista_reformed }
    	random_character = {
    		limit = { religion = espiritista_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_americanist }
    	random_character = {
    		limit = { religion = americanist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_ghost_dance }
    	random_character = {
    		limit = { religion = ghost_dance }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_raven_tales }
    	random_character = {
    		limit = { religion = raven_tales }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_catholic }
    	random_character = {
    		limit = { religion = catholic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_neognostic }
    	random_character = {
    		limit = { religion = neognostic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sedevacantist }
    	random_character = {
    		limit = { religion = sedevacantist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_nestorian }
    	random_character = {
    		limit = { religion = nestorian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_ursuline }
    	random_character = {
    		limit = { religion = ursuline }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_angeline }
    	random_character = {
    		limit = { religion = angeline }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_confederated }
    	random_character = {
    		limit = { religion = confederated }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_anabaptist }
    	random_character = {
    		limit = { religion = anabaptist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_batenburger }
    	random_character = {
    		limit = { religion = batenburger }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_evangelical }
    	random_character = {
    		limit = { religion = evangelical }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_antinomian }
    	random_character = {
    		limit = { religion = antinomian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_charismatic }
    	random_character = {
    		limit = { religion = charismatic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_postadventist }
    	random_character = {
    		limit = { religion = postadventist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_falling_star }
    	random_character = {
    		limit = { religion = falling_star }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_moravian }
    	random_character = {
    		limit = { religion = moravian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_high_church }
    	random_character = {
    		limit = { religion = high_church }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_united_church }
    	random_character = {
    		limit = { religion = united_church }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_apostolic }
    	random_character = {
    		limit = { religion = apostolic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sacred_heart }
    	random_character = {
    		limit = { religion = sacred_heart }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_gracia_divina }
    	random_character = {
    		limit = { religion = gracia_divina }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_cetic }
    	random_character = {
    		limit = { religion = cetic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_gaian }
    	random_character = {
    		limit = { religion = gaian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_shinto }
    	random_character = {
    		limit = { religion = shinto }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_nousthreskeia }
    	random_character = {
    		limit = { religion = nousthreskeia }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_mormon }
    	random_character = {
    		limit = { religion = mormon }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_bickertonite }
    	random_character = {
    		limit = { religion = bickertonite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_woolleyite }
    	random_character = {
    		limit = { religion = woolleyite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_strangite }
    	random_character = {
    		limit = { religion = strangite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sol_invicta }
    	random_character = {
    		limit = { religion = sol_invicta }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_mictlantec }
    	random_character = {
    		limit = { religion = mictlantec }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_uahomche }
    	random_character = {
    		limit = { religion = uahomche }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_neomayan }
    	random_character = {
    		limit = { religion = neomayan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_americanist }
    	random_character = {
    		limit = { religion = americanist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_hamiltonian }
    	random_character = {
    		limit = { religion = hamiltonian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_jeffersonian }
    	random_character = {
    		limit = { religion = jeffersonian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_libertarian }
    	random_character = {
    		limit = { religion = libertarian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_consumerist }
    	random_character = {
    		limit = { religion = consumerist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_atomicist }
    	random_character = {
    		limit = { religion = atomicist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_pagan }
    	random_character = {
    		limit = { religion = pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_revelationist_reformed }
    	random_character = {
    		limit = { religion = revelationist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_revelationist }
    	random_character = {
    		limit = { religion = revelationist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_rust_cultist_reformed }
    	random_character = {
    		limit = { religion = rust_cultist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_rust_cultist }
    	random_character = {
    		limit = { religion = rust_cultist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_occultist_reformed }
    	random_character = {
    		limit = { religion = occultist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_occultist }
    	random_character = {
    		limit = { religion = occultist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_thelemic_reformed }
    	random_character = {
    		limit = { religion = thelemic_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_thelemic }
    	random_character = {
    		limit = { religion = thelemic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_norse_pagan_reformed }
    	random_character = {
    		limit = { religion = norse_pagan_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_norse_pagan }
    	random_character = {
    		limit = { religion = norse_pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_celtic_pagan }
    	random_character = {
    		limit = { religion = celtic_pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_celtic_pagan_reformed }
    	random_character = {
    		limit = { religion = celtic_pagan_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_brethren }
    	random_character = {
    		limit = { religion = brethren }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_jewish }
    	random_character = {
    		limit = { religion = jewish }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_reform }
    	random_character = {
    		limit = { religion = reform }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_meshichist }
    	random_character = {
    		limit = { religion = meshichist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_hindu }
    	random_character = {
    		limit = { religion = hindu }
    		save_event_target_as = old_religion
    	}
    }
}

flip_secret_religious_community_provinces = {
	trigger_switch = {
		on_trigger = society_member_of
		secret_religious_society_rastafarian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rastafarian_community
					}
					religion = rastafarian
					remove_province_modifier = secret_rastafarian_community
				}
			}
		}
		secret_religious_society_voodoo = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_voodoo_community
					}
					religion = voodoo
					remove_province_modifier = secret_voodoo_community
				}
			}
		}
		secret_religious_society_santeria = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_santeria_community
					}
					religion = santeria
					remove_province_modifier = secret_santeria_community
				}
			}
		}
		secret_religious_society_candomble = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_candomble_community
					}
					religion = candomble
					remove_province_modifier = secret_candomble_community
				}
			}
		}
		secret_religious_society_espiritista = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_espiritista_community
					}
					religion = espiritista
					remove_province_modifier = secret_espiritista_community
				}
			}
		}
		secret_religious_society_espiritista_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_espiritista_reformed_community
					}
					religion = espiritista_reformed
					remove_province_modifier = secret_espiritista_reformed_community
				}
			}
		}
		secret_religious_society_ghost_dance = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_ghost_dance_community
					}
					religion = ghost_dance
					remove_province_modifier = secret_ghost_dance_community
				}
			}
		}
		secret_religious_society_raven_tales = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_raven_tales_community
					}
					religion = raven_tales
					remove_province_modifier = secret_raven_tales_community
				}
			}
		}
		secret_religious_society_catholic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_catholic_community
					}
					religion = catholic
					remove_province_modifier = secret_catholic_community
				}
			}
		}
		secret_religious_society_neognostic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_neognostic_community
					}
					religion = neognostic
					remove_province_modifier = secret_neognostic_community
				}
			}
		}
		secret_religious_society_sedevacantist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sedevacantist_community
					}
					religion = sedevacantist
					remove_province_modifier = secret_sedevacantist_community
				}
			}
		}
		secret_religious_society_nestorian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_nestorian_community
					}
					religion = nestorian
					remove_province_modifier = secret_nestorian_community
				}
			}
		}
		secret_religious_society_ursuline = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_ursuline_community
					}
					religion = ursuline
					remove_province_modifier = secret_ursuline_community
				}
			}
		}
		secret_religious_society_angeline = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_angeline_community
					}
					religion = angeline
					remove_province_modifier = secret_angeline_community
				}
			}
		}
		secret_religious_society_confederated = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_confederated_community
					}
					religion = confederated
					remove_province_modifier = secret_confederated_community
				}
			}
		}
		secret_religious_society_anabaptist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_anabaptist_community
					}
					religion = anabaptist
					remove_province_modifier = secret_anabaptist_community
				}
			}
		}
		secret_religious_society_batenburger = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_batenburger_community
					}
					religion = batenburger
					remove_province_modifier = secret_batenburger_community
				}
			}
		}
		secret_religious_society_evangelical = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_evangelical_community
					}
					religion = evangelical
					remove_province_modifier = secret_evangelical_community
				}
			}
		}
		secret_religious_society_antinomian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_antinomian_community
					}
					religion = antinomian
					remove_province_modifier = secret_antinomian_community
				}
			}
		}
		secret_religious_society_charismatic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_charismatic_community
					}
					religion = charismatic
					remove_province_modifier = secret_charismatic_community
				}
			}
		}
		secret_religious_society_postadventist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_postadventist_community
					}
					religion = postadventist
					remove_province_modifier = secret_postadventist_community
				}
			}
		}
		secret_religious_society_falling_star = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_falling_star_community
					}
					religion = falling_star
					remove_province_modifier = secret_falling_star_community
				}
			}
		}
		secret_religious_society_moravian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_moravian_community
					}
					religion = moravian
					remove_province_modifier = secret_moravian_community
				}
			}
		}
		secret_religious_society_high_church = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_high_church_community
					}
					religion = high_church
					remove_province_modifier = secret_high_church_community
				}
			}
		}
		secret_religious_society_united_church = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_united_church_community
					}
					religion = united_church
					remove_province_modifier = secret_united_church_community
				}
			}
		}
		secret_religious_society_apostolic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_apostolic_community
					}
					religion = apostolic
					remove_province_modifier = secret_apostolic_community
				}
			}
		}
		secret_religious_society_sacred_heart = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sacred_heart_community
					}
					religion = sacred_heart
					remove_province_modifier = secret_sacred_heart_community
				}
			}
		}
		secret_religious_society_gracia_divina = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_gracia_divina_community
					}
					religion = gracia_divina
					remove_province_modifier = secret_gracia_divina_community
				}
			}
		}
		secret_religious_society_cetic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_cetic_community
					}
					religion = cetic
					remove_province_modifier = secret_cetic_community
				}
			}
		}
		secret_religious_society_gaian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_gaian_community
					}
					religion = gaian
					remove_province_modifier = secret_gaian_community
				}
			}
		}
		secret_religious_society_shinto = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_shinto_community
					}
					religion = shinto
					remove_province_modifier = secret_shinto_community
				}
			}
		}
		secret_religious_society_nousthreskeia = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_nousthreskeia_community
					}
					religion = nousthreskeia
					remove_province_modifier = secret_nousthreskeia_community
				}
			}
		}
		secret_religious_society_mormon = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_mormon_community
					}
					religion = mormon
					remove_province_modifier = secret_mormon_community
				}
			}
		}
		secret_religious_society_bickertonite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_bickertonite_community
					}
					religion = bickertonite
					remove_province_modifier = secret_bickertonite_community
				}
			}
		}
		secret_religious_society_woolleyite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_woolleyite_community
					}
					religion = woolleyite
					remove_province_modifier = secret_woolleyite_community
				}
			}
		}
		secret_religious_society_strangite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_strangite_community
					}
					religion = strangite
					remove_province_modifier = secret_strangite_community
				}
			}
		}
		secret_religious_society_sol_invicta = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sol_invicta_community
					}
					religion = sol_invicta
					remove_province_modifier = secret_sol_invicta_community
				}
			}
		}
		secret_religious_society_mictlantec = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_mictlantec_community
					}
					religion = mictlantec
					remove_province_modifier = secret_mictlantec_community
				}
			}
		}
		secret_religious_society_uahomche = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_uahomche_community
					}
					religion = uahomche
					remove_province_modifier = secret_uahomche_community
				}
			}
		}
		secret_religious_society_neomayan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_neomayan_community
					}
					religion = neomayan
					remove_province_modifier = secret_neomayan_community
				}
			}
		}
		secret_religious_society_americanist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_americanist_community
					}
					religion = americanist
					remove_province_modifier = secret_americanist_community
				}
			}
		}
		secret_religious_society_hamiltonian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hamiltonian_community
					}
					religion = hamiltonian
					remove_province_modifier = secret_hamiltonian_community
				}
			}
		}
		secret_religious_society_jeffersonian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jeffersonian_community
					}
					religion = jeffersonian
					remove_province_modifier = secret_jeffersonian_community
				}
			}
		}
		secret_religious_society_libertarian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_libertarian_community
					}
					religion = libertarian
					remove_province_modifier = secret_libertarian_community
				}
			}
		}
		secret_religious_society_consumerist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_consumerist_community
					}
					religion = consumerist
					remove_province_modifier = secret_consumerist_community
				}
			}
		}
		secret_religious_society_atomicist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_atomicist_community
					}
					religion = atomicist
					remove_province_modifier = secret_atomicist_community
				}
			}
		}
		secret_religious_society_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_pagan_community
					}
					religion = pagan
					remove_province_modifier = secret_pagan_community
				}
			}
		}
		secret_religious_society_revelationist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_revelationist_reformed_community
					}
					religion = revelationist_reformed
					remove_province_modifier = secret_revelationist_reformed_community
				}
			}
		}
		secret_religious_society_revelationist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_revelationist_community
					}
					religion = revelationist
					remove_province_modifier = secret_revelationist_community
				}
			}
		}
		secret_religious_society_rust_cultist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rust_cultist_reformed_community
					}
					religion = rust_cultist_reformed
					remove_province_modifier = secret_rust_cultist_reformed_community
				}
			}
		}
		secret_religious_society_rust_cultist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rust_cultist_community
					}
					religion = rust_cultist
					remove_province_modifier = secret_rust_cultist_community
				}
			}
		}
		secret_religious_society_occultist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_occultist_reformed_community
					}
					religion = occultist_reformed
					remove_province_modifier = secret_occultist_reformed_community
				}
			}
		}
		secret_religious_society_occultist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_occultist_community
					}
					religion = occultist
					remove_province_modifier = secret_occultist_community
				}
			}
		}
		secret_religious_society_thelemic_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_thelemic_reformed_community
					}
					religion = thelemic_reformed
					remove_province_modifier = secret_thelemic_reformed_community
				}
			}
		}
		secret_religious_society_thelemic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_thelemic_community
					}
					religion = thelemic
					remove_province_modifier = secret_thelemic_community
				}
			}
		}
		secret_religious_society_norse_pagan_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_reformed_community
					}
					religion = norse_pagan_reformed
					remove_province_modifier = secret_norse_pagan_reformed_community
				}
			}
		}
		secret_religious_society_norse_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_community
					}
					religion = norse_pagan
					remove_province_modifier = secret_norse_pagan_community
				}
			}
		}
		secret_religious_society_celtic_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_celtic_pagan_community
					}
					religion = celtic_pagan
					remove_province_modifier = secret_celtic_pagan_community
				}
			}
		}
		secret_religious_society_celtic_pagan_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_celtic_pagan_reformed_community
					}
					religion = celtic_pagan_reformed
					remove_province_modifier = secret_celtic_pagan_reformed_community
				}
			}
		}
		secret_religious_society_brethren = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_brethren_community
					}
					religion = brethren
					remove_province_modifier = secret_brethren_community
				}
			}
		}
		secret_religious_society_jewish = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jewish_community
					}
					religion = jewish
					remove_province_modifier = secret_jewish_community
				}
			}
		}
		secret_religious_society_reform = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_reform_community
					}
					religion = reform
					remove_province_modifier = secret_reform_community
				}
			}
		}
		secret_religious_society_meshichist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_meshichist_community
					}
					religion = meshichist
					remove_province_modifier = secret_meshichist_community
				}
			}
		}
		secret_religious_society_hindu = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hindu_community
					}
					religion = hindu
					remove_province_modifier = secret_hindu_community
				}
			}
		}
	}
}

##DEVIL WORSHIPPER##
join_from_devil_worshiper_society_effect = {
	FROM = {
		if = {
			limit = {
				society_member_of = the_satanists
			}
			ROOT = {
				join_society = the_satanists
			}
		}
		if = {
			limit = {
				society_member_of = the_plaguebringers
			}
			ROOT = {
				join_society = the_plaguebringers
			}
		}
		if = {
			limit = {
				society_member_of = the_cult_of_kali
			}
			ROOT = {
				join_society = the_cult_of_kali
			}
		}
		if = {
			limit = {
				society_member_of = the_trollcrafters
			}
			ROOT = {
				join_society = the_trollcrafters
			}
		}
		if = {
			limit = {
				society_member_of = the_illuminati
			}
			ROOT = {
				join_society = the_illuminati
			}
		}
		if = {
			limit = {
				society_member_of = the_epa
			}
			ROOT = {
				join_society = the_epa
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_cortez
			}
			ROOT = {
				join_society = cult_of_cortez
			}
		}
		if = {
			limit = {
				society_member_of = bohemian_grove
			}
			ROOT = {
				join_society = bohemian_grove
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_cortez
			}
			ROOT = {
				join_society = cult_of_cortez
			}
		}
		if = {
			limit = {
				society_member_of = davy_jones_mates
			}
			ROOT = {
				join_society = davy_jones_mates
			}
		}
		if = {
			limit = {
				society_member_of = starry_wisdom
			}
			ROOT = {
				join_society = starry_wisdom
			}
		}
		if = {
			limit = {
				society_member_of = unseelie_petitioners
			}
			ROOT = {
				join_society = unseelie_petitioners
			}
		}
	}
}

clean_up_after_leaving_society_effect = {
	hidden_effect = {
		clr_character_flag = do_not_disturb
		remove_character_modifier = quest_cooldown_timer
		
		#Powers, Missions and Interactions: the Assassins
		#quest_the_assassins_assassination
		#quest_the_assassins_collect_debt
		#quest_the_assassins_convert_province
		#quest_the_assassins_occupy_holding
		#quest_the_assassins_protege
		clr_character_flag = ongoing_recruitment
		clr_character_flag = approves_of_americanist
		clr_character_flag = disapproves_of_americanist
		clr_character_flag = willing_to_join
		clr_character_flag = unwilling_to_join
		clr_character_flag = assassins_attempted_recruitment
		clr_character_flag = escape_successful
		clr_character_flag = escape_injured
		clr_character_flag = escape_death
		clr_character_flag = escape_bribe 
		
		#Powers, Missions and Interactions: Devil Worshipers
		clr_character_flag = attempted_corrupt_priest
		clr_character_flag = possessing_courtier
		clr_character_flag = desecration_in_progress
		clr_character_flag = desecration_violent
		clr_character_flag = desecration_at_home
		clr_character_flag = desecration_plotting
		clr_character_flag = approves_of_satanism
		clr_character_flag = disapproves_of_satanism
		clr_character_flag = has_ill_lover_loc
		clr_character_flag = has_ill_spouse_loc
		clr_character_flag = has_ill_child_loc
		clr_character_flag = has_money_troubles_loc
		clr_character_flag = has_some_illness_loc
		clr_character_flag = has_need_of_winning_battles_loc
		clr_character_flag = has_a_rival_loc
		clr_character_flag = is_weak_loc
		clr_character_flag = is_dumb_loc
		clr_character_flag = being_recruited_by_the_satanists
		clr_character_flag = being_recruited_by_the_trollcrafters
		clr_character_flag = being_recruited_by_the_cult_of_kali
		clr_character_flag = being_recruited_by_the_plaguebringers
		clr_character_flag = being_recruited_by_the_illuminati
		clr_character_flag = being_recruited_by_the_epa
		clr_character_flag = being_recruited_by_cult_of_cortez
		clr_character_flag = being_recruited_by_bohemian_grove
		clr_character_flag = being_recruited_by_davy_jones_mates
		clr_character_flag = being_recruited_by_starry_wisdom
		clr_character_flag = being_recruited_by_the_unseelie

		#Powers, Missions and Interactions: Secret Religious	
		clr_character_flag = sr_too_honest
	    clr_character_flag = sr_too_wroth
	    clr_character_flag = sr_too_slothful
	    clr_character_flag = sr_too_trusting
	    clr_character_flag = sr_too_indiscreet
	    clr_character_flag = free_help
	    clr_character_flag = help_for_cost
		clr_character_flag = conduct_secret_ceremony_timer
		remove_character_modifier = attempting_to_blend_in
		clr_character_flag = blending_in_timer
		clr_character_flag = attempting_to_convince_stubborn_courtier
	    clr_character_flag = attempting_to_convince_concerned_friend
	    clr_character_flag = blend_in_struggled_with_trait
	    clr_character_flag = blend_in_attended_house_of_worship
	    clr_character_flag = blend_in_general_progress
		#quest_secret_religious_societies_induct_ruler
		#quest_secret_religious_societies_sympathy_ruler
		
		#Powers, Missions and Interactions: Monastic orders
		clr_character_flag = monastic_orders_holy_seclusion
		clr_character_flag = monastic_orders_mission_charity
		clr_character_flag = monastic_orders_mission_theology
 		clr_character_flag = monastic_orders_mission_christian_pilgrimage
		clr_character_flag = monastic_orders_mission_dharmic_pilgrimage
		clr_character_flag = monastic_orders_mission_mormon_pilgrimage
		clr_character_flag = monastic_orders_mission_temple
		clr_character_flag = ascetic_arriving
		clr_character_flag = monastic_artifact_lover
		clr_character_flag = monastic_artifact_seamless_robe_of_jesus
		clr_character_flag = monastic_artifact_crown_of_thorns
		clr_character_flag = monastic_artifact_fragment_of_true_cross
		clr_character_flag = monastic_artifact_holy_foreskin
		clr_character_flag = monastic_artifact_image_of_edessa
		clr_character_flag = monastic_artifact_elaborate_danda
		clr_character_flag = monastic_artifact_sariraka_actual_body_part
		clr_character_flag = monastic_artifact_sarira
		clr_character_flag = suggestion_A_flag
		clr_character_flag = suggestion_B_flag
		clr_character_flag = 3264_deceitful_flag
		clr_character_flag = 3264_publish_flag
		clr_character_flag = 3264_depressed_flag
		clr_character_flag = 3264_deceitful_flag
		clr_character_flag = 4202_visit_monastery_flag
		clr_character_flag = 4202_hire_someone_flag
		clr_character_flag = 4202_send_my_own_samples_flag
		clr_character_flag = 4212_woke_them_up_flag
		clr_character_flag = 4212_let_them_sleep_flag
		clr_character_flag = 4212_pranked_them_flag
		remove_character_modifier = in_meditation
		remove_character_modifier = doing_penance
		clr_character_flag = holy_seclusion_timer
		clr_character_flag = holy_seclusion_struggled_with_vice
		clr_character_flag = holy_seclusion_lustful
		clr_character_flag = holy_seclusion_gluttonous
		clr_character_flag = holy_seclusion_greedy
		clr_character_flag = holy_seclusion_slothful
		clr_character_flag = holy_seclusion_struggled_with_loneliness
		clr_character_flag = holy_seclusion_scripture_reading
		clr_character_flag = holy_seclusion_scripture_reading
		clr_character_flag = holy_seclusion_interrupting_child
		clr_character_flag = success_seculison_desc_A
		clr_character_flag = success_seculison_desc_B
		clr_character_flag = success_seculison_desc_C

		#Powers, Missions and Interactions: Hermetics
		clr_character_flag = power_hungry_scrying_flag
		clr_character_flag = relationship_focused_scrying_flag
		clr_character_flag = battle_focused_scrying_flag
		remove_character_modifier = writing_magnum_opus
		remove_character_modifier = acquire_ingredients_decision_cooldown_timer
		clr_character_flag = building_laboratory
		clr_character_flag = decided_on_glass
		clr_character_flag = decided_on_crucibles
		clr_character_flag = decided_on_tools
		clr_character_flag = decided_on_books
		clr_character_flag = bribed_guards
		clr_character_flag = guards_wake_up
		clr_character_flag = distraction_failed
		clr_character_flag = caught_stealing
		clr_character_flag = caught_destroying
		remove_scrying_omen_modifiers_effect = yes
		clr_character_flag = lab_destruction
		clr_character_flag = lab_damage
		clr_character_flag = lab_explosion_death
		
		#Powers, missions, and interactions: Bankers
		clr_character_flag = forgave_debtor
		remove_character_modifier = weak_banker
		clr_character_flag = shares_100
		clr_character_flag = shares_200
		clr_character_flag = shares_400
		clr_character_flag = shares_600
		clr_character_flag = shares_800
		clr_character_flag = shares_100
		clr_character_flag = shares_selling
		remove_character_modifier = shares_sold
		remove_character_modifier = building_subsidies
		remove_character_modifier = invested_research
		remove_character_modifier = increased_prosperity
		clr_character_flag = banking_society_mission_business
		clr_character_flag = banking_society_mission_collect_debt
		clr_character_flag = banking_society_mission_city
		#clr_character_flag = banking_society_make_investment
		#quest_banking_society_business_focus
		#quest_banking_society_collect_debt
		#quest_banking_society_city_construction
		remove_character_modifier = strong_banker
	}
}

increase_visibility_minor_effect = {
	#custom_tooltip = { text = debug_vis }
	hidden_effect = {
		change_variable = { which = visibility_value value = 2 } 
		if = {
			limit = {
				check_variable = { which = visibility_value value = 15 }
				NOR = {
					has_character_modifier = under_suspicion
					has_character_modifier = highly_suspect
				}
			}
			add_character_modifier = {
				name = under_suspicion
				duration = -1
			}
			character_event = { id = MNM.6662 days = 1 }
		}
		if = {
			limit = {
				check_variable = { which = visibility_value value = 25 }
				NOT = {
					has_character_modifier = highly_suspect
				}
			}
			remove_character_modifier = under_suspicion
			add_character_modifier = {
				name = highly_suspect duration = -1 
			}
			character_event = { id = MNM.6663 days = 1 }
			liege = {
				set_character_flag = secret_societies_interference
				character_event = { id = MNM.6661 days = 1095 random = 1095 }
			}
		}
		if = { # Too visible? You auto-reveal yourself if you are independent
			limit = {
				independent = yes
				is_ruler = yes
				check_variable = { which = visibility_value value = 40 }
				NOT = {
					has_character_flag = self_reveal
				}
			}
			set_character_flag = self_reveal
			if = {
				limit = {
					is_devil_worshiper_trigger = yes
				}
				add_character_modifier = {
					name = known_satanist
					duration = -1
				}
			}
			if = {
				limit = {
					is_devil_worshiper_trigger = no
				}
				add_character_modifier = {
					name = accused_apostate
					duration = -1
				}
			}
			if = {
				limit = {
					controls_religion = no
					OR = {
						religion = catholic
						religion = ursuline
						religion = confederated
						religion = evangelical
						religion = high_church
						religion = mormon
						religion = americanist
						religion = libertarian
						religion = anabaptist
						religion = apostolic
					}
				}
				add_trait = excommunicated
			}
			character_event = { id = MNM.6668 days = 1 }
		}
	}
}

root_secret_religion_provinces_convert_effect = {
	ROOT = {
		trigger_switch = {
			on_trigger = society_member_of
			secret_religious_society_rastafarian = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_rastafarian_community
						}
						religion = rastafarian
						remove_province_modifier = secret_rastafarian_community
					}
				}
			}
			secret_religious_society_voodoo = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_voodoo_community
						}
						religion = voodoo
						remove_province_modifier = secret_voodoo_community
					}
				}
			}
			secret_religious_society_santeria = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_santeria_community
						}
						religion = santeria
						remove_province_modifier = secret_santeria_community
					}
				}
			}
			secret_religious_society_candomble = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_candomble_community
						}
						religion = candomble
						remove_province_modifier = secret_candomble_community
					}
				}
			}
			secret_religious_society_espiritista_reformed = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_espiritista_reformed_community
						}
						religion = espiritista_reformed
						remove_province_modifier = secret_espiritista_reformed_community
					}
				}
			}
			secret_religious_society_espiritista = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_espiritista_community
						}
						religion = espiritista
						remove_province_modifier = secret_espiritista_community
					}
				}
			}
			secret_religious_society_ghost_dance = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_ghost_dance_community
						}
						religion = ghost_dance
						remove_province_modifier = secret_ghost_dance_community
					}
				}
			}
			secret_religious_society_raven_tales = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_raven_tales_community
						}
						religion = raven_tales
						remove_province_modifier = secret_raven_tales_community
					}
				}
			}
			secret_religious_society_bogomilist = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_catholic_community
						}
						religion = catholic
						remove_province_modifier = secret_catholic_community
					}
				}
			}
			secret_religious_society_neognostic = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_neognostic_community
						}
						religion = neognostic
						remove_province_modifier = secret_neognostic_community
					}
				}
			}
			secret_religious_society_sedevacantist = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_sedevacantist_community
						}
						religion = sedevacantist
						remove_province_modifier = secret_sedevacantist_community
					}
				}
			}
			secret_religious_society_nestorian = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_nestorian_community
						}
						religion = nestorian
						remove_province_modifier = secret_nestorian_community
					}
				}
			}
			secret_religious_society_ursuline = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_ursuline_community
						}
						religion = ursuline
						remove_province_modifier = secret_ursuline_community
					}
				}
			}
			secret_religious_society_angeline = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_angeline_community
						}
						religion = angeline
						remove_province_modifier = secret_angeline_community
					}
				}
			}
			secret_religious_society_confederated = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_confederated_community
						}
						religion = confederated
						remove_province_modifier = secret_confederated_community
					}
				}
			}
			secret_religious_society_anabaptist = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_anabaptist_community
						}
						religion = anabaptist
						remove_province_modifier = secret_anabaptist_community
					}
				}
			}
			secret_religious_society_batenburger = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_batenburger_community
						}
						religion = batenburger
						remove_province_modifier = secret_batenburger_community
					}
				}
			}
			secret_religious_society_evangelical = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_evangelical_community
						}
						religion = evangelical
						remove_province_modifier = secret_evangelical_community
					}
				}
			}
			secret_religious_society_antinomian = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_antinomian_community
						}
						religion = antinomian
						remove_province_modifier = secret_antinomian_community
					}
				}
			}
			secret_religious_society_charismatic = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_charismatic_community
						}
						religion = charismatic
						remove_province_modifier = secret_charismatic_community
					}
				}
			}
			secret_religious_society_postadventist = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_postadventist_community
						}
						religion = postadventist
						remove_province_modifier = secret_postadventist_community
					}
				}
			}
			secret_religious_society_falling_star = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_falling_star_community
						}
						religion = falling_star
						remove_province_modifier = secret_falling_star_community
					}
				}
			}
			secret_religious_society_moravian = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_moravian_community
						}
						religion = moravian
						remove_province_modifier = secret_moravian_community
					}
				}
			}
			secret_religious_society_high_church = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_high_church_community
						}
						religion = high_church
						remove_province_modifier = secret_high_church_community
					}
				}
			}
			secret_religious_society_united_church = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_united_church_community
						}
						religion = united_church
						remove_province_modifier = secret_united_church_community
					}
				}
			}
			secret_religious_society_apostolic = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_apostolic_community
						}
						religion = apostolic
						remove_province_modifier = secret_apostolic_community
					}
				}
			}
			secret_religious_society_sacred_heart = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_sacred_heart_community
						}
						religion = sacred_heart
						remove_province_modifier = secret_sacred_heart_community
					}
				}
			}
			secret_religious_society_gracia_divina = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_gracia_divina_community
						}
						religion = gracia_divina
						remove_province_modifier = secret_gracia_divina_community
					}
				}
			}
			secret_religious_society_cetic = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_cetic_community
						}
						religion = cetic
						remove_province_modifier = secret_cetic_community
					}
				}
			}
			secret_religious_society_gaian = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_gaian_community
						}
						religion = gaian
						remove_province_modifier = secret_gaian_community
					}
				}
			}
			secret_religious_society_shinto = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_shinto_community
						}
						religion = shinto
						remove_province_modifier = secret_shinto_community
					}
				}
			}
			secret_religious_society_nousthreskeia = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_nousthreskeia_community
						}
						religion = nousthreskeia
						remove_province_modifier = secret_nousthreskeia_community
					}
				}
			}
			secret_religious_society_mormon = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_mormon_community
						}
						religion = mormon
						remove_province_modifier = secret_mormon_community
					}
				}
			}
			secret_religious_society_bickertonite = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_bickertonite_community
						}
						religion = bickertonite
						remove_province_modifier = secret_bickertonite_community
					}
				}
			}
			secret_religious_society_woolleyite = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_woolleyite_community
						}
						religion = woolleyite
						remove_province_modifier = secret_woolleyite_community
					}
				}
			}
			secret_religious_society_strangite = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_strangite_community
						}
						religion = strangite
						remove_province_modifier = secret_strangite_community
					}
				}
			}
			secret_religious_society_sol_invicta = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_sol_invicta_community
						}
						religion = sol_invicta
						remove_province_modifier = secret_sol_invicta_community
					}
				}
			}
			secret_religious_society_mictlantec = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_mictlantec_community
						}
						religion = mictlantec
						remove_province_modifier = secret_mictlantec_community
					}
				}
			}
			secret_religious_society_uahomche = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_uahomche_community
						}
						religion = uahomche
						remove_province_modifier = secret_uahomche_community
					}
				}
			}
			secret_religious_society_neomayan = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_neomayan_community
						}
						religion = neomayan
						remove_province_modifier = secret_neomayan_community
					}
				}
			}
			secret_religious_society_americanist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_americanist_community
						}
						religion = americanist
						remove_province_modifier = secret_americanist_community
					}
				}
			}
			secret_religious_society_hamiltonian = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_hamiltonian_community
						}
						religion = hamiltonian
						remove_province_modifier = secret_hamiltonian_community
					}
				}
			}
			secret_religious_society_jeffersonian = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_jeffersonian_community
						}
						religion = jeffersonian
						remove_province_modifier = secret_jeffersonian_community
					}
				}
			}
			secret_religious_society_libertarian = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_libertarian_community
						}
						religion = libertarian
						remove_province_modifier = secret_libertarian_community
					}
				}
			}
			secret_religious_society_consumerist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_consumerist_community
						}
						religion = consumerist
						remove_province_modifier = secret_consumerist_community
					}
				}
			}
			secret_religious_society_atomicist = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_atomicist_community
						}
						religion = atomicist
						remove_province_modifier = secret_atomicist_community
					}
				}
			}
			secret_religious_society_revelationist_reformed = {
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_revelationist_reformed_community
						}
						religion = revelationist_reformed
						remove_province_modifier = secret_revelationist_reformed_community
					}
				}
			}
			secret_religious_society_revelationist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_revelationist_community
						}
						religion = revelationist
						remove_province_modifier = secret_revelationist_community
					}
				}
			}
			secret_religious_society_rust_cultist_reformed = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_rust_cultist_reformed_community
						}
						religion = rust_cultist_reformed
						remove_province_modifier = secret_rust_cultist_reformed_community
					}
				}
			}
			secret_religious_society_rust_cultist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_rust_cultist_community
						}
						religion = rust_cultist
						remove_province_modifier = secret_rust_cultist_community
					}
				}
			}
			secret_religious_society_occultist_reformed = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_occultist_reformed_community
						}
						religion = occultist_reformed
						remove_province_modifier = secret_occultist_reformed_community
					}
				}
			}
			secret_religious_society_occultist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_occultist_community
						}
						religion = occultist
						remove_province_modifier = secret_occultist_community
					}
				}
			}
			secret_religious_society_thelemic_reformed = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_thelemic_reformed_community
						}
						religion = thelemic_reformed
						remove_province_modifier = secret_thelemic_reformed_community
					}
				}
			}
			secret_religious_society_thelemic = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_thelemic_community
						}
						religion = thelemic 
						remove_province_modifier = secret_thelemic_community
					}
				}
			} 
			secret_religious_society_norse_pagan_reformed = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_norse_pagan_reformed_community
						}
						religion = norse_pagan_reformed 
						remove_province_modifier = secret_norse_pagan_reformed_community
					}
				}
			}
			secret_religious_society_norse_pagan = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_norse_pagan_community
						}
						religion = norse_pagan
						remove_province_modifier = secret_norse_pagan_community
					}
				}
			}
			secret_religious_society_celtic_pagan = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_celtic_pagan_community
						}
						religion = celtic_pagan
						remove_province_modifier = secret_celtic_pagan_community
					}
				}
			}
			secret_religious_society_brethren = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_brethren_community
						}
						religion = brethren
						remove_province_modifier = secret_brethren_community
					}
				}
			}
			secret_religious_society_jewish = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_jewish_community
						}
						religion = jewish
						remove_province_modifier = secret_jewish_community
					}
				}
			}
			secret_religious_society_reform = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_reform_community
						}
						religion = reform
						remove_province_modifier = secret_reform_community
					}
				}
			}
			secret_religious_society_meshichist = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_meshichist_community
						}
						religion = meshichist
						remove_province_modifier = secret_meshichist_community
					}
				}
			}
			secret_religious_society_hindu = { 
				PREV = {
					any_demesne_province = {
						limit = {
							has_province_modifier = secret_hindu_community
						}
						religion = hindu
						remove_province_modifier = secret_hindu_community
					}
				}
			}
		}
	}
}


##MEN IN BLACK/ASSASSINS##

pay_back_assassins_effect = {
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 50 } }
		wealth = -50
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 50
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 250 } }
		wealth = -250	
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 250
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 300 } }
		wealth = -300
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 300
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 500 } }
		wealth = -500
		hidden_tooltip = {
			event_target:grand_master = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 500
				}
			}
		}
	}
}

monastic_order_purity_effect = {
	if = {
		limit = {
			is_monastic_member_trigger = yes
			OR = {
				trait = cynical
				trait = gluttonous
				trait = greedy
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
				trait = deceitful
				trait = cruel
				AND = {
					trait = lustful
					NOT = { religion = hindu }
					NOT = { religion_group = jewish_group }
				}
				trait = ambitious
				NOT = { trait = humble }
				NOT = { trait = charitable }
				NOT = { trait = kind }
				NOT = { trait = temperate }
				NOT = { trait = honest }
				NAND = {
					trait = chaste
					NOT = { religion = hindu }
					NOT = { religion_group = jewish_group }
				}
				NOT = { trait = patient }
				NOT = { trait = diligent }
				NOT = { trait = content }
			}
		}

		random = {
			chance = 20
			modifier = {
				factor = 1.3
				society_rank == 2
			}
			modifier = {
				factor = 1.5
				society_rank == 3
			}
			modifier = {
				factor = 1.7
				society_rank == 4
			}
			modifier = {
				factor = 1.1
				piety = 100
			}
			modifier = {
				factor = 1.3
				piety = 300
			}
			modifier = {
				factor = 1.5
				piety = 500
			}
			modifier = {
				factor = 2
				piety = 1000
			}
			character_event = { id = MNM.4400 days = 10 random = 10 }
		}
	}
}

join_prev_monastic_order_society = {
	if = {
		limit = { PREV = { society_member_of = monastic_order_evangelical } }
		join_society = monastic_order_evangelical
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_benedictine } }
		join_society = monastic_order_benedictine
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_dominican } }
		join_society = monastic_order_dominican
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_leibowitz } }
		join_society = monastic_order_leibowitz
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_ursuline } }
		join_society = monastic_order_ursuline
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_mormon } }
		join_society = monastic_order_mormon
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_hindu } }
		join_society = monastic_order_hindu
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_jewish } }
		join_society = monastic_order_jewish
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_cetic } }
		join_society = monastic_order_cetic
	}
	if = {
		limit = {
			religion = celtic_pagan_reformed
		}
		add_trait = lughs_own
	}
}

##BANKING SOCIETY##

join_prev_banking_society = {
	join_society = banking_society
	scaled_wealth = -0.50
}

##SPAWNING CHARACTERS##

spawn_good_commander_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = yes
			attributes = {
				diplomacy = 2
				learning = 2
				stewardship = 2
				intrigue = 2
				martial = 8
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = no
			attributes = {
				diplomacy = 2
				learning = 2
				stewardship = 2
				intrigue = 2
				martial = 8
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		random_list = { # Flavor Randomization
			35 = { 
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = { 
				add_trait = shrewd
			}
			3 = { 
				add_trait = giant
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					OR = {
						religion = gaian
						religion = neomayan
						has_religion_feature = religion_astrology
						has_religion_feature = religion_feature_occultist
					}
				}
				hidden_tooltip = { add_western_zodiac_trait_effect = yes }
			}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_great_commander_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = yes
			attributes = {
				diplomacy = 3
				learning = 3
				stewardship = 3
				intrigue = 3
				martial = 9
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			female = no
			attributes = {
				diplomacy = 3
				learning = 3
				stewardship = 3
				intrigue = 3
				martial = 9
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		remove_trait = brilliant_strategist

		random_list = {
			5 = { add_trait = misguided_warrior }
			10 = { add_trait = tough_soldier }
			20 = { add_trait = skilled_tactician }
			30 = { add_trait = brilliant_strategist }
		}
	
		random_list = { # Flavor Randomization
			35 = { 
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = { 
				add_trait = shrewd
			}
			1 = { 
				add_trait = giant
			}
		}
		random_list = {
			50 = {
				#Nothing
			}
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					OR = {
						religion = gaian
						religion = neomayan
						has_religion_feature = religion_astrology
						has_religion_feature = religion_feature_occultist
					}
				}
				hidden_tooltip = { add_western_zodiac_trait_effect = yes }
			}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_fantastic_commander_effect = {

	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		
		add_trait = brilliant_strategist
		
		random_list = {
			20 = {
				add_trait = robust
			}
			10 = {
				add_trait = strong
			}
			5 = {
				health = 1
			}
		}
		
		random_list = {
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
		
		random_list = { # Flavor Randomization
			20 = {
				add_trait = giant
				add_trait = robust
				add_trait = hunter
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = giant
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_cyclops
			}
			20 = {
				add_trait = holy_warrior
				add_trait = scarred
				change_martial = 3
				give_nickname = nick_the_hammer
			}
			20 = {
				add_trait = brave
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_fearless
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				add_trait = unyielding_leader
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_defender
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = shrewd
				add_trait = brave
				change_martial = 2
				give_nickname = nick_the_brave
			}
			20 = {
				add_trait = robust
				add_trait = strategist
				change_martial = 1
				give_nickname = nick_the_strong
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_noble
			}
			20 = {
				add_trait = blinded
				add_trait = strategist
				add_trait = genius
				change_martial = 4
				give_nickname = nick_the_blind
			}
			20 = {
				remove_trait = humble
				add_trait = proud
				add_trait = duelist
				change_martial = 2
				give_nickname = nick_the_proud
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_hunter
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_of_a_thousand_faces
			}
			20 = {
				add_trait = genius
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_bear
			}
			20 = {
				add_trait = trusting
				add_trait = quick
				change_martial = 4
				give_nickname = nick_the_loyal
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_boar
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_the_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_bold
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_quarreller
			}
			20 = {
				add_trait = shrewd
				add_trait = cavalry_leader
				change_martial = 2
				give_nickname = nick_the_wolf
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_fantastic_diplomat_effect = {

	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_diplomat = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 12
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 4
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_diplomat = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			attributes = {
				diplomacy = 12
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 4
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = naive_appeaser
		remove_trait = underhanded_rogue
		remove_trait = charismatic_negotiator
		
		add_trait = grey_eminence

		random_list = {
			27 = {
				add_trait = shrewd
			}
			3 = {
				add_trait = quick
			}
			70 = {
				health = 1
			}
		}
		if = {
			limit = {
				OR = {
					has_global_flag = christian_crusades_unlocked
					has_global_flag = ursuline_crusades_unlocked
				}
			}
			random = { 
				chance = 20 
				add_trait = crusader
			}
		}
		
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_fantastic_scholar_effect = {

	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 4
				learning = 12
				stewardship = 4
				intrigue = 4
				martial = 4
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			attributes = {
				diplomacy = 4
				learning = 12
				stewardship = 4
				intrigue = 4
				martial = 4
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = naive_appeaser
		remove_trait = underhanded_rogue
		remove_trait = charismatic_negotiator
		remove_trait = grey_eminence
		
		add_trait = mastermind_theologian

		random_list = {
			27 = {
				add_trait = shrewd
			}
			3 = {
				add_trait = quick
			}
			70 = {
				change_diplomacy = 1
			}
		}
		
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = brahmin
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_elder_effect = {

	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			age = 50
			attributes = {
				diplomacy = 4
				learning = 10
				stewardship = 6
				intrigue = 4
				martial = 4
			}
		}
	}
	if = { 
		limit = { NOR = { has_religion_feature = religion_matriarchal has_religion_feature = religion_patriarchal } }
		random_list = {
			50 = {
				create_random_priest = {
					random_traits = yes
					dynasty = actually_culture
					female = no
					age = 50
					attributes = {
						diplomacy = 4
						learning = 10
						stewardship = 6
						intrigue = 4
						martial = 4
					}
				}
			}
			50 = {
				create_random_priest = {
					random_traits = yes
					dynasty = actually_culture
					female = yes
					age = 50
					attributes = {
						diplomacy = 4
						learning = 10
						stewardship = 6
						intrigue = 4
						martial = 4
					}
				}
			}
		}
	}
	if = { 
		limit = { has_religion_feature = religion_patriarchal }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			age = 50
			attributes = {
				diplomacy = 4
				learning = 10
				stewardship = 6
				intrigue = 4
				martial = 4
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = detached_priest
		remove_trait = martial_cleric
		remove_trait = scholarly_theologian
		remove_trait = mastermind_theologian
		
		add_character_modifier = { name = elder_long_life_modifier years = 100 }
		give_nickname = nick_the_elder 

		random_list = {
			50 = {
				add_trait = martial_cleric
			}
			25 = {
				add_trait = scholarly_theologian
			}
			10 = {
				add_trait = mastermind_theologian
			}
		}
		random_list = {
			5 = {
				add_trait = stubborn
			}
			1 = {
				add_trait = mystic
			}
			1 = {
				add_trait = hunchback
			}
			1 = {
				add_trait = ugly
			}
			10 = {
				add_scarred_tiered_effect = yes
			}
			70 = {
				change_stewardship = 1
			}
		}
		
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = brahmin
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}

			if = { # Assign African face paint
				limit = {
					OR = {
						religion_group = afro_syncretic
						has_religion_feature = religion_animistic
					}
				}
				random_list = {
					25 = { #Nothing
					}
					15 = { 
						add_trait = african_tattoo_1
					}
					15 = { 
						add_trait = african_tattoo_2
					}
					15 = { 
						add_trait = african_tattoo_3
					}
					15 = { 
						add_trait = african_tattoo_4
					}
					5 = { 
						add_trait = african_tattoo_5
					}
					4 = { 
						add_trait = african_tattoo_6
					}
					3 = { 
						add_trait = african_tattoo_7
					}
					2 = { 
						add_trait = african_tattoo_8
					}
					10 = { 
						add_trait = african_tattoo_9
					}
					10 = { 
						add_trait = african_tattoo_10
					}
					10 = { 
						add_trait = african_tattoo_11
					}
					10 = { 
						add_trait = african_tattoo_12
					}
				}
				if = { 
					limit = { NOT = { age = 23 } }
					random_list = { #Modifier, if young enough.
						10 = { #Nothing
						}
						25 = { 
							trigger = {
								OR = {
									trait = african_tattoo_12
									trait = african_tattoo_8
									trait = african_tattoo_2
								}
							}
							add_character_modifier = {
								name = african_adulthood_rites_1
								years = 6
							} 
						}
						25 = { 
							trigger = {
								OR = {
									trait = african_tattoo_10
									trait = african_tattoo_7
									trait = african_tattoo_1
								}
							}
							add_character_modifier = {
								name = african_adulthood_rites_2
								years = 6
							} 
						}
						25 = { 
							trigger = {
								OR = {
									trait = african_tattoo_9
									trait = african_tattoo_6
									trait = african_tattoo_3
								}
							}
							add_character_modifier = {
								name = african_adulthood_rites_3
								years = 6
							} 
						}
						25 = { 
							trigger = {
								OR = {
									trait = african_tattoo_11
									trait = african_tattoo_5
									trait = african_tattoo_4
								}
							}
							add_character_modifier = {
								name = african_adulthood_rites_4
								years = 6
							} 
						}
					}
				}
			}
		}
		set_character_flag = invited_elder
		save_event_target_as = invited_character
	}
}

spawn_debutante_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_character = {
			random_traits = yes
			dynasty = actually_culture
			culture = ROOT
			female = no
			age = 17
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_character = {
			random_traits = yes
			dynasty = actually_culture
			culture = ROOT
			female = yes
			age = 17
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					OR = {
						religion = gaian
						religion = neomayan
						has_religion_feature = religion_astrology
						has_religion_feature = religion_feature_occultist
					}
				}
				hidden_tooltip = { add_western_zodiac_trait_effect = yes }
			}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = debutante
		save_event_target_as = invited_character
	}
}

transfer_crown_on_abdication_effect = {
	if = {
		limit = { 
			has_landed_title = e_dixie
			any_artifact = { artifact_type = crown_hcc } 
		}
			current_heir = { save_event_target_as = crown_hcc_heir }
			any_artifact = { 
				limit = { artifact_type = crown_hcc }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_hcc_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = e_caribbean
			any_artifact = { artifact_type = crown_lion_judah }
		}
			current_heir = { save_event_target_as = crown_judah_heir }
			any_artifact = { 
				limit = { artifact_type = crown_lion_judah }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_judah_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = e_california
			any_artifact = { artifact_type = crown_california }
		}
			current_heir = { save_event_target_as = crown_california_heir }
			any_artifact = { 
				limit = { artifact_type = crown_california }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_california_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_norse_pagan_reformed
			any_artifact = { artifact_type = crown_fylkir }
		}
			current_heir = { save_event_target_as = crown_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_thelemic_reformed
			any_artifact = { artifact_type = crown_thelemic_fylkir }
		}
			current_heir = { save_event_target_as = crown_thelemic_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_thelemic_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_thelemic_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_celtic_pagan_reformed
			any_artifact = { artifact_type = crown_celtic_fylkir }
		}
			current_heir = { save_event_target_as = crown_celtic_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_celtic_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_celtic_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_espiritista_reformed
			any_artifact = { artifact_type = crown_espiritista_fylkir }
		}
			current_heir = { save_event_target_as = crown_espiritista_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_espiritista_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_espiritista_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_revelationist_reformed
			any_artifact = { artifact_type = crown_revelationist_fylkir }
		}
			current_heir = { save_event_target_as = crown_revelationist_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_revelationist_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_revelationist_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_occultist_reformed
			any_artifact = { artifact_type = crown_occultist_fylkir }
		}
			current_heir = { save_event_target_as = crown_occultist_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = crown_occultist_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:crown_occultist_fylkir_heir
				} 
			}
	}
	if = {
		limit = { 
			has_landed_title = d_rust_cultist_reformed
			any_artifact = { artifact_type = scepter_rust_cultist_fylkir }
		}
			current_heir = { save_event_target_as = scepter_rust_cultist_fylkir_heir }
			any_artifact = { 
				limit = { artifact_type = scepter_rust_cultist_fylkir }
				transfer_artifact = {
					from = PREV
					to = event_target:scepter_rust_cultist_fylkir_heir
				} 
			}
	}
	#Now transfer all other remaining artifacts to the player_heir, who may or may not be the current_heir.
	player_heir = { save_event_target_as = scoped_player_heir }
	any_artifact = { 
		limit = { 
			NOR = {
				artifact_type = crown_hcc
				artifact_type = crown_lion_judah
				artifact_type = crown_caribbean
				artifact_type = crown_fylkir
				artifact_type = crown_thelemic_fylkir
				artifact_type = crown_celtic_fylkir
				artifact_type = crown_espiritista_fylkir
				artifact_type = crown_revelationist_fylkir
				artifact_type = crown_occultist_fylkir
				artifact_type = scepter_rust_cultist_fylkir 
			}
		}
		transfer_artifact = {
			from = PREV
			to = event_target:scoped_player_heir
		}
	}
}

spawn_old_duelist_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			age = 60
			attributes = {
				diplomacy = 5
				learning = 1
				stewardship = 2
				intrigue = 9
				martial = 12
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = 10
			age = 60
			attributes = {
				diplomacy = 5
				learning = 1
				stewardship = 2
				intrigue = 9
				martial = 12
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		
		add_trait = brilliant_strategist
		
		random_list = {
			20 = {
				add_trait = robust
			}
			10 = {
				add_trait = strong
			}
			5 = {
				health = 2
			}
		}
		
		random_list = {
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
		
		random_list = { # Flavor Randomization
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = giant
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_cyclops
			}
			20 = {
				add_trait = holy_warrior
				add_trait = scarred
				change_martial = 3
				give_nickname = nick_the_hammer
			}
			20 = {
				add_trait = brave
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_fearless
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				add_trait = unyielding_leader
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_defender
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = shrewd
				add_trait = brave
				change_martial = 2
				give_nickname = nick_the_brave
			}
			20 = {
				add_trait = robust
				add_trait = strategist
				change_martial = 1
				give_nickname = nick_the_strong
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_noble
			}
			20 = {
				add_trait = blinded
				add_trait = strategist
				add_trait = genius
				change_martial = 4
				give_nickname = nick_the_blind
			}
			20 = {
				remove_trait = humble
				add_trait = proud
				add_trait = duelist
				change_martial = 2
				give_nickname = nick_the_proud
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_hunter
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_of_a_thousand_faces
			}
			20 = {
				add_trait = genius
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_bear
			}
			20 = {
				add_trait = trusting
				add_trait = quick
				change_martial = 4
				give_nickname = nick_the_loyal
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_boar
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_the_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_bold
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_quarreller
			}
			20 = {
				add_trait = shrewd
				add_trait = cavalry_leader
				change_martial = 2
				give_nickname = nick_the_wolf
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		add_one_duel_experience_modifier = yes
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}
spawn_giant_duelist_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 4
				learning = 1
				stewardship = 1
				intrigue = 1
				martial = 20
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			dynasty = actually_culture
			female = 10
			attributes = {
				diplomacy = 4
				learning = 1
				stewardship = 1
				intrigue = 1
				martial = 20
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		
		add_trait = brilliant_strategist

		add_trait = giant
		health = 1
		
		random_list = {
			20 = {
				add_trait = robust
			}
			10 = {
				add_trait = strong
			}
		}
		
		random_list = {
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = aggressive_leader
			}
		}

		random_list = { # Flavor Randomization
			20 = {
				add_trait = robust
				add_trait = hunter
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = giant
				add_trait = brave
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_monster
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = robust
				add_trait = shrewd
				change_martial = 1
				give_nickname = nick_the_tower
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				add_trait = duelist
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = slow
				add_trait = duelist
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_tnick_the_gianthe_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_giant
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_giant
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}

spawn_creature_champion_effect = {
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_soldier = {
			random_traits = yes
			culture = bear
			dynasty = actually_culture
			female = yes
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	if = { 
		limit = { NOT = { has_religion_feature = religion_matriarchal } }
		create_random_soldier = {
			random_traits = yes
			culture = bear
			dynasty = actually_culture
			female = 20
			attributes = {
				diplomacy = 4
				learning = 4
				stewardship = 4
				intrigue = 4
				martial = 12
			}
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity
		character_event = { id = misc.4 } # Physique
		set_graphical_culture = event_target:target_ruler
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		
		add_trait = brilliant_strategist
		
		add_trait = robust
		add_trait = strong

		random_list = { # Give the Bear a pet, for fun
			10 = {
				add_character_modifier = {
					name = pet_hunting_dog
					duration = -1
				}
				hidden_tooltip = { 
					character_event = { id = WoL.5290 days = 2555 random = 1000 } # Dog dies
				}
			}
			10 = {
				add_character_modifier = {  
					name = pet_hunting_eagle
					duration = -1
				}
				hidden_effect = { 
					character_event = { id = HF.25631 days = 7300 random = 1500 } #Death.
				}
			}
			10 = {
				add_character_modifier = {
					name = pet_cat
					duration = -1
				}
				hidden_tooltip = { 
					character_event = { id = 77802 days = 2555 random = 1000 }  # Cat dies
				}
			}
		}

		random_list = {
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
		
		random_list = { # Flavor Randomization
			20 = {
				add_trait = giant
				add_trait = robust
				add_trait = hunter
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = giant
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_cyclops
			}
			20 = {
				add_trait = holy_warrior
				add_trait = scarred
				change_martial = 3
				give_nickname = nick_the_hammer
			}
			20 = {
				add_trait = charitable
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_generous
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				add_trait = unyielding_leader
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_defender
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = shrewd
				add_trait = brave
				change_martial = 2
				give_nickname = nick_the_brave
			}
			20 = {
				add_trait = robust
				add_trait = hunter
				add_trait = gregarious
				change_martial = 1
				give_nickname = nick_the_jolly
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_noble
			}
			20 = {
				add_trait = zealous
				add_trait = duelist
				add_trait = genius
				change_martial = 4
				give_nickname = nick_the_witch_hunter
			}
			20 = {
				remove_trait = humble
				add_trait = proud
				add_trait = duelist
				change_martial = 2
				give_nickname = nick_the_proud
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_hunter
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_of_a_thousand_faces
			}
			20 = {
				add_trait = genius
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_bear
			}
			20 = {
				add_trait = trusting
				add_trait = quick
				change_martial = 4
				give_nickname = nick_the_loyal
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_boar
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_the_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_dragon
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_quarreller
			}
			20 = {
				add_trait = shrewd
				add_trait = cavalry_leader
				change_martial = 2
				give_nickname = nick_the_wolf
			}
		}
		hidden_tooltip = {
			#if = {
			#	limit = {
			#		has_dharmic_religion_trigger = yes
			#	}
			#	add_trait = kshatriya
			#	character_event = { id = RoI.30121 }
			#}
			if = {
				limit = {
					has_religion_feature = religion_no_leader
					religion_group = pagan_group
				}
				random_list = {  
					5 = {
						add_trait = pagan_branch_1
					}
					25 = {
						add_trait = pagan_branch_2
					}
					25 = {
						add_trait = pagan_branch_3
					}
					25 = {
						add_trait = pagan_branch_4
					}
				}
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}



##BRAZIL##

remove_candomble_deity_effect = {
	remove_character_modifier = candomble_ogum
	remove_character_modifier = candomble_oxossi
	remove_character_modifier = candomble_pomba_gira
	remove_character_modifier = candomble_orunmila
	remove_character_modifier = candomble_xango
	remove_character_modifier = candomble_yemanja
	remove_character_modifier = candomble_oxum
	remove_character_modifier = candomble_iansa
	remove_character_modifier = candomble_obaluaie
}

return_to_travel_boa_vista_leg_effect = {
	hidden_effect = {
		event_target:kow_tow_traveler = {
			subtract_variable = {
				which = boa_vista_travel_events
				value = 1
			}
			character_event = {
				id = plscometobr.5
				days = 45
				random = 30
			}
		}
	}
}

return_to_travel_amazon_leg_effect = {
	hidden_effect = {
		event_target:kow_tow_traveler = {
			subtract_variable = {
				which = amazon_travel_events
				value = 1
			}
			character_event = {
				id = plscometobr.17
				days = 22
				random = 7
			}
		}
	}
}

return_to_travel_overseas_leg_effect = {
	hidden_effect = {
		event_target:kow_tow_traveler = {
			subtract_variable = {
				which = overseas_travel_events
				value = 1
			}
			character_event = {
				id = plscometobr.43
				days = 30
				random = 7
			}
		}
	}
}

return_to_brasil_tombola_effect = {
	hidden_effect = {
		event_target:kow_tow_traveler = {
			subtract_variable = {
				which = brasil_travel_events
				value = 1
			}
			character_event = {
				id = plscometobr.52
				days = 35
				random = 15
			}
		}
	}
}

abort_kow_tow_effect = {
	if = {
		limit = {
			NOT = { has_character_flag = kow_tow_hide_abort_notification }
		}
		character_event = { id = plscometobr.60 }
	}
	clear_delayed_event = { id = plscometobr.5 } #Land leg tombola
	clear_delayed_event = { id = plscometobr.17 } #Amazon leg tombola
	clear_delayed_event = { id = plscometobr.43 } #Overseas leg tombola
	clear_delayed_event = { id = plscometobr.51 } #Enter Brasil, Choose Path
	clear_delayed_event = { id = plscometobr.14 } #Follow up from option A
	clear_delayed_event = { id = plscometobr.12 } #Follow up from accepting the invitation
	clear_delayed_event = { id = plscometobr.52 } #Within Brasil Tombola
	clear_delayed_event = { id = plscometobr.58 } #audience w/ the Emperor
	clr_character_flag = went_on_kow_tow_pilgrimage
	clean_up_after_kow_tow_effect = yes
}

clean_up_after_kow_tow_effect = {
	remove_trait = kow_tow_travels
	clr_character_flag = do_not_disturb
	
	clr_character_flag = overseas_leg
	clr_character_flag = boa_vista_leg
	clr_character_flag = brazil_heavy_rain
	clr_character_flag = thought_of_parents
	clr_character_flag = pneumonia_risk
	clr_character_flag = met_traveling_merchant
	clr_character_flag = kow_tow_invited_by_local_lord
	clr_character_flag = possible_friendship
	clr_character_flag = possible_murder
	clr_character_flag = successful_murder
	clr_character_flag = successful_murder_but_caught
	clr_character_flag = amazon_leg
	clr_character_flag = met_mercenaries
	clr_character_flag = met_natives
	clr_character_flag = cajun_female_lover
	clr_character_flag = cajun_male_lover
	clr_character_flag = met_kurtz
	clr_character_flag = kurtz_escape_uninjured
	clr_character_flag = kurtz_escape_injured
	clr_character_flag = kurtz_captured
	clr_character_flag = kurtz_escape_bodyguard_death
	clr_character_flag = kurtz_caught_escaping
	clr_character_flag = kurtz_caught_escaping_injured
	clr_character_flag = kurtz_caught_escaping_severely_injured
	clr_character_flag = kurtz_killed
	clr_character_flag = missed_loved_one
	clr_character_flag = met_pirates
	clr_character_flag = shark_attack
	clr_character_flag = storm_encountered
	clr_character_flag = shipwreck_survivor
	clr_character_flag = brazil_leg
	clr_character_flag = brasil_visited_temple
	clr_character_flag = brasil_played_futebol
	clr_character_flag = read_bonifacio
	clr_character_flag = visited_market
	clr_character_flag = kow_tow_bad_outcome
	clr_character_flag = kow_tow_okay_outcome
	clr_character_flag = kow_tow_great_outcome
	clr_character_flag = kow_tow_abort_isolationist
}

add_brazilian_artifact_effect = { #Used in event JD.15016 (possible to use elsewhere!)
	hidden_effect = {
		random_list = {
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = oriental_rug } } }
				add_artifact = oriental_rug
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = chinese_calligraphy } } }
				add_artifact = chinese_calligraphy
				new_artifact = {
					set_name = chinese_calligraphy_name
				}
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = carranca } } }
				add_artifact = carranca
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = chinese_ceremonial_robes } } }
				add_artifact = paubrasilia_dyed_robes
			}
			10 = {
				offmap_china = {
					offmap_prev_ruler = {
						save_event_target_as = prev_emperor
					}
				}
				add_artifact = brazilian_prev_emperor_sculpture
				new_artifact = {
					set_name = chinese_figurine_name
				}
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = berimbau } } }
				add_artifact = berimbau
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = dragoon_lance } } }
				add_artifact = dragoon_lance
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = jungle_knife } } }
				add_artifact = jungle_knife
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_firearm } } }
				add_artifact = brazilian_firearm
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = paubrasilia_sculpture } } }
				add_artifact = paubrasilia_sculpture
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = guerilla_warfare } } }
				add_artifact = guerilla_warfare
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = the_guarani } } }
				add_artifact = the_guarani
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_book_health } } }
				add_artifact = brazilian_book_health
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_book_history } } }
				add_artifact = brazilian_book_history
			}
			1 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_painting_of_glitterhoof } } }
				add_artifact = brazilian_painting_of_glitterhoof
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_tapestry } } }
				random_independent_ruler = {
					limit = {
						any_realm_province = {
							trade_route = coffee_current
						}
					}
					random_realm_province = {
						limit = {
							trade_route = coffee_current
						}
						save_event_target_as = tapestry_target
					}
				}
				add_artifact = brazilian_tapestry
				new_artifact = {
					set_name = chinese_tapestry_name
				}
			}
			10 = {
				trigger = { ROOT = { NOT = { has_artifact = brazilian_tapestry_grand } } }
				add_artifact = brazilian_tapestry_grand
				new_artifact = {
					set_name = chinese_tapestry_grand_name
				}
				trigger = { ROOT = { NOT = { has_artifact = brazilian_tapestry_grand } } }
			}
		}
		new_artifact = {
			save_event_target_as = brazilian_artifact
		}
	}
}

#MORE VANILLA OVERRIDES##
add_kinslayer_trait_effect = {
	if = { #Parents, children, direct ancestors or descendants 
		limit = {
			NOT = { trait = kinslayer }
			#NOT = { religion_group = muslim }
			OR = {
				is_ancestor_of = event_target:kinslayer_target
				is_descendant_of = event_target:kinslayer_target
				sibling = event_target:kinslayer_target
			}
			OR = {
				NOT = { has_dlc = "Holy Fury" }
				is_tribal = no
			}
		}
		add_trait = kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
		}
	}
	else_if = { #Cousins, aunts/uncles (blood ones only), nieces/nephews
		limit = {
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
			}
			#NOT = { religion_group = muslim }
			OR = {
				is_cousin_of = event_target:kinslayer_target
				is_aunt_uncle_of = event_target:kinslayer_target
				is_nibling_of = event_target:kinslayer_target
			}
			OR = {
				NOT = { has_dlc = "Holy Fury" }
				is_tribal = no
			}
		}
		add_trait = familial_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
		}
	}
	else_if = { #Dynasty members
		limit = { 
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
				trait = dynastic_kinslayer
			}
			#NOT = { religion_group = muslim }
			is_lowborn = no
			dynasty = event_target:kinslayer_target
			OR = {
				NOT = { has_dlc = "Holy Fury" }
				is_tribal = no
			}
		}
		add_trait = dynastic_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
		}
	}
	else_if = { #Holy Fury Tribal only: any relative
		limit = { 
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
				trait = dynastic_kinslayer
				trait = tribal_kinslayer
			}
			#NOT = { religion_group = muslim }
			is_lowborn = no

			OR = {
				is_cousin_of = event_target:kinslayer_target
				is_aunt_uncle_of = event_target:kinslayer_target
				is_nibling_of = event_target:kinslayer_target
				dynasty = event_target:kinslayer_target
				is_ancestor_of = event_target:kinslayer_target
				is_descendant_of = event_target:kinslayer_target
				sibling = event_target:kinslayer_target
			}

			has_dlc = "Holy Fury"
			is_tribal = yes
		}
		add_trait = tribal_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
		}
	}
	else = {
	}
	clear_event_target = kinslayer_target
}

##WARRIOR LODGES##
join_prev_warrior_lodge_society_effect = {
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_norse } }
		join_society = warrior_lodge_norse
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_ghost_dance } }
		join_society = warrior_lodge_ghost_dance
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_atomicist } }
		join_society = warrior_lodge_atomicist
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_occultist } }
		join_society = warrior_lodge_occultist
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_raven_tales } }
		join_society = warrior_lodge_raven_tales
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_celtic } }
		join_society = warrior_lodge_celtic
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_revelationist } }
		join_society = warrior_lodge_revelationist
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_rust_cultist } }
		join_society = warrior_lodge_rust_cultist
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_americanist } }
		join_society = warrior_lodge_americanist
	}
}
give_this_warrior_lodge_religion_effect = { #Mostly for spawned characters.
	if = {
		limit = { 
			society_member_of = warrior_lodge_norse 
			NOT = { has_global_flag = norse_reformation }
		}
		religion = norse_pagan
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_norse 
			has_global_flag = norse_reformation
		}
		religion = norse_pagan_reformed
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_ghost_dance
		}
		religion = ghost_dance
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_atomicist
		}
		religion = atomicist
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_occultist
			has_global_flag = occultist_reformation
		}
		religion = occultist_reformed
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_occultist
			NOT = { has_global_flag = occultist_reformation }
		}
		religion = occultist
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_raven_tales
		}
		religion = raven_tales
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_celtic
			NOT = { has_global_flag = celtic_pagan_reformation }
		}
		religion = celtic_pagan
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_celtic
			has_global_flag = celtic_pagan_reformation
		}
		religion = celtic_pagan_reformed
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_revelationist
			NOT = { has_global_flag = revelationist_reformation }
		}
		religion = revelationist
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_revelationist
			has_global_flag = revelationist_reformation
		}
		religion = revelationist_reformed
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_rust_cultist
			NOT = { has_global_flag = rust_cultist_reformation }
		}
		religion = rust_cultist
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_rust_cultist 
			has_global_flag = rust_cultist_reformation
		}
		religion = rust_cultist_reformed
	}
	if = {
		limit = { 
			society_member_of = warrior_lodge_americanist 
			#NOT = { has_global_flag = americanist_reformation }
		}
		religion = americanist
	}
}

add_warrior_lodge_leader_trait_effect = { #NOTE: These traits don't exist right now
	trigger_switch = {
		on_trigger = society_member_of
		warrior_lodge_norse = {
			add_trait = norse_leader
		}
		warrior_lodge_ghost_dance = {
			add_trait = ghost_dance_leader
		}
		warrior_lodge_atomicist = {
			add_trait = atomicist_leader
		}
		warrior_lodge_occultist = {
			add_trait = occultist_leader
		}
		warrior_lodge_raven_tales = {
			add_trait = raven_tales_leader
		}
		warrior_lodge_celtic = {
			add_trait = celtic_leader
		}
		warrior_lodge_revelationist = {
			add_trait = revelationist_leader
		}
		warrior_lodge_rust_cultist = {
			add_trait = rust_cultist_leader
		}
		warrior_lodge_americanist = {
			add_trait = americanist_leader
		}
	}
}

##CORONATION##
random_coronation_events_effect = {
	random_list = {
			#King befriends foreign ruler
			#King befriends vassal
			#King's new acquaintances improve his diplomacy/stewardship
			#King's new acquaintances improve his intrigue/learning
			#King's diplomacy helps him improve opinion of all guests
			#King's new resolve makes him lose slothful/content.
			#Proud King's trepidation makes him gain ambitious.
			#Child King's flattered and can become haughty or conscientious.
			#The coronation_priest approves of the ceremony.
			#Temperate/Celibate coronation_priest disapproves of the extravagant ceremony.
			#HRE/Francia Emperor gets a talk from the priest about being the heir of Charlemagne (chance for prestige, learning, diligent)
			#The Pope talks to the King about his duties as protector of Christendom (chance to gain zealous, cynical, learning).
			#Child king is taught by foreign ruler about stewardship.
			#Two foreign Kings (guests) become (or are) rivals, coronation_ruler with high diplomacy can help them lose rivalry and become his friends.
			#Cynical vassal (or wicked priest) annoys the coronation_priest. High diplomacy ruler may help and gain gregarious.
			#A knight comes to pledge his service to the new King/Emperor, if ruler is female/child, chance to become friend/lover or increase martial.
			#A wise priest joins the court.
			#King becomes rival of one of his vassals.

			#King is embarassed of secluded coronation, chance to gain stressed or paranoid.
			#King's vassals are offended by secluded coronation (chance to avoid with high diplomacy).
			#Coronation_priest is disappointed by secluded ceremony.
			#King is disraught by secluded ceremony (chance to lose ambitious, gain content/slothful).
			#King reflects upon secluded coronation (chance to lose proud, gain humble).
			#King's Councillor becomes his rival due to secluded coronation.

		1 = { #No events
			modifier = { 
				factor = 0.1 
				has_character_flag = flag_extravagant_coronation
			}
			event_target:coronation_ruler = { character_event = { id = HF.20366 days = 15 } } #Directly fire coronation
		}
		4 = {
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_foreign_friendship 
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0 
				num_of_friends = 3
			}
			modifier = { 
				factor = 2 
				NOT = { num_of_friends = 1 }
			}
			modifier = { 
				factor = 1.5
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = {
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						NOT = { is_friend = ROOT } 
						NOT = { is_lover = ROOT } 
						NOT = { is_married = ROOT }
						NOT = { num_of_friends = 3 }
						opinion = { who = from value = -20 }
					}
				}
			}
			character_event = { id = HF.20306 } # Frendship with foreign ruler guest.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_vassal_friendship  
			}
			modifier = { 
				factor = 0 
				num_of_friends = 3
			}
			modifier = { 
				factor = 2 
				NOT = { num_of_friends = 1 }
			}
			modifier = { 
				factor = 1.5
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 0.1
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = {
					any_vassal = { 
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						NOT = { is_friend = ROOT } 
						NOT = { is_lover = ROOT } 
						NOT = { is_married = ROOT }
						NOT = { num_of_friends = 3 }
						opinion = { who = from value = -20 }
					}
				}
			}

			character_event = { id = HF.20310 } # Frendship with vassal guest.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_diplomacy_boost  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}

			character_event = { id = HF.20311 } # Increase diplomacy/stewardship.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_learning_boost  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = shy
			}

			character_event = { id = HF.20314 } # Increase intrigue/learning.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_guest_opinions  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 0.75
				NOT = { diplomacy = 10 }
			}

			character_event = { id = HF.20316 } # Improve guests opinion.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_gain_diligent  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2
				trait = content
				trait = slothful
			}
			modifier = { 
				factor = 0 
				NOR = { 
					trait = content 
					trait = slothful
				}
			}

			character_event = { id = HF.20321 } # Gain diligent.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_gain_ambitious  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				trait = ambitious
			}
			modifier = { 
				factor = 0 
				NOT = { trait = proud }
			}
			character_event = { id = HF.20322 } # Gain ambitious.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_haughty_child  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				age = 16
			}
			modifier = { 
				factor = 1.5 
				NOR = { 
					trait = haughty 
					trait = conscientious
				}
			}

			character_event = { id = HF.20323 } # Child becomes haughty.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_priest_approves  
			}
			modifier = { 
				factor = 0 #Can't approve and disapprove within the course of the same ceremony.
				has_character_flag = flag_coronation_priest_disapproves  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.75 
				event_target:coronation_priest = { trait = hedonist }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = gluttonous }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = drunkard }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = gregarious }
			}
			character_event = { id = HF.20324 } # Priest approves of ceremony.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_hre_talk  
			}
			modifier = { 
				factor = 0 
				has_character_flag = is_charlemagne	#Shouldn't happen anyway, but, just to be safe... 
			}
			modifier = { 
				factor = 0.5
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { has_landed_title = e_dixie }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = zealous }
			}
			character_event = { id = HF.20326 } # Priest talks about responsibilities of HRE.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_pope_talk  
			}
			modifier = { 
				factor = 0.5
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { event_target:coronation_priest = { has_landed_title = k_papal_state } }
			}
			character_event = { id = HF.20327 } # Pope talks about responsibilities of Christian King.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_foreign_teacher  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				age = 16
			}
			modifier = { 
				factor = 0 
				NOT = {
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						stewardship = 8
						opinion = { who = ROOT value = 0 }
					}
				}
			}

			random_independent_ruler = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT 
						modifier = opinion_coronation_guest 
					}
					NOT = { is_rival = ROOT } 
					stewardship = 8
					opinion = { who = ROOT value = 0 }
				}
				character_event = { id = HF.20328 } # Foreign ruler teaches child statemanship.
			}
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_priest_disapproves  
			}
			modifier = { 
				factor = 0 #Can't approve and disapprove within the course of the same ceremony.
				has_character_flag = flag_coronation_priest_approves  
			}
			modifier = { 
				factor = 0 # This event is for disapproving of excess.
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0.25 
				NOR = { 
					trait = hedonist 
					trait = drunkard
					trait = gluttonous
				}
			}
			modifier = { 
				factor = 1.5 
				trait = hedonist
			}
			modifier = { 
				factor = 1.5 
				trait = gluttonous
			}
			modifier = { 
				factor = 1.5 
				trait = drunkard
			}
			modifier = { 
				factor = 0.1 
				event_target:coronation_priest = { trait = hedonist }
			}
			modifier = { 
				factor = 0.5 
				event_target:coronation_priest = { trait = gluttonous }
			}
			modifier = { 
				factor = 0.5 
				event_target:coronation_priest = { trait = drunkard }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = temperate }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = celibate }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { lower_tier_than = KING }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { religion = mormon }
			}
			character_event = { id = HF.20332 } # Priests disapproves of ceremony.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_diplomatic_incident  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0.9
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						OR = { 
							any_rival = { 
								independent = yes
								has_opinion_modifier = { 
									who = event_target:coronation_ruler 
									modifier = opinion_coronation_guest 
								}
							}
							any_independent_ruler = { 
								has_opinion_modifier = { 
									who = event_target:coronation_ruler
									modifier = opinion_coronation_guest 
								}
								NOT = {
									reverse_opinion = { 
										who = PREV
										value = -30 
									}
								}
							}
						}
					}
				}
			}


			random_independent_ruler = { #Check for two potential rivals amongst the foreign guests at the coronation ceremony
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					OR = { 
						any_rival = { 
							independent = yes
							has_opinion_modifier = { 
								who =  event_target:coronation_ruler 
								modifier = opinion_coronation_guest 
							}
						}
						any_independent_ruler = { 
							has_opinion_modifier = { 
								who = event_target:coronation_ruler
								modifier = opinion_coronation_guest 
							}
							NOT = {
								reverse_opinion = { 
									who = PREV
									value = -30 
								}
							}
						}
					}
				}
				character_event = { id = HF.20334 } # Foreign ruler guests are rivals.
			}
		}
		2 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_cynic_taunts  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0.75 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
							trait = bad_priest_mormon
						}
					}
				}
			}
			modifier = { 
				factor = 0.5
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
							trait = bad_priest_mormon
						}
					}
					lower_tier_than = DUKE
				}
			}

			random_independent_ruler = { 
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					NOT = { event_target:coronation_ruler = { character = PREV } }
					OR = { 
						trait = cynical
						trait = bad_priest_christian
						trait = bad_priest_mormon
					}
				}
				preferred_limit = { 
					higher_tier_than = DUKE 
					OR = { 
						trait = possessed
						trait = lunatic
					}
				}
				preferred_limit = { higher_tier_than = DUKE }
				character_event = { id = HF.20342 } # Cynic/wicked vassal guest offends the coronation_priest.
			}
		}
		2 = { #One version for vassal guests, one for foreign guests.

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_cynic_taunts  
			}
			modifier = { 
				factor = 0.75 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { 
					any_vassal = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
							trait = bad_priest_mormon
						}
					}
				}
			}
			random_vassal = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					OR = { 
						trait = cynical
						trait = bad_priest_christian
						trait = bad_priest_mormon
					}
				}
				character_event = { id = HF.20342 } # Cynic/wicked foreign guest offends the coronation_priest.
			}
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_wandering_knight   
			}
			modifier = { 
				factor = 0.25 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.25 
				is_female = yes
			}
			modifier = { 
				factor = 1.25 
				NOT = { age = 16 }
			}
			modifier = { 
				factor = 1.5 
				tier = EMPEROR
			}
			character_event = { id = HF.20346 } # Wandering knight reaches court.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_wandering_priest 
			}
			modifier = { 
				factor = 0.5 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5 
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5 
				piety = 300
			}
			character_event = { id = HF.20351 } # Wandering priest reaches court.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_random_rivalry  
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				NOT = {
					any_vassal = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						OR = { 
							trait = envious
							is_rival = ROOT
							opinion = { 
								who = ROOT
								value = -30 
							}
						}
					}
				}
			}

			random_vassal = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					OR = { 
						trait = envious
						is_rival = ROOT
						opinion = { 
							who = ROOT
							value = -30 
						}
					}
				}
				character_event = { id = HF.20352 } # Envious/Hateful vassal shows rivalry.
			}
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_embarassed  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0 
				trait = stressed
				trait = paranoid
			}

			character_event = { id = HF.20355 } # Secluded coronation: ruler embarassed.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_vassals  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}

			character_event = { id = HF.20356 } # Secluded coronation: uninvited vassals are upset.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_priest  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}

			character_event = { id = HF.20358 } # Secluded coronation: priest is upset of poor ceremony.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_ambitious  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0.25
				NOT = { trait = ambitious }
			}

			character_event = { id = HF.20360 } # Secluded coronation: ruler loses ambition.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_proud  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0.25
				NOT = { trait = proud }
			}
			modifier = { 
				factor = 0
				trait = humble
			}

			character_event = { id = HF.20361 } # Secluded coronation: ruler humbled.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_steward  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0 
				NOT = { 
					any_courtier = {
						has_job_title = job_treasurer
					}
				}
			}
			modifier = { 
				factor = 0 
				any_courtier = {
					has_job_title = job_treasurer
					is_rival = ROOT
				}
			}

			character_event = { id = HF.20362 } # Secluded coronation: ruler hates steward for poor ceremony.
		}

	} 

}

##Troubled Pregnancy##
troubled_pregnancy_chance_low_effect = { 
random_list = { 
	70 = { custom_tooltip = { text = tooltip_pregnancy_stable } }
	30 = { custom_tooltip = { text = tooltip_pregnancy_gets_worse }
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 0.95
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		modifier = { 
			factor = 1.5
			NOT = { age = 19 } #Too young
		} 
		modifier = { 
			factor = 1.25
			age = 27 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 30 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 35 #Too old
		} 
		modifier = { 
			factor = 1.5
			age = 40 #Too old
		} 	
		modifier = { 	
			factor = 1.5
			age = 45 #Too old
		} 
		modifier = { 
			factor = 1.75
			age = 50 #Too old
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 2
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 3 #Womb is worn out
		} 
		modifier = { 
			factor = 1.5
			num_of_children = 4 #Womb is worn out
		} 
		modifier = { 
			factor = 2
			num_of_children = 5 #Womb is worn out
		} 
		modifier = { 
			factor = 4
			has_character_flag = survivor_mom		#Should have stopped after last time.
		} 
		modifier = { 
			factor = 1.25
			NOR = {  
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		} 
		modifier = { 
			factor = 0.95
			trait = misguided_warrior
		} 
		modifier = { 
			factor = 0.85
			trait = tough_soldier
		} 
		modifier = { 
			factor = 0.75
			trait = skilled_tactician
		} 
		modifier = { 
			factor = 0.65
			trait = brilliant_strategist
		} 
		modifier = { 
			factor = 1.5
			trait = stressed
		} 
		modifier = { 
			factor = 1.75
			trait = depressed
		} 
		modifier = { 
			factor = 1.5
			trait = lunatic
		} 
		modifier = { 
			factor = 1.5
			trait = possessed
		} 
		modifier = { 
			factor = 1.35
			trait = wounded
		} 
		modifier = { 
			factor = 1.75
			trait = maimed
		} 
		modifier = { 
			factor = 1.5
			trait = infirm
		} 
		modifier = { 
			factor = 5
			trait = incapable #Probably going to die.
		} 
		modifier = { 
			factor = 1.25
			trait = drunkard
		} 
		modifier = { 
			factor = 1.15
			trait = scarred
		} 
		modifier = { 
			factor = 1.5
			trait = ill
		} 
		modifier = { 
			factor = 1.65
			trait = pneumonic
		} 
		modifier = { 
			factor = 1.5
			trait = syphilitic
		} 
		modifier = { 
			factor = 3
			trait = leper
		} 
		modifier = { 
			factor = 1.85
			trait = has_tuberculosis
		} 
		modifier = { 
			factor = 1.65
			trait = has_typhoid_fever
		} 
		modifier = { 
			factor = 1.5
			trait = has_typhus
		} 
		modifier = { 
			factor = 5
			trait = has_bubonic_plague
		} 
		modifier = { 
			factor = 1.75
			trait = has_measles
		} 
		modifier = { 
			factor = 1.45
			trait = has_small_pox
		} 
		modifier = { 
			factor = 1.65
			trait = has_aztec_disease
		} 
		modifier = { 
			factor = 1.25
			trait = flu
		} 
		modifier = { 
			factor = 1.75
			trait = dysentery
		} 
		modifier = { 
			factor = 1.35
			trait = gout
		} 
		modifier = { 
			factor = 1.75
			trait = food_poisoning
		} 
		modifier = { 
			factor = 1.5
			trait = rabies
		} 
		modifier = { 
			factor = 3
			trait = cancer
		} 
		modifier = { 
			factor = 4
			trait = dancing_plague
		} 
		modifier = { 
			factor = 1.25
			trait = scurvy
		} 
		modifier = { 
			factor = 2
			trait = mangled
		} 
		modifier = { 
			factor = 3
			trait = severely_injured
		} 
		modifier = { 
			factor = 0.75
			trait = strong
		} 
		modifier = { 
			factor = 1.45
			trait = hunchback
		} 
		modifier = { 
			factor = 1.5
			trait = dwarf
		} 
		modifier = { 
			factor = 5
			trait = inbred
		} 
		modifier = { 
			factor = 1.5
			trait = weak
		} 
		modifier = { 
			factor = 0.5
			trait = robust
		} 
		modifier = { 
			factor = 2
			trait = feeble
		} 
		modifier = { 
			factor = 1.35
			trait = hedonist
		} 
		modifier = { 
			factor = 0.85
			trait = mystic
		} 	
		modifier = { 	
			factor = 0.85	
			trait = gardener
		} 
		modifier = { 
			factor = 0.85
			trait = duelist
		} 
		modifier = { 
			factor = 0.75
			trait = hunter
		} 
		modifier = { 
			factor = 0.75
			trait = falconer
		} 
		modifier = { 
			factor = 1.35
			trait = gluttonous
		} 
		modifier = { 
			factor = 1.45
			trait = wroth
		} 
		modifier = { 
			factor = 1.45
			trait = slothful
		} 
		modifier = { 
			factor = 0.85
			trait = temperate
		} 
		modifier = { 
			factor = 1.5
			trait = blinded
		} 
		modifier = { 
			factor = 1.5
			trait = berserker
		} 
		modifier = { 
			factor = 1.25
			trait = lovers_pox
		}
		modifier = { 
			factor = 1.25
			trait = atom_bless
		} 
		modifier = { 
			factor = 3
			trait = atom_curse
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 1 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 2 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 3 }
		} 
		modifier = { 
			factor = 0.75
			health = 5
		} 
		character_event = { id = HFP.20500  days = 35 random = 75 } #Critical failure: troubled pregnancy begins.
		}
	}
}

troubled_pregnancy_chance_medium_effect = { 
random_list = { 
	50 = { custom_tooltip = { text = tooltip_pregnancy_stable } }
	50 = { custom_tooltip = { text = tooltip_pregnancy_gets_worse }
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 0.95
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		modifier = { 
			factor = 1.5
			NOT = { age = 19 } #Too young
		} 
		modifier = { 
			factor = 1.25
			age = 27 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 30 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 35 #Too old
		} 
		modifier = { 
			factor = 1.5
			age = 40 #Too old
		} 	
		modifier = { 	
			factor = 1.5
			age = 45 #Too old
		} 
		modifier = { 
			factor = 1.75
			age = 50 #Too old
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 2
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 3 #Womb is worn out
		} 
		modifier = { 
			factor = 1.5
			num_of_children = 4 #Womb is worn out
		} 
		modifier = { 
			factor = 2
			num_of_children = 5 #Womb is worn out
		} 
		modifier = { 
			factor = 4
			has_character_flag = survivor_mom		#Should have stopped after last time.
		} 
		modifier = { 
			factor = 1.25
			NOR = {  
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		} 
		modifier = { 
			factor = 0.95
			trait = misguided_warrior
		} 
		modifier = { 
			factor = 0.85
			trait = tough_soldier
		} 
		modifier = { 
			factor = 0.75
			trait = skilled_tactician
		} 
		modifier = { 
			factor = 0.65
			trait = brilliant_strategist
		} 
		modifier = { 
			factor = 1.5
			trait = stressed
		} 
		modifier = { 
			factor = 1.75
			trait = depressed
		} 
		modifier = { 
			factor = 1.5
			trait = lunatic
		} 
		modifier = { 
			factor = 1.5
			trait = possessed
		} 
		modifier = { 
			factor = 1.35
			trait = wounded
		} 
		modifier = { 
			factor = 1.75
			trait = maimed
		} 
		modifier = { 
			factor = 1.5
			trait = infirm
		} 
		modifier = { 
			factor = 5
			trait = incapable #Probably going to die.
		} 
		modifier = { 
			factor = 1.25
			trait = drunkard
		} 
		modifier = { 
			factor = 1.15
			trait = scarred
		} 
		modifier = { 
			factor = 1.5
			trait = ill
		} 
		modifier = { 
			factor = 1.65
			trait = pneumonic
		} 
		modifier = { 
			factor = 1.5
			trait = syphilitic
		} 
		modifier = { 
			factor = 3
			trait = leper
		} 
		modifier = { 
			factor = 1.85
			trait = has_tuberculosis
		} 
		modifier = { 
			factor = 1.65
			trait = has_typhoid_fever
		} 
		modifier = { 
			factor = 1.5
			trait = has_typhus
		} 
		modifier = { 
			factor = 5
			trait = has_bubonic_plague
		} 
		modifier = { 
			factor = 1.75
			trait = has_measles
		} 
		modifier = { 
			factor = 1.45
			trait = has_small_pox
		} 
		modifier = { 
			factor = 1.65
			trait = has_aztec_disease
		} 
		modifier = { 
			factor = 1.25
			trait = flu
		} 
		modifier = { 
			factor = 1.75
			trait = dysentery
		} 
		modifier = { 
			factor = 1.35
			trait = gout
		} 
		modifier = { 
			factor = 1.75
			trait = food_poisoning
		} 
		modifier = { 
			factor = 1.5
			trait = rabies
		} 
		modifier = { 
			factor = 3
			trait = cancer
		} 
		modifier = { 
			factor = 4
			trait = dancing_plague
		} 
		modifier = { 
			factor = 1.25
			trait = scurvy
		} 
		modifier = { 
			factor = 2
			trait = mangled
		} 
		modifier = { 
			factor = 3
			trait = severely_injured
		} 
		modifier = { 
			factor = 0.75
			trait = strong
		} 
		modifier = { 
			factor = 1.45
			trait = hunchback
		} 
		modifier = { 
			factor = 1.5
			trait = dwarf
		} 
		modifier = { 
			factor = 5
			trait = inbred
		} 
		modifier = { 
			factor = 1.5
			trait = weak
		} 
		modifier = { 
			factor = 0.5
			trait = robust
		} 
		modifier = { 
			factor = 2
			trait = feeble
		} 
		modifier = { 
			factor = 1.35
			trait = hedonist
		} 
		modifier = { 
			factor = 0.85
			trait = mystic
		} 	
		modifier = { 	
			factor = 0.85	
			trait = gardener
		} 
		modifier = { 
			factor = 0.85
			trait = duelist
		} 
		modifier = { 
			factor = 0.75
			trait = hunter
		} 
		modifier = { 
			factor = 0.75
			trait = falconer
		} 
		modifier = { 
			factor = 1.35
			trait = gluttonous
		} 
		modifier = { 
			factor = 1.45
			trait = wroth
		} 
		modifier = { 
			factor = 1.45
			trait = slothful
		} 
		modifier = { 
			factor = 0.85
			trait = temperate
		} 
		modifier = { 
			factor = 1.5
			trait = blinded
		} 
		modifier = { 
			factor = 1.5
			trait = berserker
		} 
		modifier = { 
			factor = 1.25
			trait = lovers_pox
		}
		modifier = { 
			factor = 1.25
			trait = atom_bless
		}
		modifier = { 
			factor = 3
			trait = atom_curse
		}
		modifier = { 
			factor = 1.5
			NOT = { health = 1 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 2 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 3 }
		} 
		modifier = { 
			factor = 0.75
			health = 5
		} 
		character_event = { id = HFP.20500  days = 35 random = 75 } #Critical failure: troubled pregnancy begins.
		}
	}
}

##Weight Gain/Loss events##
weight_flavor_conditions_effect = {

	if = { #If already about to become fat and fulfilling one of the special conditions, fire the specific event to give more flavor.
		limit = { 
			check_variable = { which = physique_variable value = 12 }
			NOT = { trait = is_fat }
			NOT = { has_character_flag = flag_primed_physique }
			#NOT = { trait = temperate }
			NOT = { trait = incapable }
			age = 20
			prisoner = no
			is_inaccessible_trigger = no
			NOT = { #Can happen only once
				has_fat_for_flag_trigger = yes
			}
			OR = { 				#Possible reasons
				trait = gluttonous
				trait = stressed 
				trait = depressed
				trait = slothful
				trait = hedonist
				trait = wroth
				trait = drunkard
				has_focus = focus_carousing 
				AND = { #Happy mom
					OR = { 
						trait = kind
						trait = content
						has_focus = focus_family 
						trait = patient
					}
					NOR = { 
						trait = cruel 
						trait = envious
					}
					is_female = yes
					any_child = { 
						is_alive = yes 
						is_adult = no
					}
				}
				AND = { #Content husband
					OR = { 
						trait = kind
						trait = content
						has_focus = focus_family 
						trait = patient
					}
					NOR = { 
						trait = cruel 
						trait = envious
					}
					is_female = no
					is_married = yes
					OR = { 
						num_of_consorts = 2
						num_of_children = 2
						num_of_spouses = 2
					}
				}
				AND = { #Frustrated lustful survivor mom
					has_character_flag = survivor_mom
					trait = celibate
					trait = lustful
				}
				AND = { #Frustrated eunuch
					trait = eunuch
					trait = lustful
				}
				AND = { #Generic fallback
					NOT = { trait = temperate }
					check_variable = { which = physique_variable value = 15 }
				}
			}
		}
		if = { 
			limit = { NOT = { check_variable = { which = physique_variable value = 15 } } }
			gain_weight_small_effect = yes
		}
		set_character_flag = flag_primed_physique
		character_event = { id = HFP.20605 days = 10 }
	}
	if = { #If already about to become malnourished and fulfilling one of the special conditions, fire the specific event to give more flavor.
		limit = { 
			NOT = { check_variable = { which = physique_variable value = -12 } }
			NOT = { trait = is_malnourished }
			#NOT = { trait = gluttonous }
			NOT = { trait = incapable }
			NOT = { has_character_flag = flag_primed_physique }
			age = 20
			prisoner = no
			is_inaccessible_trigger = no
			NOT = { #Can happen only once
				has_malnourished_for_flag_trigger = yes
			}
			OR = { 				#Possible reasons
				trait = temperate
				trait = stressed
				trait = depressed
				trait = slothful
				trait = scholar
				trait = cannibal_trait
				trait = craven
				has_focus = focus_scholarship
				AND = { 
					NOT = { trait = cynical }
					trait = theologian
					OR = { 
						religion_group = christian
						religion_group = cult_of_saints
						religion_group = latter_day_saints
						religion_group = jewish_group
						religion_group = indian_group
					}
				}
				AND = { 
					NOT = { trait = cynical }
					has_focus = focus_theology
					OR = { 
						religion_group = christian
						religion_group = cult_of_saints
						religion_group = latter_day_saints
						religion_group = jewish_group
						religion_group = indian_group
					}
				}
				trait = paranoid
				trait = diligent
				AND = { #Generic fallback
					NOT = { trait = gluttonous }
					NOT = { check_variable = { which = physique_variable value = -15 } }
				}
			}
		}
		if = { 
			limit = { check_variable = { which = physique_variable value = -15 } }
			lose_weight_small_effect = yes
		}
		set_character_flag = flag_primed_physique
		character_event = { id = HFP.20628 days = 10 }
	}	
}

##Pagan religious stuff##

fire_haruspicy_event_effect = { #Used for Mesoamerican Religions
	hidden_tooltip = { #Divination.
		if = {
			limit = { 
				attacker = { 
					OR = { 
						religion_group = mesoamerican_gods
						has_religion_feature = religion_haruspicy 
						has_religion_feature = religion_feature_occultist
					} 
				} 
			}
			attacker = {  
				character_event = { id = HF.23005 }
			}
		}
		if = {
			limit = { 
				defender = { 
					OR = { 
						religion_group = mesoamerican_gods
						has_religion_feature = religion_haruspicy 
						has_religion_feature = religion_feature_occultist
					} 
				} 
			}
			defender = {  
				character_event = { id = HF.23005 }
			}
		}
	}
}

apply_dogmatic_on_start_effect = {
	religion_authority = {
		modifier = dogmatic_religion
		years = 1000
	}
	remove_intermarry = afro_syncretic
	remove_intermarry = american_native
	remove_intermarry = christian
	remove_intermarry = cult_of_saints
	remove_intermarry = pacific
	remove_intermarry = latter_day_saints
	remove_intermarry = mesoamerican_gods
	remove_intermarry = oldworld
	remove_intermarry = pirate
	remove_intermarry = indian_group
	remove_intermarry = jewish_group
}

add_random_tattoo_effect = { #Tied to religion, used only for special events.
	if = { 
		limit = { 
			OR = { 
				religion = norse_pagan
				religion = norse_pagan_reformed
			}
			NOR = { 
				trait = african_tattoo_1
				trait = african_tattoo_2
				trait = african_tattoo_3
				trait = african_tattoo_4
				trait = african_tattoo_5
				trait = african_tattoo_6
				trait = african_tattoo_7
				trait = african_tattoo_8
				trait = african_tattoo_9
				trait = african_tattoo_10
				trait = african_tattoo_11
				trait = african_tattoo_12
				trait = slavic_tattoo_1
				trait = slavic_tattoo_2
				trait = slavic_tattoo_3
				trait = slavic_tattoo_4
				trait = slavic_tattoo_5
				trait = slavic_tattoo_6
				trait = norse_tattoo_1
				trait = norse_tattoo_2
				trait = norse_tattoo_3
				trait = norse_tattoo_4
				trait = norse_tattoo_5
				trait = norse_tattoo_6
			}
		}
		random_list = { 
			50 = { add_trait = norse_tattoo_1 }
			50 = { add_trait = norse_tattoo_2 }
			40 = { add_trait = norse_tattoo_3 }
			30 = { add_trait = norse_tattoo_4 }
			20 = { add_trait = norse_tattoo_5 }
			10 = { add_trait = norse_tattoo_6 } 
		}
	}
}

##FUTURE NOTE: Put crown effect here once we've figured out how to handle that##

##WEATHER EFFECTS##
#The African weather effects added in HF will be used throughout various regions of the map in AtE, including California, Texas, Mexico, and the Caribbean.

##01_scripted_effects_duels##
apply_any_applicable_harsh_penalties_effect = {
	if = {
		limit = {
			NOT = {
				has_game_rule = {
	                name = dueling
	                value = unrestricted
	            }
			}
		}
		if = { #If BOTH a female target and a priest...!
			limit = {
				is_female = yes #She's a woman
				NOT = { is_member_of_roots_warrior_lodge_trigger = yes } #She is not a warrior
		                            
	            #FROM and ROOT do NOT have gender equality in some form
	            NAND = {
	                OR = {
	                    trait = brave #She is brave
	                    gender_equality_trigger = yes
	                    religion_group = pagan_group
	                    is_nomadic = yes
	                    religion = cetic
	                    religion = neognostic
	                }
	                event_target:combatant_1 = { #Same as "FROM" in this case
	                    OR = {
	                        gender_equality_trigger = yes
	                        religion_group = pagan_group
	                        is_nomadic = yes
	                        religion = cetic
	                        religion = neognostic
	                    }
	                }
	            }
	            is_priest = yes #They are a priest
	            NOT = { event_target:combatant_1 = { religion_group = pagan_group } } #Attacker is NOT pagan
			}
			custom_tooltip = { text = dueling_inappropriate_target_tt }
			# Instead of blocking the action completely...
			event_target:combatant_1 = {
				show_scope_change = no
				give_nickname = nick_priest_hater
				add_character_modifier = {
					modifier = uncivilized_dueler
					years = 10
				}
			}
		}
		else_if = { #If you're fighting a woman, and it'd be frowned upon within your religion/culture/laws because patriarchy
			limit = {
				is_female = yes #She's a woman
				NOT = { is_member_of_roots_warrior_lodge_trigger = yes } #She is not a warrior
		                            
	            #FROM and ROOT do NOT have gender equality in some form
	            NAND = {
	                OR = {
	                    trait = brave #She is brave
	                    gender_equality_trigger = yes
	                    religion_group = pagan_group
	                    is_nomadic = yes
	                    religion = buddhist
	                    religion = bogomilist
	                }
	                event_target:combatant_1 = { #Same as "FROM" in this case
	                    OR = {
	                        gender_equality_trigger = yes
	                        religion_group = pagan_group
	                        is_nomadic = yes
	                        religion = cetic
	                        religion = neognostic
	                    }
	                }
	            }
			}
			custom_tooltip = { text = dueling_inappropriate_target_tt }
			# Instead of blocking the action completely...
			event_target:combatant_1 = {
				show_scope_change = no
				add_character_modifier = {
					modifier = uncivilized_dueler
					years = 10
				}
			}
		}
		else = { #If they are a priest of some kind, while challenger is not pagan (as pagans don't care), fighting priests is frowned upon...
			limit = {
				is_member_of_any_warrior_lodge_trigger = no #They are not a warrior
	            is_priest = yes #They are a priest
	            NOT = { event_target:combatant_1 = { religion_group = pagan_group } } #Attacker is NOT pagan
			}
			custom_tooltip = { text = dueling_inappropriate_target_tt }
			event_target:combatant_1 = {
				show_scope_change = no
				add_character_modifier = {
					modifier = uncivilized_dueler
					years = 5
				}
				give_nickname = nick_priest_hater
			}
		}
	}
}

set_dueling_weapon_effect = {
	if = { #First check if this a serious duel with real weapons or not...
		limit = { has_character_flag = mock_duel }

		clear_event_target = dueling_weapon #so you don't fight a practice duel with the Staff of Moses
		
		clr_character_flag = weapon_is_sword #clear all old weapons (if any)
		clr_character_flag = weapon_is_scimitar
		clr_character_flag = weapon_is_axe
		clr_character_flag = weapon_is_mace
		clr_character_flag = weapon_is_spear
		clr_character_flag = weapon_is_staff
		clr_character_flag = weapon_is_hand
		
		random_list = { #select a weapon...
			10 = { set_character_flag = weapon_is_sword }
			10 = { set_character_flag = weapon_is_spear }
			10 = { set_character_flag = weapon_is_staff }
			10 = {
				trigger = { NOT = { trait = one_handed } } #probably shouldn't use both hands...
				set_character_flag = weapon_is_hand
			}
		}
	}
	else_if = { #If not, check if you have an artifact you can use...
		limit = {
			any_artifact = {
				is_dueling_weapon_artifact_and_equipped = yes
			}
		}
		random_artifact = {
			limit = { is_dueling_weapon_artifact_and_equipped = yes }
			if = {
				limit = { event_target:combatant_1 = { character = PREVPREV } }
				save_event_target_as = dueling_weapon_1 #for loc purposes, kept separate
			}
			else = { #means you're the defender/combatant_2
				save_event_target_as = dueling_weapon_2 #for loc purposes, kept separate
			}
		}
		clr_character_flag = weapon_is_sword #clear all old weapons (if any)
		clr_character_flag = weapon_is_scimitar
		clr_character_flag = weapon_is_axe
		clr_character_flag = weapon_is_mace
		clr_character_flag = weapon_is_spear
		clr_character_flag = weapon_is_staff
		clr_character_flag = weapon_is_hand
	}

	else_if = { #If no artifact, check that you haven't already used a real weapon before...
		limit = {
			NOR = {
				has_character_flag = weapon_is_sword
				has_character_flag = weapon_is_scimitar
				has_character_flag = weapon_is_axe
				has_character_flag = weapon_is_mace
				has_character_flag = weapon_is_spear
			}
		}
		clr_character_flag = weapon_is_staff #clear mock weapons (if any)
		clr_character_flag = weapon_is_hand
		
		random_list = { #select a weapon...
			10 = { set_character_flag = weapon_is_sword }
			10 = {
				set_character_flag = weapon_is_scimitar
				trigger = {
					capital_scope = {
						region = world_caribbean
					}
					
				}
			}
			10 = { set_character_flag = weapon_is_axe }
			10 = { set_character_flag = weapon_is_mace }
			10 = { set_character_flag = weapon_is_spear }
		}
	}
	else = {
		#Do nothing, use the weapon-flag you already have! :)
	}
}

evaluate_extra_duel_result_score_effect = { # [SPECIAL CIRCUMSTANCES - OPTIONAL]
	### Disclaimer: Assumes combatant_1 is ROOT. combatant_2 is referred to as its event_target-name.
	
	###############################################################
	# 1. Extra bonuses to the duel score
	# 2. Extra minuses to the duel score
	# 3. Some flags set (for loc and special options)
	###############################################################

	################################################################
	# 1. BONUSES ADDED:	adds to the score...
	################################################################
	if = {
		limit = { religion_group = pagan }
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 3
		}
	}
	if = {
		limit = { trait = wroth }
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 1
		}
	}
	if = { #If you go after your rival, small bonus...
		limit = {
			event_target:combatant_2 = { is_rival = event_target:combatant_1 }
		}
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 5
		}
	}
	if = { #If you go after someone who is romantically interested in you, small bonus (they might get distracted)...
		limit = {
			event_target:combatant_2 = {
				has_opinion_modifier = { who = event_target:combatant_1 modifier = opinion_budding_romance }
				NOT = { is_lover = event_target:combatant_1 }
			}
		}
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 6
		}
	}
	if = { #If you go after someone whom you hate, small bonus (if you are not stressed/depressed)...
		limit = {
			event_target:combatant_2 = {
				root_has_terrible_opinion_modifier_of_this_trigger = yes
			}
			NOT = { trait = stressed }
			NOT = { trait = depressed }
		}
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 12
		}
	}
	if = { #If you go after someone whom you have no feelings towards really, small bonus...
		limit = {
			NOT = { opinion = { who = event_target:combatant_2 value = 0 } }
		}
		change_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 1
		}
	}
	#... fill up with more things...

	################################################################
	# 2. MINUSES ADDED: Withdraws numbers from the score...
	################################################################
	if = {
		limit = {
			event_target:combatant_2 = { trait = wroth }
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 1
		}
	}
	if = {
		limit = { event_target:combatant_2 = { religion_group = pagan } }
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 3
		}
	}
	if = { #If you go after someone you care about, small malus...
		limit = {
			OR = {
				is_friend = event_target:combatant_2
				is_lover = event_target:combatant_2
			}
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 3
		}
	}
	if = { #If you go after someone you are romantically interested in, small malus (you might get distracted)...
		limit = {
			has_opinion_modifier = { who = event_target:combatant_2 modifier = opinion_budding_romance }
			NOT = { is_lover = event_target:combatant_2 }
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 3
		}
	}
	if = { #If you go after someone whom you hate, while you are stressed/depressed...
		limit = {
			event_target:combatant_2 = {
				root_has_terrible_opinion_modifier_of_this_trigger = yes
			}
			OR = {
				trait = stressed
				trait = depressed
			}
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 6
		}
	}
	if = { #If you are stressed AND depressed, malus...
		limit = {
			trait = stressed
			trait = depressed
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 12
		}
	}
	if = { #If you go after someone who has no feelings towards you really, small malus (ie bonus for them)...
		limit = {
			event_target:combatant_2 = {
				NOT = { opinion = { who = event_target:combatant_1 value = 5 } }
			}
		}
		subtract_variable = {
			which = duel_result_score #(50 + X) - Y
			value = 1
		}
	}
	#fill up with more things...

	################################################################
	# 2. SPECIAL FLAGS SET: Has a chance of opening up new text and 
	#	 effects in the results... (for overview, see below)

	################################################################
	# intrigue_options_available
	# is_friendly_fight
	# is_family_fight
	# is_rival_fight
	# fight_could_spark_romance
	# fight_could_spark_rivalry
	# fight_could_spark_friendship
	################################################################

	if = {
		limit = {
			OR = {
				intrigue = 15
				trait = elusive_shadow
				trait = schemer
			}
		}
		set_character_flag = intrigue_options_available #currently only for the attacker
	}
	if = {
		limit = {
			event_target:combatant_2 = { is_friend = ROOT }
		}
		set_character_flag = is_friendly_fight
		event_target:combatant_2 = { set_character_flag = is_friendly_fight }
	}
	if = {
		limit = {
			event_target:combatant_2 = { is_close_relative = ROOT }
		}
		set_character_flag = is_family_fight
		event_target:combatant_2 = { set_character_flag = is_family_fight }
	}
	if = {
		limit = {
			event_target:combatant_2 = { is_rival = ROOT }
		}
		set_character_flag = is_rival_fight
		event_target:combatant_2 = { set_character_flag = is_rival_fight }
	}
	if = { 
		limit = {
			event_target:combatant_2 = {
				NOT = { is_lover = ROOT }
				OR = {
					ROOT = { has_religion_feature = religion_holy_family }
					NOT = { is_close_relative = ROOT }
				}
				possibly_romantically_interested_in_each_other_trigger = yes
			}
		}
		set_character_flag = fight_could_spark_romance
		event_target:combatant_2 = { set_character_flag = fight_could_spark_romance }
	}
	if = {
		limit = {
			event_target:combatant_2 = {
				OR = {
					potentially_interested_in_rivaling_root_trigger = yes
					root_potentially_interested_in_rivaling_this_trigger = yes
				}
			}
		}
		set_character_flag = fight_could_spark_rivalry
		event_target:combatant_2 = { set_character_flag = fight_could_spark_rivalry }
	}
	if = {
		limit = {
			event_target:combatant_2 = {
				NOT = { is_friend = ROOT }
				opinion = { who = ROOT value = 5 }
				reverse_opinion = { who = ROOT value = 5 }
				this_has_terrible_opinion_modifier_of_root_trigger = no
				root_has_terrible_opinion_modifier_of_this_trigger = no
			}
		}
		set_character_flag = fight_could_spark_friendship
		event_target:combatant_2 = { set_character_flag = fight_could_spark_friendship }
	}
}

##02_scripted_effects_alternate_start##

##SAINTHOOD##
deciding_upon_saint_effect = {
    random = {
        chance = 1

        #Lower chance when there is more Saints around
        modifier = {
            factor = 0.8
            check_variable = { which = global_saint_number value = 15 }
        }
        modifier = {
            factor = 0.8
            check_variable = { which = global_saint_number value = 20 }
        }
        modifier = {
            factor = 0.8
            check_variable = { which = global_saint_number value = 25 }
        }
        modifier = {
            factor = 0.8 
            check_variable = { which = global_saint_number value = 30 }
        }

        #Cynical people are less likely to be Canonized
        modifier = {
            factor = 0.8
            trait = cynical
        }
        # Reduced chance for Popes / Antipopes to become Saints
        modifier = {
            factor = 0.4
            OR = {
                has_landed_title = k_papal_state
                has_landed_title = k_ursuline
                has_landed_title = d_nestorian
                has_landed_title = d_confederated
                has_landed_title = d_high_church
                any_claim = { title = k_papal_state }
                any_claim = { title = k_ursuline }
                any_claim = { title = d_nestorian }
                any_claim = { title = d_confederated }
                any_claim = { title = d_high_church }
            }
        }

        #Have to be a Christian or Mormon denomination with a potential Religious head, and have been singled out for Beatification
        modifier = {
            factor = 0
            NOR = {
                NAND = {
                    event_target:saint_person = {
                        religion = catholic
                    }
                    event_target:saint_person = {
                        religion = nestorian
                    }
                    event_target:saint_person = {
                        religion = evangelical
                    }
                    event_target:saint_person = {
                        religion = ursuline
                    }
                    event_target:saint_person = {
                        religion = confederated
                    }
                    event_target:saint_person = {
                        religion = high_church
                    }
                    event_target:saint_person = {
                        religion = mormon
                    }
                    event_target:saint_person = {
                        religion = wolleyite
                    }
                    event_target:saint_person = {
                        religion = strangite
                    }
					event_target:saint_person = {
                        religion = bickertonite
                    }
                    event_target:saint_person = {
                        has_religion_feature = religion_beatification
                    }
					event_target:saint_person = {
                        has_religion_feature = religion_feature_espiritista
                    }
                }
                NOR = {
                    event_target:saint_person = {
                        has_character_flag = beatified
                    }
                    event_target:saint_person = {
                        has_religion_feature = religion_beatification
                    }
                }
            }
        }
        #Religions without a Religious Head cannot Canonize
        modifier = {
            factor = 0 
            NOT = {
                rightful_religious_head_scope = {
                    always = yes
                }
            }
        }
        #Baptism sponsors have a higher chance of becoming a Saint
        modifier = {
            factor = 1.5
            has_any_opinion_modifier = opinion_baptism_sponsor_target
        }
        #Protestants and Mormons have a lower chance of becoming Saints
        modifier = {
            factor = 0.8
            OR = {
                event_target:saint_person = {
                    religion = evangelical
                }
                event_target:saint_person = {
                    religion = high_church
                }
                event_target:saint_person = {
                    religion = mormon
                }
                event_target:saint_person = {
                    religion = wolleyite
                }
                event_target:saint_person = {
                    religion = strangite
                }
                event_target:saint_person = {
                    religion = bickertonite
                }
                event_target:saint_person = {
                    religion = confederated
                }
            }
        }
        #Players who don't have a saintly bloodline have a higher chance of becoming a Saint
        modifier = {
            factor = 2
            event_target:saint_person  = {
                ai = no
            }
            NOT = {
                event_target:saint_person = {
                    any_owned_bloodline = {
                        OR = {
                            has_bloodline_flag = defender_of_the_faith
                            has_bloodline_flag = monastic_saintly_bloodline
                            has_bloodline_flag = cultural_saintly_bloodline
                            has_bloodline_flag = inquisitional_saintly_bloodline
                            has_bloodline_flag = jewish_saintly_bloodline
                            has_bloodline_flag = theologian_saintly_bloodline
                        }
                    }
                }     
            }
        }
        #Positive traits increase your chances of becoming a Saint
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = patient
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = diligent
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = kind
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = chaste
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = charitable
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = temperate
            }
        }
        modifier = {
            factor = 1.5
            event_target:saint_person = {
                trait = humble 
            }
        }
        modifier = {
            factor = 1.2
            event_target:saint_person = {
                trait = just
            }
        }
        modifier = {
            factor = 1.2
            event_target:saint_person = {
                has_crusade_trait_trigger = yes
            }
        }
        #Having the bloodline of a Saint severely decrease your chance of becoming a Saint
        modifier = {
            factor = 0.2
            event_target:saint_person = {
                any_owned_bloodline = {
                    OR = {
                        has_bloodline_flag = defender_of_the_faith
                        has_bloodline_flag = monastic_saintly_bloodline
                        has_bloodline_flag = cultural_saintly_bloodline
                        has_bloodline_flag = inquisitional_saintly_bloodline
                        has_bloodline_flag = jewish_saintly_bloodline
                        has_bloodline_flag = theologian_saintly_bloodline
                    }
                }
            }
        }
        #Extra high piety increases your chance of becoming a Saint
        modifier = {
            factor = 1.2
            piety = 1000
        }
        modifier = {
            factor = 1.2 
            piety = 1500
        }
        modifier = {
            factor = 1.2
            piety = 2000
        }
        modifier = {
            factor = 1.2
            piety = 2500
        }
        modifier = {
            factor = 1.2
            piety = 3000
        }
        modifier = {
            factor = 1.2
            piety = 3500
        }
        modifier = {
            factor = 1.2
            piety = 4000
        }
        modifier = {
            factor = 1.2
            piety = 4500
        }
        modifier = {
            factor = 1.2
            piety = 5000
        }
        modifier = {
            factor = 1.2
            piety = 5500
        }
        modifier = {
            factor = 1.2
            piety = 6000
        }
        modifier = {
            factor = 1.2
            piety = 6500
        }
        modifier = {
            factor = 1.2 
            piety = 7000
        }
        modifier = {
            factor = 1.2
            piety = 7500
        }
        modifier = {
            factor = 1.2
            piety = 8000
        }
        modifier = {
            factor = 1.2
            piety = 8500
        }
        modifier = {
            factor = 1.2
            piety = 9000
        }
        modifier = {
            factor = 1.2
            piety = 9500
        }
        modifier = {
            factor = 1.2
            piety = 10000
        }
        #First Saint of a Religion is easier
        modifier = {
            factor = 3
            OR = {
                AND = {
                    religion = catholic
                    NOT = {
                        has_global_flag = catholic_saint
                    }
                }
                AND = {
                    religion = nestorian
                    NOT = {
                        has_global_flag = nestorian_saint
                    }
                }
                AND = {
                    religion = evangelical
                    NOT = {
                        has_global_flag = evangelical_saint
                    }
                }
                AND = {
                    religion = ursuline
                    NOT = {
                        has_global_flag = ursuline_saint
                    }
                }
                AND = {
                    religion = confederated
                    NOT = {
                        has_global_flag = confederated_saint
                    }
                }
                AND = {
                    religion = high_church
                    NOT = {
                        has_global_flag = high_church_saint
                    }
                }
                AND = {
                    religion = mormon
                    NOT = {
                        has_global_flag = mormon_saint
                    }
                }
                AND = {
                    religion = wolleyite
                    NOT = {
                        has_global_flag = wolleyite_saint
                    }
                }
                AND = {
                    religion = strangite
                    NOT = {
                        has_global_flag = strangite_saint
                    }
                }
				AND = {
                    religion = bickertonite
                    NOT = {
                        has_global_flag = bickertonite_saint
                    }
                }
            }
        }
        random_realm_province = {
            province_event = { id = HF.40010 }
        }
        change_variable = { which = global_saint_number value = 1 }
        trigger_switch = {
            on_trigger = religion 
            catholic = { set_global_flag = catholic_saint }
            nestorian = { set_global_flag = nestorian_saint }
            evangelical = { set_global_flag = evangelical_saint }
            ursuline = { set_global_flag = ursuline_saint }
            confederated = { set_global_flag = confederated_saint }
            high_church = { set_global_flag = high_church_saint }
            mormon = { set_global_flag = mormon_saint }
            wolleyite = { set_global_flag = wolleyite_saint }
            strangite = { set_global_flag = strangite_saint }
            bickertonite = { set_global_flag = bickertonite_saint }
        }
    }
}

##Competitions(?)##
post_arm_wrestling_flavor_effect = { 
	hidden_tooltip = { 
		random_list = { 
			#Catch attention of another warrior, become friends.
			#Catch attention of another warrior, become lovers.
			10 = { #Love
				trigger = { 
					NOT = { num_of_lovers = 1 }
					is_adult = yes
					NOT = { trait = celibate }
					NOT = { trait = incapable }
					any_society_member = { 
						same_society_as = ROOT
						is_adult = yes
						NOT = { trait = celibate }
						opinion = { who = ROOT value = -20 }
						NOR = { 
							num_of_lovers = 1
							trait = incapable
							character = ROOT
							is_rival = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_married = ROOT
						}
						OR = { #Incest check  
							NOT = { dynasty = ROOT }
							AND = { 
								ROOT = { 
									OR = { 
										has_religion_feature = religion_holy_family
										religion = zoroastrian
										religion = messalian 
									} 
								}
								OR = { 
									has_religion_feature = religion_holy_family
									religion = zoroastrian
									religion = messalian 
								} 
							}
						}
						OR = { #Attraction check
							AND = { 
								ROOT = { is_female = yes } 
								prefers_men_trigger = no
							} 
							AND = { 
								ROOT = { is_female = no } 
								prefers_men_trigger = yes
							} 
						}
					}
				}
				modifier = { 
					factor = 0.85 
					age = 30
				} 
				modifier = { 
					factor = 0.85 
					age = 40
				} 
				modifier = { 
					factor = 0.65 
					age = 50
				} 
				modifier = { 
					factor = 0.35 
					age = 60
				}
				modifier = { 
					factor = 1.5 
					trait = fair
				}
				modifier = { 
					factor = 1.5 
					is_attractive_trigger = yes
				}
				modifier = { 
					factor = 0.5 
					is_unattractive_trigger = yes
				}
				random_society_member = {
					limit = {
						same_society_as = ROOT
						is_adult = yes
						opinion = { who = ROOT value = -20 }
						NOR = { 
							num_of_lovers = 1
							trait = incapable
							character = ROOT
							is_rival = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_married = ROOT
						}
						OR = { #Incest check  
							NOT = { dynasty = ROOT }
							AND = { 
								ROOT = { 
									OR = { 
										has_religion_feature = religion_holy_family
										#religion = zoroastrian								
										#religion = messalian 
									} 
								}
								OR = { 
									has_religion_feature = religion_holy_family
									#religion = zoroastrian
									#religion = messalian 
								} 
							}
						}
						OR = { #Attraction check
							AND = { 
								ROOT = { is_female = yes } 
								prefers_men_trigger = no
							} 
							AND = { 
								ROOT = { is_female = no } 
								prefers_men_trigger = yes
							} 
						}
					}
					preferred_limit = { 
						NOT = { age = 30 }
						is_attractive_trigger = yes
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						NOT = { age = 40 }
						is_attractive_trigger = yes
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						is_attractive_trigger = yes
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						NOT = { age = 30 }
						is_unattractive_trigger = no
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						NOT = { age = 40 }
						is_unattractive_trigger = no
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						is_unattractive_trigger = no
						NAND = { 
							trait = chaste 
							is_married = yes
						}
					}
					preferred_limit = { 
						NOT = { age = 30 }
						is_attractive_trigger = yes
					}
					preferred_limit = { 
						NOT = { age = 40 }
						is_attractive_trigger = yes
					}
					preferred_limit = { 
						is_attractive_trigger = yes
					}
					preferred_limit = { 
						NOT = { age = 30 }
						is_unattractive_trigger = no
					}
					preferred_limit = { 
						NOT = { age = 40 }
						is_unattractive_trigger = no
					}
					preferred_limit = { 
						is_unattractive_trigger = no
					}
					character_event = { id = HF.25218 }
				} 
			} 
			15 = { #Friendship
				trigger = { 
					NOT = { num_of_friends = 3 }
					is_adult = yes
					NOT = { trait = incapable }
					any_society_member = { 
						same_society_as = ROOT
						is_adult = yes
						opinion = { who = ROOT value = -20 }
						NOR = { 
							num_of_friends = 1
							trait = incapable
							character = ROOT
							is_rival = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_married = ROOT
						}
					}
				}
				modifier = { 
					factor = 0.85 
					num_of_friends = 1
				} 
				modifier = { 
					factor = 0.75 
					num_of_friends = 2
				} 
				modifier = { 
					factor = 0.85 
					age = 30
				} 
				modifier = { 
					factor = 0.85 
					age = 40
				} 
				modifier = { 
					factor = 0.65 
					age = 50
				} 
				modifier = { 
					factor = 0.35 
					age = 60
				}
				modifier = { 
					factor = 1.5 
					trait = gregarious
				}
				modifier = { 
					factor = 0.5 
					trait = shy
				}
				random_society_member = {
					limit = {
						same_society_as = ROOT
						is_adult = yes
						opinion = { who = ROOT value = -20 }
						NOR = { 
							num_of_friends = 1
							trait = incapable
							character = ROOT
							is_rival = ROOT 
							is_friend = ROOT
							is_lover = ROOT
							is_married = ROOT
						}
					}
					preferred_limit = { 
						NOT = { age = 30 }
						trait = gregarious
					}
					preferred_limit = { 
						NOT = { age = 40 }
						trait = gregarious
					}
					preferred_limit = { 
						NOT = { age = 30 }
						NOT = { trait = shy }
					}
					preferred_limit = { 
						NOT = { age = 40 }
						NOT = { trait = shy }
					}
					character_event = { id = HF.25222 }
				}
			} 
			50 = { #Nothing.
			} 
		} 
	}
}

##Bloodlines##
found_a_legendary_bloodline_effect_fixed = { #For any hero
	custom_tooltip = {
		text = found_bloodline_tt
		hidden_effect = {
			ROOT = {
				society = {
					save_event_target_as = society_affiliation
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					OR = {
						religion_group = american_native
						is_nomadic = yes
					}
					has_character_modifier = pet_hunting_eagle
					has_character_modifier = friend_of_eagles
					trait = falconer
				}
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_eagle_hunter_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_eagle_hunter_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_eagle_hunter
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_eagle_hunter_A }
						20 = { set_name = bloodline_legendary_eagle_hunter_B }
						20 = { set_name = bloodline_legendary_eagle_hunter_C }
						20 = { set_name = bloodline_legendary_eagle_hunter_D }
					}
				}
			}
			10 = { # (Way of Life exclusive)
				trigger = { has_dlc = "Way of Life" }
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_dog_hunter_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_dog_hunter_male society = event_target:society_affiliation }	
				}

				new_bloodline = {
					set_description = bloodline_desc_legendary_dog_hunter
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_dog_hunter_A }
						20 = { set_name = bloodline_legendary_dog_hunter_B }
						20 = { set_name = bloodline_legendary_dog_hunter_C }
						20 = { set_name = bloodline_legendary_dog_hunter_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_battle_survivor_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_battle_survivor_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_battle_survivor
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_battle_survivor_A }
						20 = { set_name = bloodline_legendary_battle_survivor_B }
						20 = { set_name = bloodline_legendary_battle_survivor_C }
						20 = { set_name = bloodline_legendary_battle_survivor_D }
					}
				}
			}
			5 = { #(Conclave exclusive)
				trigger = { has_dlc = "Conclave" }
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_leader_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_leader_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_leader
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_leader_A }
						20 = { set_name = bloodline_legendary_leader_B }
						20 = { set_name = bloodline_legendary_leader_C }
						20 = { set_name = bloodline_legendary_leader_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_warrior_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_warrior_male society = event_target:society_affiliation }	
				}
				
				new_bloodline = {
					set_description = bloodline_desc_legendary_warrior
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_warrior_A }
						20 = { set_name = bloodline_legendary_warrior_B }
						20 = { set_name = bloodline_legendary_warrior_C }
						20 = { set_name = bloodline_legendary_warrior_D }
					}
				}
			}
			10 = { #(Monks & Mystics/Jade Dragon exclusive)
				trigger = {
					OR = {
						has_dlc = "Monks and Mystics"
						has_dlc = "Jade Dragon"
					}
				}
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_soldier_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_soldier_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_soldier
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_soldier_A }
						20 = { set_name = bloodline_legendary_soldier_B }
						20 = { set_name = bloodline_legendary_soldier_C }
						20 = { set_name = bloodline_legendary_soldier_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_battle_bard_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_battle_bard_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_battle_bard
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_battle_bard_A }
						20 = { set_name = bloodline_legendary_battle_bard_B }
						20 = { set_name = bloodline_legendary_battle_bard_C }
						20 = { set_name = bloodline_legendary_battle_bard_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_commander_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_commander_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_commander
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_commander_A }
						20 = { set_name = bloodline_legendary_commander_B }
						20 = { set_name = bloodline_legendary_commander_C }
						20 = { set_name = bloodline_legendary_commander_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_captor_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_captor_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_captor
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_captor_A }
						20 = { set_name = bloodline_legendary_captor_B }
						20 = { set_name = bloodline_legendary_captor_C }
						20 = { set_name = bloodline_legendary_captor_D }
					}
				}
			}
			5 = { #Available to all
				if = {
					limit = { is_female = yes }
					create_bloodline = { type = legendary_raider_female society = event_target:society_affiliation }
				}
				else = {
					create_bloodline = { type = legendary_raider_male society = event_target:society_affiliation }	
				}
				new_bloodline = {
					set_description = bloodline_desc_legendary_raider
					random_list = { 
						#Randomize names
						20 = { set_name = bloodline_legendary_raider_A }
						20 = { set_name = bloodline_legendary_raider_B }
						20 = { set_name = bloodline_legendary_raider_C }
						20 = { set_name = bloodline_legendary_raider_D }
					}
				}
			}
		}
	}
}

#### For creating bloodlines in general ####
#### If your bloodline requires a specific religion, one which should *not change* if the founder changes religion, this needs to be set.
#### IMPORTANT: If religions are added: add new religion checks in new else-if limits and in the religion_same_as_bloodline_founder_trigger scripted trigger.
set_bloodline_founder_religion_flag_effect = {
	if = {
		limit = { religion_openly_norse_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_norse_pagan_religion }
	}
	else_if = {
		limit = { religion_openly_revelationist_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_revelationist_religion }
	}
	else_if = {
		limit = { religion_openly_rust_cultist_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_rust_cultist_religion }
	}
	else_if = {
		limit = { religion_openly_occultist_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_occultist_religion }
	}
	else_if = {
		limit = { religion_openly_thelemic_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_thelemic_religion }
	}
	else_if = {
		limit = { religion_openly_celtic_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_celtic_pagan_religion }
	}
	else_if = {
		limit = { religion_openly_espiritista_or_reformed_trigger = yes }
		new_bloodline = { set_bloodline_flag = requires_espiritista_religion }
	}
	else_if = {
		limit = { religion = rastafarian }
		new_bloodline = { set_bloodline_flag = requires_rastafarian_religion }
	}
	else_if = {
		limit = { religion = voodoo }
		new_bloodline = { set_bloodline_flag = requires_voodoo_religion }
	}
	else_if = {
		limit = { religion = santeria }
		new_bloodline = { set_bloodline_flag = requires_santeria_religion }
	}
	else_if = {
		limit = { religion = candomble }
		new_bloodline = { set_bloodline_flag = requires_candomble_religion }
	}
	else_if = {
		limit = { religion = ghost_dance }
		new_bloodline = { set_bloodline_flag = requires_ghost_dance_religion }
	}
	else_if = {
		limit = { religion = raven_tales }
		new_bloodline = { set_bloodline_flag = requires_raven_tales_religion }
	}
	else_if = {
		limit = { religion = catholic }
		new_bloodline = { set_bloodline_flag = requires_catholic_religion }
	}
	else_if = {
		limit = { religion = neognostic }
		new_bloodline = { set_bloodline_flag = requires_neognostic_religion }
	}
	else_if = {
		limit = { religion = sedevacantist }
		new_bloodline = { set_bloodline_flag = requires_sedevacantist_religion }
	}
	else_if = {
		limit = { religion = nestorian }
		new_bloodline = { set_bloodline_flag = requires_nestorian_religion }
	}
	else_if = {
		limit = { religion = ursuline }
		new_bloodline = { set_bloodline_flag = requires_ursuline_religion }
	}
	else_if = {
		limit = { religion = angeline }
		new_bloodline = { set_bloodline_flag = requires_angeline_religion }
	}
	else_if = {
		limit = { religion = confederated }
		new_bloodline = { set_bloodline_flag = requires_confederated_religion }
	}
	else_if = {
		limit = { religion = anabaptist }
		new_bloodline = { set_bloodline_flag = requires_anabaptist_religion }
	}
	else_if = {
		limit = { religion = batenburger }
		new_bloodline = { set_bloodline_flag = requires_batenburger_religion }
	}
	else_if = {
		limit = { religion = evangelical }
		new_bloodline = { set_bloodline_flag = requires_evangelical_religion }
	}
	else_if = {
		limit = { religion = antinomian }
		new_bloodline = { set_bloodline_flag = requires_antinomian_religion }
	}
	else_if = {
		limit = { religion = charismatic }
		new_bloodline = { set_bloodline_flag = requires_charismatic_religion }
	}
	else_if = {
		limit = { religion = postadventist }
		new_bloodline = { set_bloodline_flag = requires_postadventist_religion }
	}
	else_if = {
		limit = { religion = falling_star }
		new_bloodline = { set_bloodline_flag = requires_falling_star_religion }
	}
	else_if = {
		limit = { religion = high_church }
		new_bloodline = { set_bloodline_flag = requires_high_church_religion }
	}
	else_if = {
		limit = { religion = united_church }
		new_bloodline = { set_bloodline_flag = requires_united_church_religion }
	}
	else_if = {
		limit = { religion = apostolic }
		new_bloodline = { set_bloodline_flag = requires_apostolic_religion }
	}
	else_if = {
		limit = { religion = sacred_heart }
		new_bloodline = { set_bloodline_flag = requires_sacred_heart_religion }
	}
	else_if = {
		limit = { religion = gracia_divina }
		new_bloodline = { set_bloodline_flag = requires_gracia_divina_religion }
	}
	else_if = {
		limit = { religion = cetic }
		new_bloodline = { set_bloodline_flag = requires_cetic_religion }
	}
	else_if = {
		limit = { religion = gaian }
		new_bloodline = { set_bloodline_flag = requires_gaian_religion }
	}
	else_if = {
		limit = { religion = shinto }
		new_bloodline = { set_bloodline_flag = requires_shinto_religion }
	}
	else_if = {
		limit = { religion = nousthreskeia }
		new_bloodline = { set_bloodline_flag = requires_nousthreskeia_religion }
	}
	else_if = {
		limit = { religion = mormon }
		new_bloodline = { set_bloodline_flag = requires_mormon_religion }
	}
	else_if = {
		limit = { religion = bickertonite }
		new_bloodline = { set_bloodline_flag = requires_bickertonite_religion }
	}
	else_if = {
		limit = { religion = woolleyite }
		new_bloodline = { set_bloodline_flag = requires_woolleyite_religion }
	}
	else_if = {
		limit = { religion = strangite }
		new_bloodline = { set_bloodline_flag = requires_strangite_religion }
	}
	else_if = {
		limit = { religion = sol_invicta }
		new_bloodline = { set_bloodline_flag = requires_sol_invicta_religion }
	}
	else_if = {
		limit = { religion = mictlantec }
		new_bloodline = { set_bloodline_flag = requires_mictlantec_religion }
	}
	else_if = {
		limit = { religion = uahomche }
		new_bloodline = { set_bloodline_flag = requires_uahomche_religion }
	}
	else_if = {
		limit = { religion = neomayan }
		new_bloodline = { set_bloodline_flag = requires_neomayan_religion }
	}
	else_if = {
		limit = { religion = americanist }
		new_bloodline = { set_bloodline_flag = requires_americanist_religion }
	}
	else_if = {
		limit = { religion = hamiltonian }
		new_bloodline = { set_bloodline_flag = requires_hamiltonian_religion }
	}
	else_if = {
		limit = { religion = jeffersonian }
		new_bloodline = { set_bloodline_flag = requires_jeffersonian_religion }
	}
	else_if = {
		limit = { religion = libertarian }
		new_bloodline = { set_bloodline_flag = requires_libertarian_religion }
	}
	else_if = {
		limit = { religion = consumerist }
		new_bloodline = { set_bloodline_flag = requires_consumerist_religion }
	}
	else_if = {
		limit = { religion = atomicist }
		new_bloodline = { set_bloodline_flag = requires_atomicist_religion }
	}
	else_if = {
		limit = { religion = brethren }
		new_bloodline = { set_bloodline_flag = requires_brethren_religion }
	}
	else_if = {
		limit = { religion = jewish }
		new_bloodline = { set_bloodline_flag = requires_jewish_religion }
	}
	else_if = {
		limit = { religion = reform }
		new_bloodline = { set_bloodline_flag = requires_reform_religion }
	}
	else_if = {
		limit = { religion = meshichist }
		new_bloodline = { set_bloodline_flag = requires_meshichist_religion }
	}
	else_if = {
		limit = { religion = hindu }
		new_bloodline = { set_bloodline_flag = requires_hindu_religion }
	}
	else = {
		# Add new religions in new else-if limits.
	}
}

##Holy Orders##
check_holy_order_donation_effect = {
	hidden_tooltip = {
		save_event_target_as = holy_order_potential_title

		if = { # Checking if it is a Duchy that St. Ursula's Chosen could be interested in
			limit = {
				# Checking that ROOT has the whole Duchy
				NOT = {
					any_direct_de_jure_vassal_title = {
						NOT = {
							owner = {
								OR = {
									character = ROOT
									any_liege = {
										character = ROOT
									}
								}
							}
						}
					}
				}
				# Checking that Ursula is active
				is_title_active = d_st_ursulas_chosen
				# Checking that Root is the same religion as Ursula
				d_st_ursulas_chosen = {
					owner = {
						religion = ROOT
					}
				}
				# Checking that Root don't already own the associated Kingdom of that title
				kingdom = {
					OR = {
						owner = {
							NOT = {
								character = ROOT
							}
						}
						NOT = {
							owner = {
								always = yes
							}
						}
					}
				}
				# Checking that the Teutonics don't already have a Duchy
				d_st_ursulas_chosen = {
					owner = {
						NOT = {
							any_demesne_title = {
								tier = COUNT
							}
						}
					}
				}
				# Checking that the Teutonics aren't already in a Northern Crusade
				d_st_ursulas_chosen = {
					owner = {
						NOT = {
							any_war = {
								using_cb = northern_crusade_war
							}
						}
					}
				}
				# Checking the ROOT 
				ROOT = {
					is_heretic = no
					NOT = {
						has_character_flag = refused_to_give_land_to_teutonics
					}
				}
				# Duke tier 
				tier = DUKE
				# Somewhere in the north
				OR = {
					region = world_rustlands
					region = world_norselands
				}
				OR = {
					# Is by water
					any_direct_de_jure_vassal_title = {
						location = {
							port = yes
						}
						owner = {
							OR = {
								character = FROM
								any_liege = {
									character = FROM
								}
							}
						}
					}
					# Is the neighbor to another Catholic realm
					any_direct_de_jure_vassal_title = {
						location = {
							any_neighbor_province = {
								OR = {
									religion = ROOT
									owner = {
										religion = ROOT
									}
									owner = {
										any_liege = {
											religion = ROOT
										}
									}
								}
							}
						}
					}
				}
				# Is adjacent to infidels
				any_direct_de_jure_vassal_title = {
					location = {
						any_neighbor_province = {
							owner = {
								OR = {
									NOT = {
										religion_group = ROOT
									}
									any_liege = {
										NOT = {
											religion_group = ROOT
										}
									}
								}
							}
						}
					}
				}
			}
			d_st_ursulas_chosen = {
				owner = {
					character_event = { id = HFP.44005 days = 1}
				}
			}
		}
	}
}

holy_order_set_law_effect = {
	add_law = revoke_title_law_2
	add_law = ze_administration_laws_1
	add_law = law_voting_power_0
	add_law = war_voting_power_0
	add_law = revoke_title_voting_power_0
	add_law = imprison_voting_power_0
	add_law = grant_title_voting_power_0
	add_law = banish_voting_power_0
	add_law = execution_voting_power_0
	add_law = succession_voting_power_0	
	add_law = centralization_3
}

teutonic_order_upgrade_capital_effect = {
	any_demesne_title = {
		limit = {
			OR = {
				tier = BARON
				tier = COUNT
			}
			holding_type = TRIBAL
		}
		convert_to = CASTLE
		if = {
			limit = {
				location = {
					num_of_empty_holdings = 2
				}
				NOT = {
					any_direct_de_jure_vassal_title = {
						holding_type = city
					}
				}
			}
			location = {
				build_holding = {
					type = CITY
				}
			}
		}
		if = {
			limit = {
				location = {
					num_of_empty_holdings = 2
				}
				NOT = {
					any_direct_de_jure_vassal_title = {
						holding_type = TEMPLE
					}
				}
			}
			location = {
				build_holding = {
					type = TEMPLE
				}
			}
		}
	}
}

holy_order_distribute_titles_effect = {
	any_demesne_title = {
		limit = {
			NOT = {
				holding_type = CASTLE
			}
			lower_tier_than = DUKE
		}
		if = {
			limit = {
				holding_type = CITY
			}
			create_random_steward = {
				random_traits = yes
				dynasty = random
			}
		}
		else_if = {
			limit = {
				holding_type = TEMPLE
			}
			create_random_priest = {
				random_traits = yes
				dynasty = random
			}
		}
		else = {
			create_random_soldier = {
				random_traits = yes
				dynasty = random
			}
		}
		grant_title_no_opinion = new_character
	}
}

#Crusade (recent import)
pledge_crusade_effect = {
	pledge_crusade_participation = yes
	piety = 100
	add_character_modifier = {
		name = recently_pledged_to_crusade_cooldown
		hidden = yes
		duration = 45
	}

        trigger_switch = {
            on_trigger = tier
            EMPEROR = { add_to_crusade_prestige_pot = 2000 add_to_crusade_piety_pot = 800 }
            KING = { add_to_crusade_prestige_pot = 1000 add_to_crusade_piety_pot = 400 }
            DUKE = { add_to_crusade_prestige_pot = 500 add_to_crusade_piety_pot = 200 }
            COUNT = { add_to_crusade_prestige_pot = 250 add_to_crusade_piety_pot = 100 }
            BARON = { add_to_crusade_prestige_pot = 125 add_to_crusade_piety_pot = 100 }
        }

	random = {
		chance = 50
		add_to_crusade_artifact_pot = 1
	}

	if = {
		limit = {
			trait = excommunicated
		}
		rightful_religious_head_scope = {
			character_event = { id = HFP.41056 }
		}
	}

	remove_character_modifier = not_pledged_to_crusade
}

unpledge_crusade_effect = {
	pledge_crusade_participation = no
	piety = -300
	add_character_modifier = {
		name = recently_unpledged_to_crusade_cooldown
		hidden = yes
		duration = 365
	}

	trigger_switch = {
		on_trigger = tier
		EMPEROR = { add_to_crusade_prestige_pot = -2000 add_to_crusade_piety_pot = -800 }
		KING = { add_to_crusade_prestige_pot = -1000 add_to_crusade_piety_pot = -400 }
		DUKE = { add_to_crusade_prestige_pot = -500 add_to_crusade_piety_pot = -200 }
		COUNT = { add_to_crusade_prestige_pot = -250 add_to_crusade_piety_pot = -100 }
		BARON = { add_to_crusade_prestige_pot = -125 add_to_crusade_piety_pot = -100 }
	}

	random = {
		chance = 50
		add_to_crusade_artifact_pot = -1
	}

	add_character_modifier = {
		name = not_pledged_to_crusade
		years = 3
	}

	set_character_flag = asked_to_pledge
}

# Referenced by the "Join Crusade" button in the Crusade defender view for Crusades using the new Crusade system
defender_pledge_crusade_effect = {
	pledge_crusade_defense = yes
}

# Referenced by the "Leave Crusade" button in the Crusade defender view for Crusades using the new Crusade system
defender_unpledge_crusade_effect = {
	pledge_crusade_defense = no
}

# Referenced by the "Contribute to Pot" button in the Crusade view for Crusades using the new Crusade system
contribute_to_crusade_pot_effect = {
	character_event = { id = HFP.41088 }
}

# Referenced by getting artifacts from a Crusade
crusade_give_artifact_effect = {
	crusade_target_title = {
		save_event_target_as = crusade_title
	}

	if = {
		limit = {
			any_province = {
				OR = {
					has_province_modifier = tomb_of_a_saint
					has_province_modifier = pillaged_tomb_of_a_saint
				}
			}
		}
		random_province = {
			limit = {
				OR = {
					has_province_modifier = tomb_of_a_saint
					has_province_modifier = pillaged_tomb_of_a_saint
				}
			}
			event_target:province_saint = {
				save_event_target_as = found_saint
			}
		}
		#set_character_flag = saints_exists
	}

	random_list = {
		#Crusade Weapons
		20 = {
			modifier = {
				factor = 0
				OR = {
					has_artifact = sword_tier_2_new
					has_artifact = sword_tier_3_vengeance
				}
			}
			modifier = {
				factor = 0.05
				OR = {
					has_artifact = lance_tier_2_new
					has_artifact = lance_tier_3_impaler
					has_artifact = axe_tier_2_new
					has_artifact = axe_tier_3_ravager
					has_artifact = mace_tier_2_new
					has_artifact = mace_tier_3_bone_breaker
				}
			}
			set_character_flag = sword_tier_1
			if = {
				limit = {
					has_character_flag = crusader_king_flag
				}
				add_artifact = sword_tier_3_vengeance
			}
			else = {
				add_artifact  = sword_tier_2_new
			}
			new_artifact = {
				set_name = crusade_artifact_name
				set_description = crusade_artifact_description_sword
			}
			clr_character_flag = sword_tier_1
		}
		20 = {
			modifier = {
				factor = 0
				OR = {
					has_artifact = lance_tier_2_new
					has_artifact = lance_tier_3_impaler
				}
			}
			modifier = {
				factor = 0.05
				OR = {
					has_artifact = sword_tier_2_new
					has_artifact = sword_tier_3_vengeance
					has_artifact = axe_tier_2_new
					has_artifact = axe_tier_3_ravager
					has_artifact = mace_tier_2_new
					has_artifact = mace_tier_3_bone_breaker
				}
			}
			set_character_flag = lance_tier_2
			if = {
				limit = {
					has_character_flag = crusader_king_flag
				}
				add_artifact = lance_tier_3_impaler
			}
			else = {
				add_artifact  = lance_tier_2_new
			}
			new_artifact = {
				set_name = crusade_artifact_name
				set_description = crusade_artifact_description_lance
			}
			clr_character_flag = lance_tier_2
		}
		20 = {
			modifier = {
				factor = 0
				OR = {
					has_artifact = axe_tier_2_new
					has_artifact = axe_tier_3_ravager
				}
			}
			modifier = {
				factor = 0.05
				OR = {
					has_artifact = sword_tier_2_new
					has_artifact = sword_tier_3_vengeance
					has_artifact = lance_tier_2_new
					has_artifact = lance_tier_3_impaler
					has_artifact = mace_tier_2_new
					has_artifact = mace_tier_3_bone_breaker
				}
			}
			set_character_flag = axe_tier_2
			if = {
				limit = {
					has_character_flag = crusader_king_flag
				}
				add_artifact = axe_tier_3_ravager
			}
			else = {
				add_artifact  = axe_tier_2_new
			}
			new_artifact = {
				set_name = crusade_artifact_name
				set_description = crusade_artifact_description_ax
			}
			clr_character_flag = axe_tier_2
		}
		20 = {
			modifier = {
				factor = 0
				OR = {
					has_artifact = mace_tier_2_new
					has_artifact = mace_tier_3_bone_breaker
				}
			}
			modifier = {
				factor = 0.05
				OR = {
					has_artifact = sword_tier_2_new
					has_artifact = sword_tier_3_vengeance
					has_artifact = lance_tier_2_new
					has_artifact = lance_tier_3_impaler
					has_artifact = axe_tier_2_new
					has_artifact = axe_tier_3_ravager
				}
			}
			set_character_flag = mace_tier_2
			if = {
				limit = {
					has_character_flag = crusader_king_flag
				}
				add_artifact = mace_tier_3_bone_breaker
			}
			else = {
				add_artifact  = mace_tier_2_new
			}
			new_artifact = {
				set_name = crusade_artifact_name
				set_description = crusade_artifact_description_mace
			}
			clr_character_flag = mace_tier_2
		}
		#Random Christian associated artifacts
		5 = {
			add_artifact = fragment_of_true_cross
		}
		5 = {
			add_artifact = holy_foreskin
		}
		5 = {
			add_artifact = weeping_statue
		}
		#Crusade Armor
		20 = {
			modifier = {
				factor = 0
				has_artifact = armor_tier_2
			}
			set_character_flag = armor_tier_2
			if = {
				limit = {
					has_character_flag = crusader_king_flag
				}
				add_artifact = armor_tier_3_champion
			}
			else = {
				add_artifact  = armor_tier_2
			}
			new_artifact = {
				set_name = crusade_artifact_name 
				set_description = crusade_artifact_description_armor
			}
			clr_character_flag = armor_tier_2
		}
		#Artifacts based on Saints created throughout the game
		2 = {
			trigger = {
				has_character_flag = saints_exists
			}
			add_artifact = saintly_finger
			new_artifact = {
				set_name = crusade_saint_finger_name
				set_description = crusade_saint_finger_description
			}
		}
		2 = {
			trigger = {
				has_character_flag = saints_exists
			}
			add_artifact = saintly_bone
			new_artifact = {
				set_name = crusade_saint_bone_name
				set_description = crusade_saint_bone_description
			}
		}
		2 = {
			trigger = {
				has_character_flag = saints_exists
			}
			add_artifact = saintly_skull_tier_1
			new_artifact = {
				set_name = crusade_skull_name
				set_description = crusade_skull_description
			}
		}
		2 = {
			trigger = {
				has_character_flag = saints_exists
			}
			add_artifact = saintly_skull_tier_2
			new_artifact = {
				set_name = crusade_skull_name
				set_description = crusade_skull_description
			}
		}
		2 = {
			trigger = {
				has_character_flag = saints_exists
			}
			add_artifact = saintly_tongue
			new_artifact = {
				set_name = crusade_tongue_name
				set_description = crusade_tongue_description
			}
		}
		#Artifacts based on placeholder Saints
		2 = {
			modifier = {
				factor = 0.5
				has_character_flag = saints_exists
			}
			add_artifact = saintly_finger
			new_artifact = {
				set_name = crusade_saintly_finger_name_placeholder
				set_description = crusade_saintly_finger_description_placeholder
			}
		}
		2 = {
			modifier = {
				factor = 0.5
				has_character_flag = saints_exists
			}
			add_artifact = saintly_bone
			new_artifact = {
				set_name = crusade_saintly_bone_name_placeholder
				set_description = crusade_saintly_bone_description_placeholder
			}
		}
		2 = {
			modifier = {
				factor = 0.5
				has_character_flag = saints_exists
			}
			add_artifact = saintly_skull_tier_1
			new_artifact = {
				set_name = crusade_saintly_skull_name_placeholder
				set_description = crusade_saintly_skull_description_placeholder
			}
		}
		2 = {
			modifier = {
				factor = 0.5
				has_character_flag = saints_exists
			}
			add_artifact = saintly_skull_tier_2
			new_artifact = {
				set_name = crusade_saintly_skull_name_placeholder
				set_description = crusade_saintly_skull_description_placeholder
			}
		}
		2 = {
			modifier = {
				factor = 0.5
				has_character_flag = saints_exists
			}
			add_artifact = saintly_tongue
			new_artifact = {
				set_name = crusade_saintly_tongue_name_placeholder
				set_description = crusade_saintly_tongue_description_placeholder
			}
		}
	}

	clr_character_flag = saints_exists
	clr_character_flag = crusader_king_flag
}

# Referenced by the "Select Receiver Stance" button in the Crusade view for Crusades using the new Crusade system
select_crusade_receiver_stance_effect = {
	character_event = { id = HFP.41091 }
}

# Crusader King/Queen set up 
setting_up_the_crusader_kingdom_effect = {
	if = {
		limit = {
			can_apply_average_nickname_trigger = yes
		}
		random_list = {
			10 = { give_nickname = nick_the_crusader }
			10 = { give_nickname = nick_the_holy }
			10 = { give_nickname = nick_the_pilgrim }
			10 = { give_nickname = nick_the_protector }
			10 = { give_nickname = nick_the_guardian }
			40 = { give_nickname = nick_the_sword_of_god }
		}
	}
	if = {
		limit = {
			is_female = no
		}
		add_trait = crusader_king
	}
	if = {
		limit = {
			is_female = yes
		}
		add_trait = crusader_queen
	}
	character_event = { id = HFP.41090 days = 1 }
	character_event = { id = HFP.41090 days = 3 }

	if = {
		limit = {
			has_dlc = "Holy Fury"
		}
		save_persistent_event_target = { 
			name = coronation_priest_per 
			scope = ROOT 
		}
		add_trait = crowned_by_pope
	}
	primary_title = {
		add_law = {
			law = succ_primogeniture
			cooldown = no
			opinion_effect = no
		}
		add_law = {
			law = centralization_2
			cooldown = no
			opinion_effect = no
		}
		add_law = {
			law = cognatic_succession
			cooldown = no
			opinion_effect = no
		}
		if = {
			limit = {
				has_dlc = "Zeus"
			}
			add_law = {
				law = ze_administration_laws_1
				cooldown = no
				opinion_effect = no
			}
			add_law = {
				law = out_of_realm_inheritance_law_1
				cooldown = no
				opinion_effect = no
			}
		}
		else_if = {
			limit = {
				NOT = { has_dlc = "Zeus" }
			}
			add_law = {
				law = crown_authority_3
				cooldown = no
				opinion_effect = no
			}
		}
	}
	any_realm_lord = {
		limit = {
			NOR = {
				government = theocracy_government
				government = republic_government
			}
		}
		primary_title = {
			add_law = {
				law = succ_primogeniture
				cooldown = no
				opinion_effect = no
			}
			add_law = {
				law = centralization_2
				cooldown = no
				opinion_effect = no
			}
			add_law = {
				law = cognatic_succession
				cooldown = no
				opinion_effect = no
			}
			if = {
				limit = {
					has_dlc = "Zeus"
				}
				add_law = {
					law = ze_administration_laws_1
					cooldown = no
					opinion_effect = no
				}
			}
		}
	}
	capital_scope = {
		religion = PREV
	}

	if = {
		limit = {
			NOT = {
				wealth = 200
			}
		}
		clear_wealth = yes
		wealth = 200
	}
	
	any_vassal = {
		limit = {
			NOT = {
				religion_group = christian
			}
		}
		set_defacto_liege = THIS
	}
}

battle_commander_counter_positive_effect = {
	crusader_commander_counter_positive_effect = yes
}

battle_commander_counter_negative_effect = {
	crusader_commander_counter_negative_effect = yes
}

# Crusader Commander counter
crusader_commander_counter_positive_effect = {
	if = {
		limit = {
			OR = {
				AND = {
					any_war = {
						using_cb = new_crusade
					}
					has_pledged_crusade_participation = yes
				}
				any_liege = {
					AND = {
						any_war = {
							using_cb = new_crusade
						}
						has_pledged_crusade_participation = yes
					}
				}
			}
			event_target:enemy_commander = {
				OR = {
					any_war = {
						using_cb = new_crusade
					}
					any_liege = {
						any_war = {
							using_Cb = new_crusade
						}
					}
				}
				NOT = {
					religion = ROOT
				}
			}
			NOT = {
				check_variable = { which = crusadeCommander value = 0 }
			}
		}
		change_variable = { which = crusadeCommander value = 1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					any_war = {
						using_cb = new_crusade
					}
					has_pledged_crusade_participation = yes
				}
				any_liege = {
					AND = {
						any_war = {
							using_cb = new_crusade
						}
						has_pledged_crusade_participation = yes
					}
				}
			}
			event_target:enemy_commander = {
				OR = {
					any_war = {
						using_cb = new_crusade
					}
					any_liege = {
						any_war = {
							using_Cb = new_crusade
						}
					}
				}
				NOT = {
					religion = ROOT
				}
			}
		}
		set_variable = { which = crusadeCommander value = 1 }
	}

	if = {
		limit = {
			check_variable = { which = crusadeCommander value = 20 }
			NOT = {
				any_owned_bloodline = {
					has_bloodline_flag = battle_survivor_bloodline
					ROOT = {
						is_bloodline_founder_of = PREV
					}
				}
			}
		}
		narrative_event = { id = HF.49021 }
	}
}

crusader_commander_counter_negative_effect = {
	if = {
		limit = {
			OR = {
				AND = {
					any_war = {
						using_cb = new_crusade
					}
					has_pledged_crusade_participation = yes
				}
				any_liege = {
					AND = {
						any_war = {
							using_cb = new_crusade
						}
						has_pledged_crusade_participation = yes
					}
				}
			}
			event_target:enemy_commander = {
				OR = {
					any_war = {
						using_cb = new_crusade
					}
					any_liege = {
						any_war = {
							using_Cb = new_crusade
						}
					}
				}
				NOT = {
					religion = ROOT
				}
			}
			NOT = {
				check_variable = { which = crusadeCommander value = 0 }
			}
		}
		change_variable = { which = crusadeCommander value = -1 }
	}
}

alternate_crusade_artifact_distribution_effect = {
	custom_tooltip = {
		text = alternate_crusade_artifact_distribution_effect_TT

		random_list = {
			#Crusade Weapons
			20 = {
				modifier = {
					factor = 0
					OR = {
						has_artifact = sword_tier_2_new
						has_artifact = sword_tier_3_vengeance
					}
				}
				modifier = {
					factor = 0.05
					OR = {
						has_artifact = lance_tier_2_new
						has_artifact = lance_tier_3_impaler
						has_artifact = axe_tier_2_new
						has_artifact = axe_tier_3_ravager
						has_artifact = mace_tier_2_new
						has_artifact = mace_tier_3_bone_breaker
					}
				}
				set_character_flag = sword_tier_1
				if = {
					limit = {
						has_character_flag = crusader_king_flag
					}
					add_artifact = sword_tier_3_vengeance
				}
				else = {
					add_artifact  = sword_tier_2_new
				}
				new_artifact = {
					set_name = alternate_crusade_artifact_name
					set_description = alternate_crusade_artifact_description
				}
				clr_character_flag = sword_tier_1
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						has_artifact = lance_tier_2_new
						has_artifact = lance_tier_3_impaler
					}
				}
				modifier = {
					factor = 0.05
					OR = {
						has_artifact = sword_tier_2_new
						has_artifact = sword_tier_3_vengeance
						has_artifact = axe_tier_2_new
						has_artifact = axe_tier_3_ravager
						has_artifact = mace_tier_2_new
						has_artifact = mace_tier_3_bone_breaker
					}
				}
				set_character_flag = lance_tier_2
				if = {
					limit = {
						has_character_flag = crusader_king_flag
					}
					add_artifact = lance_tier_3_impaler
				}
				else = {
					add_artifact  = lance_tier_2_new
				}
				new_artifact = {
					set_name = alternate_crusade_artifact_name
					set_description = alternate_crusade_artifact_description
				}
				clr_character_flag = lance_tier_2
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						has_artifact = axe_tier_2_new
						has_artifact = axe_tier_3_ravager
					}
				}
				modifier = {
					factor = 0.05
					OR = {
						has_artifact = sword_tier_2_new
						has_artifact = sword_tier_3_vengeance
						has_artifact = lance_tier_2_new
						has_artifact = lance_tier_3_impaler
						has_artifact = mace_tier_2_new
						has_artifact = mace_tier_3_bone_breaker
					}
				}
				set_character_flag = axe_tier_2
				if = {
					limit = {
						has_character_flag = crusader_king_flag
					}
					add_artifact = axe_tier_3_ravager
				}
				else = {
					add_artifact  = axe_tier_2_new
				}
				new_artifact = {
					set_name = alternate_crusade_artifact_name
					set_description = alternate_crusade_artifact_description
				}
				clr_character_flag = axe_tier_2
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						has_artifact = mace_tier_2_new
						has_artifact = mace_tier_3_bone_breaker
					}
				}
				modifier = {
					factor = 0.05
					OR = {
						has_artifact = sword_tier_2_new
						has_artifact = sword_tier_3_vengeance
						has_artifact = lance_tier_2_new
						has_artifact = lance_tier_3_impaler
						has_artifact = axe_tier_2_new
						has_artifact = axe_tier_3_ravager
					}
				}
				set_character_flag = mace_tier_2
				if = {
					limit = {
						has_character_flag = crusader_king_flag
					}
					add_artifact = mace_tier_3_bone_breaker
				}
				else = {
					add_artifact  = mace_tier_2_new
				}
				new_artifact = {
					set_name = alternate_crusade_artifact_name
					set_description = alternate_crusade_artifact_description
				}
				clr_character_flag = mace_tier_2
			}
			#Random Christian associated artifacts
			5 = {
				add_artifact = fragment_of_true_cross
			}
			5 = {
				add_artifact = holy_foreskin
			}
			5 = {
				add_artifact = weeping_statue
			}
			#Crusade Armor
			20 = {
				modifier = {
					factor = 0
					has_artifact = armor_tier_2
				}
				set_character_flag = armor_tier_2
				if = {
					limit = {
						has_character_flag = crusader_king_flag
					}
					add_artifact = armor_tier_3_champion
				}
				else = {
					add_artifact  = armor_tier_2
				}
				new_artifact = {
					set_name = alternate_crusade_artifact_name 
					set_description = alternate_crusade_artifact_description
				}
				clr_character_flag = armor_tier_2
			}
			#Artifacts based on placeholder Saints
			2 = {
				add_artifact = saintly_finger
			}
			2 = {
				add_artifact = saintly_bone
			}
			2 = {
				add_artifact = saintly_skull_tier_1
			}
			2 = {
				add_artifact = saintly_skull_tier_2
			}
			2 = {
				add_artifact = saintly_tongue
			}
		}
	}
}

#Reconquista#
reconquista_win_effect = {
	ROOT = {
		if = {
			limit = {
				event_target:first_duchy_title = {
					owner = {
						OR = {
							character = FROM
							top_liege = {
								character = FROM
							}
						}
						NOT = {
							primary_title = {
								title = PREVPREV
							}
						}
					}
				}
			}
			destroy_landed_title = event_target:first_duchy_title
		}
		if = {
			limit = {
				event_target:second_duchy_title = {
					owner = {
						OR = {
							character = FROM
							top_liege = {
								character = FROM
							}
						}
						NOT = {
							primary_title = {
								title = PREVPREV
							}
						}
					}
				}
			}
			destroy_landed_title = event_target:second_duchy_title
		}
		if = {
			limit = {
				event_target:third_duchy_title = {
					owner = {
						OR = {
							character = FROM
							top_liege = {
								character = FROM
							}
						}
						NOT = {
							primary_title = {
								title = PREVPREV
							}
						}
					}
				}
			}
			destroy_landed_title = event_target:third_duchy_title
		}

		show_scope_change = no
		if = {
			limit = {
				any_dynasty_member = {
					has_character_flag = reconquista_beneficiary_flag
					is_alive = yes
				}
			}
			random_dynasty_member = {
				show_scope_change = no
				limit = {
					has_character_flag = reconquista_beneficiary_flag
					is_alive = yes
				}
				event_target:first_duchy_title = {
					show_scope_change = no
					custom_tooltip = {
						text = reconquista_vassalize_TT

						PREV = {
							vassalize_or_take_under_title_destroy_duchies = {
								title = event_target:first_duchy_title
								enemy = FROM
								same_religion = yes # Only vassalize rulers of my religion
								is_religious = yes
								type = holy_war
							}
						}
					}
				}
				event_target:second_duchy_title = {
					show_scope_change = no
					custom_tooltip = {
						text = reconquista_vassalize_TT

						PREV = {
							vassalize_or_take_under_title_destroy_duchies = {
								title = event_target:second_duchy_title
								enemy = FROM
								same_religion = yes # Only vassalize rulers of my religion
								is_religious = yes
								type = holy_war
							}
						}
					}
				}

				event_target:third_duchy_title = {
					show_scope_change = no
					custom_tooltip = {
						text = reconquista_vassalize_TT

						PREV = {
							vassalize_or_take_under_title_destroy_duchies = {
								title = event_target:third_duchy_title
								enemy = FROM
								same_religion = yes # Only vassalize rulers of my religion
								is_religious = yes
								type = holy_war
							}
						}
					}
				}					

				hidden_tooltip = {
					if = {
						limit = {
							event_target:first_duchy_title = {
								OR = {
									owner = {
										OR = {
											character = FROM
											any_liege = {
												character = FROM
											}
										}
									}
									NOT = {
										owner = {
											always = yes
										}
									}
								}
								any_direct_de_jure_vassal_title = {
									owner = {
										character = PREVPREV
									}
								}

							}
						}
						grant_title_no_opinion = event_target:first_duchy_title
					}
					if = {
						limit = {
							event_target:second_duchy_title = {
								OR = {
									owner = {
										OR = {
											character = FROM
											any_liege = {
												character = FROM
											}
										}
									}
									NOT = {
										owner = {
											always = yes
										}
									}
								}
								any_direct_de_jure_vassal_title = {
									owner = {
										character = PREVPREV
									}
								}
							}
						}
						grant_title_no_opinion = event_target:second_duchy_title
					}
					if = {
						limit = {
							event_target:third_duchy_title = {
								OR = {
									owner = {
										OR = {
											character = FROM
											any_liege = {
												character = FROM
											}
										}
									}
									NOT = {
										owner = {
											always = yes
										}
									}
								}
								any_direct_de_jure_vassal_title = {
									owner = {
										character = PREVPREV
									}
								}
							}
						}
						grant_title_no_opinion = event_target:third_duchy_title
					}
					if = {
						limit = {
							event_target:reconquista_kingdom_title = {
								OR = {
									NOT = {
										owner = {
											always = yes
										}
									}
									owner = {
										OR = {
											character = FROM
											any_liege = {
												character = FROM
											}
										}
									}
								}
							}
							has_landed_title = event_target:first_duchy_title
							OR = {
								has_landed_title = event_target:second_duchy_title
								NOT = {
									event_target:second_duchy_title = {
										always = yes
									}
								}
							}
							OR = {
								has_landed_title = event_target:third_duchy_title
								NOT = {
									event_target:third_duchy_title = {
										always = yes
									}
								}
							}
						}
						grant_title_no_opinion = event_target:reconquista_kingdom_title
						event_target:first_duchy_title = {
							de_jure_liege = event_target:reconquista_kingdom_title
						}
						event_target:second_duchy_title = {
							de_jure_liege = event_target:reconquista_kingdom_title
						}
						event_target:third_duchy_title = {
							de_jure_liege = event_target:reconquista_kingdom_title
						}
					}
					if = {
						limit = {
							NOR = {
								has_landed_title = event_target:first_duchy_title
								has_landed_title = event_target:second_duchy_title
								has_landed_title = event_target:third_duchy_title
								has_landed_title = event_target:reconquista_kingdom_title
							}
						}
						event_target:first_duchy_title = {
							create_title = {
								tier = DUKE
								holder = PREV
								custom_created = yes
								culture = PREV
								base_title = THIS
								name = "reconquista_duchy_name"
							}
						}
					}

					holy_order_distribute_titles_effect = yes

					set_defacto_liege = THIS
				}

				character_event = { id = HFP.41090 days = 1 }

				ROOT = {
					show_scope_change = no
					make_tributary = {
						who = PREV
					}
				}
			}
		}
		else = {
			event_target:first_duchy_title = {
				show_scope_change = no
				custom_tooltip = {
					text = reconquista_vassalize_TT

					PREV = {
						vassalize_or_take_under_title_destroy_duchies = {
							title = event_target:first_duchy_title
							enemy = FROM
							same_religion = yes # Only vassalize rulers of my religion
							is_religious = yes
							type = holy_war
						}
					}
				}
			}
			event_target:second_duchy_title = {
				show_scope_change = no
				custom_tooltip = {
					text = reconquista_vassalize_TT

					PREV = {
						vassalize_or_take_under_title_destroy_duchies = {
							title = event_target:second_duchy_title
							enemy = FROM
							same_religion = yes # Only vassalize rulers of my religion
							is_religious = yes
							type = holy_war
						}
					}
				}
			}
			event_target:third_duchy_title = {
				show_scope_change = no
				custom_tooltip = {
					text = reconquista_vassalize_TT

					PREV = {
						vassalize_or_take_under_title_destroy_duchies = {
							title = event_target:third_duchy_title
							enemy = FROM
							same_religion = yes # Only vassalize rulers of my religion
							is_religious = yes
							type = holy_war
						}
					}
				}
			}	

			hidden_tooltip = {
				if = {
					limit = {
						event_target:first_duchy_title = {
							OR = {
								owner = {
									OR = {
										character = FROM
										any_liege = {
											character = FROM
										}
									}
								}
								NOT = {
									owner = {
										always = yes
									}
								}
							}
							any_direct_de_jure_vassal_title = {
								owner = {
									character = ROOT
								}
							}

						}
					}
					grant_title_no_opinion = event_target:first_duchy_title
				}
				if = {
					limit = {
						event_target:second_duchy_title = {
							OR = {
								owner = {
									OR = {
										character = FROM
										any_liege = {
											character = FROM
										}
									}
								}
								NOT = {
									owner = {
										always = yes
									}
								}
							}
							any_direct_de_jure_vassal_title = {
								owner = {
									character = ROOT
								}
							}
						}
					}
					grant_title_no_opinion = event_target:second_duchy_title
				}
				if = {
					limit = {
						event_target:third_duchy_title = {
							OR = {
								owner = {
									OR = {
										character = FROM
										any_liege = {
											character = FROM
										}
									}
								}
								NOT = {
									owner = {
										always = yes
									}
								}
							}
							any_direct_de_jure_vassal_title = {
								owner = {
									character = ROOT
								}
							}
						}
					}
					grant_title_no_opinion = event_target:third_duchy_title
				}
				if = {
					limit = {
						event_target:reconquista_kingdom_title = {
							OR = {
								NOT = {
									owner = {
										always = yes
									}
								}
								owner = {
									OR = {
										character = FROM
										any_liege = {
											character = FROM
										}
									}
								}
							}
						}
						has_landed_title = event_target:first_duchy_title
						OR = {
							has_landed_title = event_target:second_duchy_title
							NOT = {
								event_target:second_duchy_title = {
									always = yes
								}
							}
						}
						OR = {
							has_landed_title = event_target:third_duchy_title
							NOT = {
								event_target:third_duchy_title = {
									always = yes
								}
							}
						}
						ai = yes
					}
					grant_title_no_opinion = event_target:reconquista_kingdom_title
					event_target:first_duchy_title = {
						de_jure_liege = event_target:reconquista_kingdom_title
					}
					event_target:second_duchy_title = {
						de_jure_liege = event_target:reconquista_kingdom_title
					}
					event_target:third_duchy_title = {
						de_jure_liege = event_target:reconquista_kingdom_title
					}
				}
				if = {
					limit = {
						NOR = {
							has_landed_title = event_target:first_duchy_title
							has_landed_title = event_target:second_duchy_title
							has_landed_title = event_target:third_duchy_title
							has_landed_title = event_target:reconquista_kingdom_title
						}
						ai = yes
					}
					event_target:first_duchy_title = {
						create_title = {
							tier = DUKE
							holder = PREV
							custom_created = yes
							culture = PREV
							base_title = THIS
							name = "reconquista_duchy_name"
						}
					}
				}

				if = {
					limit = {
						ai = yes
					}
					holy_order_distribute_titles_effect = yes
				}

				if = {
					limit = {
						has_character_flag = reconquista_adventurer
					}

					set_defacto_liege = ROOT

					primary_title = {
						add_law = succ_primogeniture
						add_law = revoke_title_law_2
						add_law = ze_administration_laws_0
						add_law = law_voting_power_0
						add_law = war_voting_power_0
						add_law = revoke_title_voting_power_0
						add_law = imprison_voting_power_0
						add_law = grant_title_voting_power_0
						add_law = banish_voting_power_0
						add_law = execution_voting_power_0
						add_law = succession_voting_power_0	
						add_law = centralization_3
					}

					character_event = { id = HFP.41090 days = 1 }
				}
			}
		}

		religion_authority = {
			modifier = reconquista_won
			years = 20
		}

		any_attacker = {
			hidden_tooltip = {
				if = {
					limit = {
						check_variable = {
							which = "reconquista_attacker"
							value = 1
						}
					}
					change_variable = {
						which = "reconquista_attacker"
						value = 1
					}
				}
				else = {
					set_variable = {
						which = "reconquista_attacker"
						value = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							which = "reconquista_attacker"
							value = 4
						}
						NOT = {
							check_variable = {
								which = "reconquista_defender"
								value = 2
							}
						}
						religion_group = cult_of_saints
					}
					character_event = { id = HF.49221 }
				}
			}
		}

		check_if_reconquista_finished_effect = yes

		character_event = { id = HF.49200 }
	}
}

reconquista_lose_effect = {
	any_attacker = {
		piety = -100
	}
	any_defender = {
		participation_scaled_piety = 200
		if = {
			limit = {
				uses_decadence = yes
			}
			participation_scaled_decadence = -10
		}
		hidden_tooltip = {
			if = {
				limit = {
					check_variable = {
						which = "reconquista_defender"
						value = 1
					}
				}
				change_variable = {
					which = "reconquista_defender"
					value = 1
				}
			}
			else = {
				set_variable = {
					which = "reconquista_defender"
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = {
						which = "reconquista_defender"
						value = 2
					}
					check_variable = {
						which = "reconquista_attacker"
						value = 2
					}
					religion_group = cult_of_saints
				}
				character_event = { id = HF.49220 }
			}
		}
	}
	FROM = {
		show_scope_change = no
		reverse_imprison = ROOT
	}

	ROOT = { 
		disband_event_forces = reconquista_event_troops

		show_scope_change = no
		transfer_scaled_wealth = {
			to = FROM
			value = 5.0
		}
		religion_authority = {
			modifier = reconquista_lost
			years = 20
		}
	}
	FROM = { 
		show_scope_change = no
		religion_authority = {
			modifier = stopped_reconquista
			years = 20
		}
		hidden_tooltip = {
			if = {
				limit = {
					has_ambition = obj_strengthen_religion
				}
				change_variable = { which = strengthen_religion value = 1 }
			}
		}
	}

	ROOT = {
		character_event = { id = HF.49200 }
	}
}

check_if_reconquista_finished_effect = {
	if = {
		limit = {
			NOT = {
				has_global_flag = reconquista_finished
			}
			NOT = {
				any_province = {
					county = {
						OR = {
							region = custom_jalisco
							region = custom_colima
							region = custom_michoacan
							region = custom_mixteca
							region = custom_zapoteca
							region = custom_mexicoast
							region = custom_mexico
							region = custom_bajio
							region = custom_chichimeca
							region = custom_huasteca
						}
					}
					owner = {
						OR = {
							AND = {
								independent = yes
								NOT = {
									religion_group = cult_of_saints
								}
							}
							AND = {
								top_liege = {
									NOT = {
										religion_group = cult_of_saints
									}
								}
							}
						}
					}
				}
			}
		}
		
		ROOT = {
			narrative_event = { id = HF.49452 }
		}
		any_playable_ruler = {
			narrative_event = { id = HF.49452 }
		}
		set_global_flag = reconquista_finished
	}
}


check_war_effect = {
	check_if_reconquista_finished_effect = yes
	check_holy_order_donation_effect = yes
}

crusade_flavor_event_tombola_effect = {
	random_list = {
		# Nothing Happens
		90 = {
			trigger = {
				NOR = {
					has_global_flag = qa_testing
					has_character_flag = northern_crusade_flavor
					has_character_flag = reconquista_flavor
				}
			}
		}

		######################
		### Generic Events ###
		######################

		# Meet other Crusaders
		3 = {
			trigger = {
				ai = no
				NOR = {
					has_character_flag = northern_crusade_flavor
					has_character_flag = reconquista_flavor
				}
			}
			character_event = { id = HFP.42201 }
		}
		# Seeing the local culture
		3 = {
			trigger = {
				location = {
					NOT = {
						culture = ROOT
					}
				}
			}
			character_event = { id = HFP.42202 }
		}
		# Dead Crusaders
		3 = {
			character_event = { id = HFP.42203 }
		}
		# Meeting caravan
		3 = {
			trigger = {
				NOT = {
					has_character_modifier = crusade_event_meeting_caravan_cooldown
				}
			}
			character_event = { id = HFP.42204 }
		}
		# Reminiscing about home
		1 = {
			trigger = {
				NOT = {
					has_character_modifier = crusade_event_reminiscing_about_home_cooldown
				}
			}
			character_event = { id = HFP.42205 }
		}
		# The Holy Comet
		3 = {
			character_event = { id = HFP.42206 }
		}
		# Questioning the faith
		1 = {
			trigger = {
				NOT = {
					has_character_modifier = crusade_event_questioning_the_faith_cooldown
				}
			}
			character_event = { id = HFP.42207 }
		}
		# The little group of Faithful
		1 = {
			trigger = {
				is_alternate_start = no
				ai = no
			}
			character_event = { id = HFP.42208 }
		}
		# The little thief
		2 = {
			character_event = { id = HFP.42209 }
		}
		# The wise man
		3 = {
			character_event = { id = HFP.42210 }
		}
		# Coming across a local festival
		3 = {
			character_event = { id = HFP.42211 }
		}
		# Guided by God or Alcohol
		2 = {
			trigger = {
				NOR = {
					has_character_flag = northern_crusade_flavor
					has_character_flag = reconquista_flavor
				}
				OR = {
					AND = {
						is_title_active = d_st_ursulas_chosen
						d_st_ursulas_chosen = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = k_ursuline_state
						k_ursuline_state = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = d_knights_of_columbus
						d_knights_of_columbus = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = d_knights_of_peter_claver
						d_knights_of_peter_claver = {
							owner = {
								religion = ROOT
							}
						}
					}
				}
			}
			character_event = { id = HFP.42212 }
		}
		# Meeting a Holy Order
		3 = {
			trigger = {
				ai = no
				NOR = {
					has_character_flag = northern_crusade_flavor
					has_character_flag = reconquista_flavor
				}
				OR = {
					AND = {
						is_title_active = d_st_ursulas_chosen
						d_st_ursulas_chosen = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = k_ursuline_state
						k_ursuline_state = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = d_knights_of_columbus
						d_knights_of_columbus = {
							owner = {
								religion = ROOT
							}
						}
					}
					AND = {
						is_title_active = d_knights_of_peter_claver
						d_knights_of_peter_claver = {
							owner = {
								religion = ROOT
							}
						}
					}
				}
			}
			character_event = { id = HFP.42213 }
		}
		# Crusader Brothel
		3 = {
			character_event = { id = HFP.42214 }
		}
	}
}

landless_pope_effect = {
	if = {
		limit = {
			has_landed_title = k_papal_state
			NOT = {
				catholic = {
					is_name_randomized = yes
				}
			}
		}
		if = {
			limit = {
				NOR = {
					any_demesne_province = {
						always = yes
					}
					any_realm_lord = {
						any_demesne_province = {
							always = yes
						}
					}
				}
			}
			#character_event = { id = HFP.40034 }
			character_event = { id = HFP.40035 }
		}
	}
	if = {
		limit = {
			has_landed_title = k_ursuline
			NOT = {
				ursuline = {
					is_name_randomized = yes
				}
			}
		}
		if = {
			limit = {
				NOR = {
					any_demesne_province = {
						always = yes
					}
					any_realm_lord = {
						any_demesne_province = {
							always = yes
						}
					}
				}
			}
			#character_event = { id = HFP.40034 }
			character_event = { id = canada.28 }
		}
	}
}

add_sympathy_for_religion_effect = {
	if = {
		limit = {
			religion_group = afro_syncretic
		}
		ROOT = {
			add_trait = sympathy_afro_syncretic
		}
	}
	if = {
		limit = {
			religion_group = american_native
		}
		ROOT = {
			add_trait = sympathy_american_native
		}
	}
	if = {
		limit = {
			religion_group = christian
		}
		ROOT = {
			add_trait = sympathy_christendom
		}
	}
	if = {
		limit = {
			religion_group = cult_of_saints
		}
		ROOT = {
			add_trait = sympathy_cult_of_saints
		}
	}
	if = {
		limit = {
			religion_group = pacific
		}
		ROOT = {
			add_trait = sympathy_pacific
		}
	}
	if = {
		limit = {
			religion_group = latter_day_saints
		}
		ROOT = {
			add_trait = sympathy_latter_day_saints
		}
	}
	else_if = {
		limit = {
			religion_group = indian_group
		}
		ROOT = {
			add_trait = sympathy_indian
		}
	}
	else_if = {
		limit = {
			religion_group = mesoamerican_gods
		}
		ROOT = {
			add_trait = sympathy_mesoamerican_gods
		}
	}
	else_if = {
		limit = {
			religion_group = jewish_group
		}
		ROOT = {
			add_trait = sympathy_judaism
		}
	}
	else_if = {
		limit = {
			religion_group = pagan_group
		}
		ROOT = {
			add_trait = sympathy_pagans
		}
	}
	else_if = {
		limit = {
			religion_group = oldworld
		}
		ROOT = {
			add_trait = sympathy_oldworld
		}
	}
	else_if = {
		limit = {
			religion_group = pirate
		}
		ROOT = {
			add_trait = sympathy_pirate
		}
	}
}

WL_ritual_hunt_cleanup_effect = {
	clr_character_flag = do_not_disturb
	hidden_tooltip = { set_variable = { which = wl_ritual_hunting value = 0 } }

	clr_character_flag = flag_hunting_wolf_norse
	clr_character_flag = flag_hunting_wolf_celtic
	clr_character_flag = flag_hunting_wolf_occultist

	clr_character_flag = flag_hunting_eagle_ghost_dance
	clr_character_flag = flag_hunting_eagle_raven_tales
	clr_character_flag = flag_hunting_eagle_americanist

	clr_character_flag = flag_hunting_bear_revelationist
	clr_character_flag = flag_hunting_bear_rust_cultist

	clr_character_flag = flag_hunting_lion_atomicist
}

WL_ritual_hunt_flavor_events_effect = {
	hidden_tooltip = { 
		#Flavor events: (increasing/decreasing hunt variable)
		## Character is about to fall/drown/random. (might result in Friendship/Rivalry/Love)
		## Co-hunter is about to fall/drown/random. (might result in Friendship/Rivalry/Love)
		## Characters looking for tracks. (intrigue) - paranoid
		## Characters need to examine carcass killed by target. (martial) - cruel
		## Characters reflect upon their target. (learning) - scholar
		## Characters find hermit, ask info on target. (diplomacy) - charitable
		## Characters need to interpret old map and pathways. (stewardship) - administrator

		## Characters see a bad omen. (low piety triggers) - theologian
		## Characters see a good omen. (high piety triggers) - theologian

		## Lunatic/Possessed character goes on a Wild Hunt and kills partner.

		random_list = { 
			15 = { #Character is in trouble.
				trigger = { event_target:scoped_WL_co_hunter = { is_alive = yes } }
				modifier = { 
					factor = 1.5
					trait = craven
				}
				modifier = { 
					factor = 1.5
					trait = dull
				}
				modifier = { 
					factor = 1.5
					trait = slow
				}
				modifier = { 
					factor = 1.5
					trait = imbecile
				}
				modifier = { 
					factor = 1.5
					trait = inbred
				}
				modifier = { 
					factor = 1.5
					trait = slothful
				}
				character_event = { id = HF.25603 days = 10 random = 5 }
			}
			15 = { #Co-hunter is in trouble.
				trigger = { event_target:scoped_WL_co_hunter = { is_alive = yes } }
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = craven }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = dull }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = slow }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = imbecile }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = inbred }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = slothful }
				}
				character_event = { id = HF.25606 days = 10 random = 5 }
			}
			25 = { #Characters looking for tracks.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 18 }
				}
				character_event = { id = HF.25608 days = 10 random = 5 }
			}
			25 = { #Characters need to examine carcass.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 18 }
				}
				character_event = { id = HF.25609 days = 10 random = 5 }

			}
			25 = { #Characters reflect upon target.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 18 }
				}
				character_event = { id = HF.25610 days = 10 random = 5 }

			}
			25 = { #Characters persuade hermit for directions.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 18 }
				}
				character_event = { id = HF.25611 days = 10 random = 5 }

			}
			25 = { #Characters need to interpret old map.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 18 }
				}
				modifier = { 
					factor = 1.5
					has_character_flag = flag_picked_ritual_co_hunter_smart
				}
				character_event = { id = HF.25612 days = 10 random = 5 }

			}
			25 = { #Characters see bad omen.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 50 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 100 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 150 }
				}
				character_event = { id = HF.25613 days = 10 random = 5 }
			}
			5 = { #Characters see good omen.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					piety = 250
				}
				modifier = { 
					factor = 1.5
					piety = 350
				}
				modifier = { 
					factor = 1.5
					piety = 450
				}
				modifier = { 
					factor = 1.5
					piety = 550
				}
				character_event = { id = HF.25614 days = 10 random = 5 }

			}

			100 = {  #Lunatic/Possessed ruler starts a Wild Hunt.
				trigger = { 
					OR = { 
						trait = possessed
						trait = lunatic
						AND = { 
							has_character_modifier = lycanthropy 
							OR = { 
								has_character_flag = flag_hunting_wolf_norse
								has_character_flag = flag_hunting_wolf_occultist
								has_character_flag = flag_hunting_wolf_celtic
							} 
						}
					} 
					event_target:scoped_WL_co_hunter = { is_alive = yes }
				}
				character_event = { id = HF.25615 days = 10 random = 5 }
			}
		} 
	}
}

spawn_hre_effect = {
	if = {
		limit = {
			any_landed_title = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
					NOT = {
						port = yes
					}
				}
				NOT = {
					empire = {
						holder_scope = {
							always = yes
						}
					}
				}
				holder_scope = {
					independent = yes
				}
			}
		}
		random_landed_title = {
			limit = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
					NOT = {
						port = yes
					}
				}
				NOT = {
					empire = {
						holder_scope = {
							always = yes
						}
					}
				}
				holder_scope = {
					independent = yes
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			holder_scope = {
				save_event_target_as = target_ruler
			}
			empire = {
				grant_title = event_target:target_ruler
				set_title_flag = alternate_hre
				set_name="ALT_HRE"
				adjective="ALT_HRE_ADJ"
				set_short_name = yes
				any_de_jure_vassal_title = {
					holder_scope = {
						if = {
							limit = {
								NOT = {
									character = event_target:target_ruler
								}
								independent = yes
							}
							set_defacto_liege = event_target:target_ruler
						}
					}
				}
				if = {
					limit = {
						has_dlc = Zeus
					}
					add_law = law_voting_power_1
					add_law = war_voting_power_1
					add_law = revoke_title_voting_power_1
					add_law = imprison_voting_power_1
					add_law = grant_title_voting_power_1
					add_law = banish_voting_power_1
					add_law = execution_voting_power_1
					add_law = succession_voting_power_1
				}
				add_law = succ_hre_elective
			}
			event_target:target_ruler = {
				wealth = 1000
				prestige = 1000
				if = {
					limit = {
						is_female = yes
					}
					create_bloodline = {
						type = great_conqueror_female
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				if = {
					limit = {
						is_female = no
					}
					create_bloodline = {
						type = great_conqueror_male
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				any_realm_character = {
					religion = event_target:target_ruler
				}
				any_realm_province = {
					religion = event_target:target_ruler
				}
				any_realm_character = {
					limit = {
						any_demesne_title = {
							tier = KING
						}
					}
					any_demesne_title = {
						limit = {
							tier = KING
						}
						destroy_landed_title = THIS
					}
				}
				any_demesne_title = {
					limit = {
						tier = KING
					}
					unsafe_destroy_landed_title = THIS
				}
			}
		}
	}
	else_if = {
		limit = {
			any_landed_title = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
					NOT = {
						port = yes
					}
				}
				empire = {
					NOR = {
						has_title_flag = alternate_hre
						has_title_flag = alternate_byz
					}
					holder_scope = {
						always = yes
					}
				}
				holder_scope = {
					independent = yes
				}
			}
		}
		random_landed_title = {
			limit = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
					NOT = {
						port = yes
					}
				}
				empire = {
					NOR = {
						has_title_flag = alternate_hre
						has_title_flag = alternate_byz
					}
					holder_scope = {
						always = yes
					}
				}
				holder_scope = {
					independent = yes
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			empire = {
				any_direct_de_jure_vassal_title = {
					de_jure_liege = e_dixie
				}
				save_event_target_as = title_coa
				destroy_landed_title = THIS
				activate_title = { title = THIS status = no }
			}
			holder_scope = {
				save_event_target_as = target_ruler
			}
			empire = {
				grant_title = event_target:target_ruler
				set_title_flag = alternate_hre
				set_name="ALT_HRE"
				adjective="ALT_HRE_ADJ"
				set_short_name = yes
				any_de_jure_vassal_title = {
					holder_scope = {
						if = {
							limit = {
								NOT = {
									character = event_target:target_ruler
								}
								independent = yes
							}
							set_defacto_liege = event_target:target_ruler
						}
					}
				}
				if = {
					limit = {
						has_dlc = Zeus
					}
					add_law = law_voting_power_1
					add_law = war_voting_power_1
					add_law = revoke_title_voting_power_1
					add_law = imprison_voting_power_1
					add_law = grant_title_voting_power_1
					add_law = banish_voting_power_1
					add_law = execution_voting_power_1
					add_law = succession_voting_power_1
				}
				add_law = succ_hre_elective
			}
			event_target:target_ruler = {
				wealth = 1000
				prestige = 1000
				if = {
					limit = {
						is_female = yes
					}
					create_bloodline = {
						type = great_conqueror_female
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				if = {
					limit = {
						is_female = no
					}
					create_bloodline = {
						type = great_conqueror_male
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				any_realm_character = {
					religion = event_target:target_ruler
				}
				any_realm_province = {
					religion = event_target:target_ruler
				}
				any_realm_character = {
					limit = {
						any_demesne_title = {
							tier = KING
						}
					}
					any_demesne_title = {
						limit = {
							tier = KING
						}
						destroy_landed_title = THIS
					}
				}
				any_demesne_title = {
					limit = {
						tier = KING
					}
					unsafe_destroy_landed_title = THIS
				}
			}
		}
	}
}

spawn_byz_effect = {
	if = {
		limit = {
			any_landed_title = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
				}
				NOT = {
					empire = {
						holder_scope = {
							always = yes
						}
					}
				}
				holder_scope = {
					independent = yes
				}
			}
		}
		random_landed_title = {
			limit = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
				}
				NOT = {
					empire = {
						holder_scope = {
							always = yes
						}
					}
				}
				holder_scope = {
					independent = yes
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			holder_scope = {
				save_event_target_as = target_ruler
			}
			empire = {
				any_direct_de_jure_vassal_title = {
					de_jure_liege = e_caribbean
				}
				save_event_target_as = title_coa
				activate_title = { title = THIS status = no }
			}
			e_caribbean = {
				grant_title = event_target:target_ruler
				set_title_flag = alternate_byz
				set_coa = event_target:title_coa
				set_name="ALT_BYZ"
				adjective="ALT_BYZ_ADJ"
				
				any_de_jure_vassal_title = {
					holder_scope = {
						if = {
							limit = {
								NOT = {
									character = event_target:target_ruler
								}
								independent = yes
							}
							set_defacto_liege = event_target:target_ruler
						}
					}
				}
				if = {
					limit = {
						has_dlc = Zeus
					}
					add_law = ze_administration_laws_2
					add_law = vice_royalty_2
					add_law = centralization_3
					add_law = law_voting_power_0
					add_law = war_voting_power_0
					add_law = revoke_title_voting_power_0
					add_law = imprison_voting_power_0
					add_law = grant_title_voting_power_0
					add_law = banish_voting_power_0
					add_law = execution_voting_power_0
					add_law = succession_voting_power_0
				}
				else = {
					add_law = crown_authority_4
					add_law = imperial_administration
					add_law = vice_royalty_2
					add_law = centralization_3
				}
				add_law = succ_byzantine_elective
				#if = {
				#	limit = {
				#		event_target:target_ruler =  {
				#			OR = {
				#				culture_group = byzantine
				#				culture = roman
				#				religion = orthodox
				#				religion = hellenic_pagan
				#				religion = hellenic_pagan_reformed
				#			}
				#		}
				#	}
				#	add_law = succ_byzantine_elective
				#}
				#else = {
				#	add_law = succ_primogeniture
				#}
			}
			event_target:target_ruler = {
				wealth = 1000
				prestige = 1000
				add_trait = born_in_the_purple
				any_child = {
					add_trait = born_in_the_purple
				}
				if = {
					limit = {
						is_female = yes
					}
					create_bloodline = {
						type = great_conqueror_female
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				if = {
					limit = {
						is_female = no
					}
					create_bloodline = {
						type = great_conqueror_male
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				any_realm_character = {
					limit = {
						NOT = {
							religion_group = event_target:target_ruler
						}
					}
					religion = event_target:target_ruler
				}
				any_realm_province = {
					limit = {
						NOT = {
							religion_group = event_target:target_ruler
						}
					}
					religion = event_target:target_ruler
				}
				any_realm_character = {
					limit = {
						any_demesne_title = {
							tier = KING
						}
					}
					any_demesne_title = {
						limit = {
							tier = KING
						}
						destroy_landed_title = THIS
					}
				}
				any_demesne_title = {
					limit = {
						tier = KING
					}
					unsafe_destroy_landed_title = THIS
				}
				any_realm_character = {
					limit = {
						is_feudal = yes
					}
					any_demesne_title = {
						limit = {
							tier = DUKE
							NOR = {
								controls_religion = yes
								holy_order = yes
								mercenary = yes
							}
						}
						grant_title = event_target:target_ruler
					}
				}
			}
		}
	}
	else_if = {
		limit= {
			any_landed_title = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
				}
				empire = {
					NOR = {
						has_title_flag = alternate_hre
						has_title_flag = alternate_byz
					}
					holder_scope = {
						always = yes
					}
				}
				holder_scope = {
					independent = yes
				}
			}
		}
		random_landed_title = {
			limit = {
				tier = COUNT
				location = {
					is_capital = yes
					any_province_holding = {
						OR = {
							holding_type = castle
							holding_type = temple
							holding_type = city
							holding_type = tribal
						}
					}
				}
				empire = {
					NOR = {
						has_title_flag = alternate_hre
						has_title_flag = alternate_byz
					}
					holder_scope = {
						always = yes
					}
				}
				holder_scope = {
					independent = yes
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
				holder_scope = {
					NOT = {
						any_character = {
							primary_title = {
								has_title_flag = alternate_hre
							}
							NOT = {
								distance = { value = 1000 where = PREV }
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								OR = {
									is_tribal = yes
									is_nomadic = yes
								}
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
					is_adult = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				holder_scope = {
					is_feudal = yes
				}
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			preferred_limit = {
				NOT = {
					empire = {
						any_de_jure_vassal_title = {
							holder_scope = {
								is_nomadic = yes
							}
						}
					}
				}
			}
			holder_scope = {
				save_event_target_as = target_ruler
			}
			empire = {
				any_direct_de_jure_vassal_title = {
					de_jure_liege = e_caribbean
				}
				save_event_target_as = title_coa
				destroy_landed_title = THIS
				activate_title = { title = THIS status = no }
			}
			e_caribbean = {
				grant_title = event_target:target_ruler
				set_title_flag = alternate_byz
				set_coa = event_target:title_coa
				set_name="ALT_BYZ"
				adjective="ALT_BYZ_ADJ"
				
				any_de_jure_vassal_title = {
					holder_scope = {
						if = {
							limit = {
								NOT = {
									character = event_target:target_ruler
								}
								independent = yes
							}
							set_defacto_liege = event_target:target_ruler
						}
					}
				}
				if = {
					limit = {
						has_dlc = Zeus
					}
					add_law = ze_administration_laws_2
					add_law = vice_royalty_2
					add_law = centralization_3
					add_law = law_voting_power_0
					add_law = war_voting_power_0
					add_law = revoke_title_voting_power_0
					add_law = imprison_voting_power_0
					add_law = grant_title_voting_power_0
					add_law = banish_voting_power_0
					add_law = execution_voting_power_0
					add_law = succession_voting_power_0
				}
				else = {
					add_law = crown_authority_4
					add_law = imperial_administration
					add_law = vice_royalty_2
					add_law = centralization_3
				}
				add_law = succ_primogeniture
			}
			event_target:target_ruler = {
				wealth = 1000
				prestige = 1000
				add_trait = born_in_the_purple
				any_child = {
					add_trait = born_in_the_purple
				}
				if = {
					limit = {
						is_female = yes
					}
					create_bloodline = {
						type = great_conqueror_female
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				if = {
					limit = {
						is_female = no
					}
					create_bloodline = {
						type = great_conqueror_male
					}
					new_bloodline = {
						set_description = "bloodline_desc_great_conqueror"
					}
				}
				any_realm_character = {
					limit = {
						NOT = {
							religion_group = event_target:target_ruler
						}
					}
					religion = event_target:target_ruler
				}
				any_realm_province = {
					limit = {
						NOT = {
							religion_group = event_target:target_ruler
						}
					}
					religion = event_target:target_ruler
				}
				any_realm_character = {
					limit = {
						any_demesne_title = {
							tier = KING
						}
					}
					any_demesne_title = {
						limit = {
							tier = KING
						}
						destroy_landed_title = THIS
					}
				}
				any_demesne_title = {
					limit = {
						tier = KING
					}
					unsafe_destroy_landed_title = THIS
				}
				any_realm_character = {
					limit = {
						is_feudal = yes
					}
					any_demesne_title = {
						limit = {
							tier = DUKE
							NOR = {
								controls_religion = yes
								holy_order = yes
								mercenary = yes
							}
						}
						grant_title = event_target:target_ruler
					}
				}
			}
		}
	}
}

# Referenced by Alternate Start religion name generation
randomize_religion_names_effect = {
	# Activate all religious heads
	activate_title = { title = d_bickertonite status = yes }
	create_character = {
		random_traits = yes
		religion = bickertonite
		culture = random
		dynasty = NONE
		female = no
		age = 34
		trait = skilled_tactician
	}
	new_character = {
		d_bickertonite = {
			grant_title = PREV
		}
		set_government_type = theocracy_government
	}
	
	activate_title = { title = d_woolleyite status = yes }
	create_character = {
		random_traits = yes
		religion = woolleyite
		culture = random
		dynasty = NONE
		female = no
		age = 34
		trait = skilled_tactician
	}
	new_character = {
		d_woolleyite = {
			grant_title = PREV
		}
		set_government_type = theocracy_government
	}
	
	activate_title = { title = d_atomicist status = yes }
	create_character = {
		random_traits = yes
		religion = atomicist
		culture = random
		dynasty = NONE
		female = no
		age = 34
		trait = skilled_tactician
	}
	new_character = {
		d_atomicist = {
			grant_title = PREV
		}
		set_government_type = theocracy_government
	}
	
	activate_title = { title = d_jewish status = yes }
	create_character = {
		random_traits = yes
		religion = jewish
		culture = random
		dynasty = NONE
		female = no
		age = 34
		trait = skilled_tactician
	}
	new_character = {
		d_jewish = {
			grant_title = PREV
		}
		set_government_type = theocracy_government
	}
	# Set appropriate names for all rel head titles
	if = {
		limit = {
			catholic = {
				is_name_randomized = yes
			}
		}
		k_papal_state = {
			set_name="ALT_CATHOLIC"
			adjective="ALT_CATHOLIC_ADJ"
		}
	}
	if = {
		limit = {
			evangelical = {
				is_name_randomized = yes
			}
		}
		k_evangelical = {
			set_name="ALT_EVANGELICAL"
			adjective="ALT_EVANGELICAL_ADJ"
			ruler="ECUMENICAL_PATRIARCH"
			ruler_female="AUTOCEPHALOUS_REL_HEAD_TITLE_FEMALE"
			foa="ECUMENICAL_PATRIARCH_FOA"
		}
	}
	if = {
		limit = {
			americanist = {
				is_name_randomized = yes
			}
		}
		d_americanist = {
			set_name="ALT_AMERICANIST"
			adjective="ALT_AMERICANIST_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			libertarian = {
				is_name_randomized = yes
			}
		}
		d_libertarian = {
			set_name="ALT_LIBERTARIAN"
			adjective="ALT_LIBERTARIAN_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			ursuline = {
				is_name_randomized = yes
			}
		}
		k_ursuline = {
			set_name="ALT_URSULINE"
			adjective="ALT_URSULINE_ADJ"
			ruler="POPE"
			ruler_female="PONTIFEX_MAXIMA"
			foa="POPE_FOA"
		}
	}
	if = {
		limit = {
			high_church = {
				is_name_randomized = yes
			}
		}
		d_high_church = {
			set_name="ALT_HIGH_CHURCH"
			adjective="ALT_HIGH_CHURCH_ADJ"
			ruler="POPE"
			ruler_femalE="PONTIFEX_MAXIMA"
			foa="POPE_FOA"
		}
	}
	if = {
		limit = {
			nestorian = {
				is_name_randomized = yes
			}
		}
		d_nestorian = {
			set_name="ALT_NESTORIAN"
			adjective="ALT_NESTORIAN_ADJ"
		}
	}
	if = {
		limit = {
			apostolic = {
				is_name_randomized = yes
			}
		}
		d_apostolic = {
			set_name="ALT_APOSTOLIC"
			adjective="ALT_APOSTOLIC_ADJ"
			ruler="ECUMENICAL_PATRIARCH"
			ruler_female="AUTOCEPHALOUS_REL_HEAD_TITLE_FEMALE"
			foa="ECUMENICAL_PATRIARCH_FOA"
		}
	}
	if = {
		limit = {
			confederated = {
				is_name_randomized = yes
			}
		}
		d_confederated = {
			set_name="ALT_MONOTHELITE"
			adjective="ALT_MONOTHELITE_ADJ"
			ruler="POPE"
			ruler_femalE="PONTIFEX_MAXIMA"
			foa="POPE_FOA"
		}
	}
	if = {
		limit = {
			mormon = {
				is_name_randomized = yes
			}
		}
		d_quorum_of_the_twelve = {
			set_name="ALT_MORMON"
			adjective="ALT_MORMON_ADJ"
			ruler="ECUMENICAL_PATRIARCH"
			ruler_female="AUTOCEPHALOUS_REL_HEAD_TITLE_FEMALE"
			foa="ECUMENICAL_PATRIARCH_FOA"
		}
	}
	if = {
		limit = {
			bickertonite = {
				is_name_randomized = yes
			}
		}
		d_bickertonite = {
			set_name="ALT_ICONOCLAST"
			adjective="ALT_ICONOCLAST_ADJ"
			ruler="ECUMENICAL_PATRIARCH"
			ruler_female="AUTOCEPHALOUS_REL_HEAD_TITLE_FEMALE"
			foa="ECUMENICAL_PATRIARCH_FOA"
		}
	}
	if = {
		limit = {
			strangite = {
				is_name_randomized = yes
			}
		}
		d_strangite = {
			set_name="ALT_STRANGITE"
			adjective="ALT_STRANGITE_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			woolleyite = {
				is_name_randomized = yes
			}
		}
		d_woolleyite = {
			set_name="ALT_WOOLLEYITE"
			adjective="ALT_WOOLLEYITE_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			consumerist = {
				is_name_randomized = yes
			}
		}
		d_consumerist = {
			set_name="ALT_CONSUMERIST"
			adjective="ALT_CONSUMERIST_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			norse_pagan_reformed = {
				is_name_randomized = yes
			}
		}
		d_norse_pagan_reformed = {
			set_name="ALT_NORSE"
			adjective="ALT_NORSE_ADJ"
			ruler="CALIPH"
			ruler_female ="CALIPHA"
			foa ="CALIPH_FOA"
		}
	}
	if = {
		limit = {
			occultist_reformed = {
				is_name_randomized = yes
			}
		}
		d_occultist_reformed = {
			set_name="ALT_OCCULTIST"
			adjective="ALT_OCCULTIST_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			rust_cultist_reformed = {
				is_name_randomized = yes
			}
		}
		d_rust_cultist_reformed = {
			set_name="ALT_RUST_CULTIST"
			adjective="ALT_RUST_CULTIST_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			thelemic_reformed = {
				is_name_randomized = yes
			}
		}
		d_thelemic_reformed = {
			set_name="ALT_THELEMIC"
			adjective="ALT_THELEMIC_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			revelationist_reformed = {
				is_name_randomized = yes
			}
		}
		d_revelationist_reformed = {
			set_name="ALT_REVELATIONIST"
			adjective="ALT_REVELATIONIST_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			espiritista_reformed = {
				is_name_randomized = yes
			}
		}
		d_espiritista_reformed = {
			set_name="ALT_ESPIRITISTA"
			adjective="ALT_ESPIRITISTA_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			celtic_pagan_reformed = {
				is_name_randomized = yes
			}
		}
		d_celtic_pagan_reformed = {
			set_name="ALT_CELTIC"
			adjective="ALT_CELTIC_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
	if = {
		limit = {
			jewish = {
				is_name_randomized = yes
			}
		}
		d_jewish = {
			set_name="ALT_JEWISH"
			adjective="ALT_JEWISH_ADJ"
		}
	}
	if = {
		limit = {
			cetic = {
				is_name_randomized = yes
			}
		}
		e_california = {
			set_name="ALT_CETIC"
			adjective="ALT_CETIC_ADJ"
			short_name = yes
		}
	}
	if = {
		limit = {
			atomicist = {
				is_name_randomized = yes
			}
		}
		d_atomicist = {
			set_name="ALT_ATOMICIST"
			adjective="ALT_ATOMICIST_ADJ"
			title = "PONTIFEX_MAXIMUS"
			title_female = "PONTIFEX_MAXIMA"
			foa = "POPE_FOA"
		}
	}
}

add_random_book_effect = {
    hidden_effect = {
        random_list = {
            50 = {
                add_artifact = magnum_opus_astrology_stars_1
            }
            50 = {
                add_artifact = magnum_opus_astrology_planets_1
            }
            50 = {
                add_artifact = court_etiquette_1
            }
            50 = {
                add_artifact = kama_sutra
            }
            50 = {
                add_artifact = in_honor_of_roots_beloved_1
            }
            50 = {
                add_artifact = the_art_of_love
            }
            50 = {
                add_artifact = the_illiad
            }
            50 = {
                add_artifact = the_odyssey
            }
            50 = {
                add_artifact = speculum_regale
            }
            50 = {
                add_artifact = cookbook_3_south_anglo
            }
            50 = {
                add_artifact = cookbook_3_afro_anglo
            }
            50 = {
                add_artifact = a_history_of_churches
            }

        }
    }
}

create_crusader_king_crown_effect = { #Applied after Crusade is over, on the Beneficiary.
	if = { 
		limit = { 
			higher_real_tier_than = DUKE
			NOT = { any_artifact = { has_artifact_flag = crusader_crown } }
			NOT = { primary_title = { has_title_flag = flag_title_crusader_crown } } #Spawn only once per-Kingdom.
		} 
		random = { 
			chance = 40
			modifier = { 
				factor = 1.75
				has_landed_title = k_columbia
			}
			modifier = { 
				factor = 1.5
				capital_scope = { region = world_northeast }
			}
			primary_title = { set_title_flag = flag_title_crusader_crown } #Let this kind of artifact only spawn once per conquered Crusader Kingdom.
			add_artifact = crown_crusader_king
			new_artifact = {
				set_description = crown_crusader_king_desc_1
				random_list = { #Randomize names to avoid too much repetition.
					20 = { set_name = crown_crusader_king_random_1 } 
					20 = { set_name = crown_crusader_king_random_2 }
					20 = { set_name = crown_crusader_king_random_3 }
					20 = { set_name = crown_crusader_king_random_4 }
					20 = { set_name = crown_crusader_king_random_5 }
					20 = { set_name = crown_crusader_king_random_6 }
					20 = { set_name = crown_crusader_king_random_7 }
					20 = { set_name = crown_crusader_king_random_8 }
				}
			}
		}
	}
}

move_childrens_crusade_region_effect = {
	if = { #If at any point during the preparation Jerusalem is no longer a valid target, or a real Crusade starts, stop everything.
		limit = {
			OR = {
				k_columbia = { has_holder = yes holder_scope = { religion_group = christian } }
				c_washington = { holder_scope = { religion_group = christian } }
				c_washington = { holder_scope = { is_crusade_target = yes } }
				religion_head = { is_preparing_crusade = yes }
				religion_head = { 
					OR = { 
						any_war = { using_cb = crusade }  
						any_war = { using_cb = new_crusade } 
					} 
				} 
			}
		}
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25819 days = 30 } #Notify everyone that the crusade has flopped.
		}
		primary_title = {
			activate_title = { title = THIS status = no }
			destroy_landed_title = THIS
		}
		clr_character_flag = flag_childrens_crusade_leader
		add_trait = lunatic
		piety = -150
		remove_trait = disinherited 
		set_variable = { which = children_crusade_forces value = 0 }
		set_variable = { which = children_crusade_morale value = 0 }
		set_variable = { which = children_crusade_heavy_troops value = 0 }
		any_courtier = { 
			remove_trait = disinherited
			clr_character_flag = no_court_invites
		}
		break = yes
	}
	if = { #Move to St. Louis first.
		limit = {
			has_character_flag = flag_children_at_beginning
		}
		primary_title = { set_preferred_capital = c_st_louis } #Historically traveled here.
		change_variable = { which = children_crusade_forces value = 1 }
		change_variable = { which = children_crusade_morale value = -1 }
		clr_character_flag = flag_children_at_beginning
		set_character_flag = flag_children_at_st_louis
		if = { 
			limit = {  
				NOT = { persistent_event_target:childrens_crusade_sponsor_per = { is_alive = yes } }
			}
			change_variable = { which = children_crusade_morale value = -2 }
		}
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25815 days = 30 } #Notify everyone that the crusade has reached Genoa and the sea did not part before them.
		}
		narrative_event = { id = HF.25808 days = 50 random = 100 } #Ping back to main event to check travel progress.
	}
	else_if = { #Then shipwreck to Achaia.
		limit = {
			has_character_flag = flag_children_at_st_louis
		}
		primary_title = { set_preferred_capital = c_chicago } 
		change_variable = { which = children_crusade_morale value = -1 }
		clr_character_flag = flag_children_at_st_louis
		set_character_flag = flag_children_at_chicago 
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25816 days = 30 } #Notify everyone that the crusade has shipwrecked into Achaia.
		}
		if = { 
			limit = {  
				NOT = { persistent_event_target:childrens_crusade_sponsor_per = { is_alive = yes } }
			}
			random = { 
				chance = 25  
				change_variable = { which = children_crusade_forces value = -1 }
			} 
		}
		narrative_event = { id = HF.25808 days = 50 random = 100 } #Ping back to main event to check travel progress.
	}
	else_if = { #Then crawl to Nikaea.
		limit = {
			has_character_flag = flag_children_at_chicago
		}
		primary_title = { set_preferred_capital = c_buffalo } 
		clr_character_flag = flag_children_at_chicago
		set_character_flag = flag_children_at_buffalo
		change_variable = { which = children_crusade_forces value = 1 } #Base forces score is 3 = circa 15.000 poorly armed troops.
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25817 days = 30 } #Notify everyone that the crusade has crawled its way to Nikaea.
		}
		narrative_event = { id = HF.25808 days = 50 random = 100 } #Ping back to main event to check travel progress.
	}
	else_if = { #We actually got there. Start the war.
		limit = {
			has_character_flag = flag_children_at_buffalo
		}
		primary_title = { set_preferred_capital = c_manhattan } #Where the troops will spawn.
		clr_character_flag = flag_children_at_buffalo
		set_character_flag = flag_children_at_new_york
		narrative_event = { id = HF.25820 days = 25 } #START THE CRUSADE.
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25818 days = 30 } #Notify everyone that the crusade has actually reached Antioch and is ready to engage.
		}
	}
	else = { #Move directly to New York in case something went wrong.
		primary_title = { set_preferred_capital = c_new_york } #Historically traveled here.
		clr_character_flag = flag_children_at_st_louis
		clr_character_flag = flag_children_at_chicago
		clr_character_flag = flag_children_at_buffalo
		set_character_flag = flag_children_at_new_york
		change_variable = { which = children_crusade_forces value = 1 }
		change_variable = { which = children_crusade_morale value = -1 }
		if = { 
			limit = {  
				NOT = { persistent_event_target:childrens_crusade_sponsor_per = { is_alive = yes } }
			}
			change_variable = { which = children_crusade_morale value = -2 }
		}
		narrative_event = { id = HF.25820 days = 25 } #START THE CRUSADE.
		any_player = { 
				limit = {
				religion_group = christian
				NOT = {
					character = ROOT
				}
			}
			narrative_event = { id = HF.25818 days = 30 } #Notify everyone that the crusade has actually reached Antioch and is ready to engage.
		}
	}
}
