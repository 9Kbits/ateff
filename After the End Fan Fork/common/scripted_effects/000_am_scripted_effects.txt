#	Example:
# 
#	example_effect = {
#		treasury = 100
#		prestige = 50
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#
# Naming convention:  xxxx_effect
#

##ATE SPECIFIC##
clear_banking_flags_effect = {
	clr_character_flag = loan_taken
	clr_character_flag = loan_100
	clr_character_flag = loan_200
	clr_character_flag = loan_400
	clr_character_flag = loan_600
	clr_character_flag = loan_800
	clr_character_flag = loan_1000
}

clear_selling_shares_flags_effect = {
	clr_character_flag = shares_selling
	clr_character_flag = shares_100
	clr_character_flag = shares_200
	clr_character_flag = shares_400
	clr_character_flag = shares_600
	clr_character_flag = shares_800
	clr_character_flag = shares_1000
}

add_am_crusade_trait_effect = {
	if = {
		limit = {
			OR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
			}
		}
		add_trait = valhalla_bound
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = revelationist
				religion = revelationist_reformed
			}
		}
		add_trait = sword_of_the_lamb
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = rust_cultist
				religion = rust_cultist_reformed
			}
		}
		add_trait = fords_striker
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = occultist
				religion = occultist_reformed
			}
		}
		add_trait = knight_templar
		break = yes
	}
	if = {
		limit = {
			OR = {
				religion = thelemic
				religion = thelemic_reformed
			}
		}
		add_trait = order_of_the_garter
		break = yes
	}
	if = {
		limit = {
			religion_group = christian
		}
		add_trait = crusader
		break = yes
	}
	if = {
		limit = {
			religion_group = latter_day_saints
		}
		add_trait = danite
		break = yes
	}
	if = {
		limit = {
			religion_group = jewish_group
		}
		add_trait = shaddai
	}
}

##SECRET RELIGIONS##
# Add a sympathy trait for the current religion
add_sympathy_effect = {
	if = {
		limit = { religion_group = pagan_group }
		add_trait = sympathy_pagans
	}
	if = {
		limit = { religion_group = afro_syncretic }
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { religion_group = american_native }
		add_trait = sympathy_american_native
	}
	if = {
		limit = { religion_group = christian }
		add_trait = sympathy_christendom
	}
	if = {
		limit = { religion_group = cult_of_saints }
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { religion_group = pacific }
		add_trait = sympathy_pacific
	}
	if = {
		limit = { religion_group = latter_day_saints }
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { religion_group = mesoamerican_gods }
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { religion_group = oldworld }
		add_trait = sympathy_oldworld
	}
	if = {
		limit = { religion_group = pirate }
		add_trait = sympathy_pirate
	}
	if = {
		limit = { religion_group = jewish_group }
		add_trait = sympathy_judaism
	}
	if = {
		limit = { religion_group = indian_group }
		add_trait = sympathy_indian
	}
}

# Add a sympathy trait for the true religion
add_sympathy_true_effect = {
	if = {
		limit = { PREV = { true_religion_group = pagan_group } }
		add_trait = sympathy_pagans
	}
	if = {
		limit = { PREV = { true_religion_group = afro_syncretic } }
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { PREV = { true_religion_group = american_native } }
		add_trait = sympathy_american_native
	}
	if = {
		limit = { PREV = { true_religion_group = christian } }
		add_trait = sympathy_christendom
	}
	if = {
		limit = { PREV = { true_religion_group = cult_of_saints } }
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { PREV = { true_religion_group = pacific } }
		add_trait = sympathy_pacific
	}
	if = {
		limit = { PREV = { true_religion_group = latter_day_saints } }
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { PREV = { true_religion_group = mesoamerican_gods } }
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { PREV = { true_religion_group = oldworld } }
		add_trait = sympathy_oldworld
	}	
	if = {
		limit = { PREV = { true_religion_group = pirate } }
		add_trait = sympathy_pirate
	}
	if = {
		limit = { PREV = { true_religion_group = jewish_group } }
		add_trait = sympathy_judaism
	}
	if = {
		limit = { PREV = { true_religion_group = indian_group } }
		add_trait = sympathy_indian
	}
}

add_sympathy_for_prevs_true_religion_effect = {
	if = {
		limit = { 
			PREV = { true_religion_group_afro_syncretic_trigger = yes } 
			NOT = { religion_group = afro_syncretic }
		}
		add_trait = sympathy_afro_syncretic
	}
	if = {
		limit = { 
			PREV = { true_religion_group_christian_trigger = yes } 
			NOT = { religion_group = christian }
		}
		add_trait = sympathy_christendom
	}
	if = {
		limit = { 
			PREV = { true_religion_group_cult_of_saints_trigger = yes } 
			NOT = { religion_group = cult_of_saints }
		}
		add_trait = sympathy_cult_of_saints
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pacific_trigger = yes } 
			NOT = { religion_group = pacific }
		}
		add_trait = sympathy_pacific
	}
	if = {
		limit = { 
			PREV = { true_religion_group_latter_day_saints_trigger = yes } 
			NOT = { religion_group = latter_day_saints }
		}
		add_trait = sympathy_latter_day_saints
	}
	if = {
		limit = { 
			PREV = { true_religion_group_mesoamerican_gods_trigger = yes } 
			NOT = { religion_group = mesoamerican_gods }
		}
		add_trait = sympathy_mesoamerican_gods
	}
	if = {
		limit = { 
			PREV = { true_religion_group_oldworld_trigger = yes } 
			NOT = { religion_group = oldworld }
		}
		add_trait = sympathy_oldworld
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pagan_group_trigger = yes } 
			NOT = { religion_group = pagan_group }
		}
		add_trait = sympathy_pagans
	}
	if = {
		limit = { 
			PREV = { true_religion_group_pirate_trigger = yes } 
			NOT = { religion_group = pirate }
		}
		add_trait = sympathy_pirate
	}
	if = {
		limit = { 
			PREV = { true_religion_group_jewish_group_trigger = yes } 
			NOT = { religion_group = jewish_group }
		}
		add_trait = sympathy_judaism
	}
	if = {
		limit = { 
			PREV = { true_religion_group_indian_group_trigger = yes } 
			NOT = { religion_group = indian_group }
		}
		add_trait = sympathy_indian
	}
}

add_trait_for_prevs_secret_religion_society_effect = {
	set_secret_religion = PREV
}

flip_to_secret_religion_effect = {
	convert_to_secret_religion = yes
}

add_prevs_secret_religion_trait_effect = {
	set_secret_religion = PREV
}

add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect = {
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rastafarian
    			}
    			has_character_flag = character_was_rastafarian
			}
    	}
    	set_secret_religion = rastafarian
    	clr_character_flag = character_was_rastafarian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = voodoo
    			}
    			has_character_flag = character_was_voodoo
			}
    	}
    	set_secret_religion = voodoo
    	clr_character_flag = character_was_voodoo
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = santeria
    			}
    			has_character_flag = character_was_santeria
			}
    	}
    	set_secret_religion = santeria
    	clr_character_flag = character_was_santeria
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = candomble
    			}
    			has_character_flag = character_was_candomble
			}
    	}
    	set_secret_religion = candomble
    	clr_character_flag = character_was_candomble
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = espiritista
    			}
    			has_character_flag = character_was_espiritista
			}
    	}
    	set_secret_religion = espiritista
    	clr_character_flag = character_was_espiritista
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = espiritista_reformed
    			}
    			has_character_flag = character_was_espiritista_reformed
			}
    	}
    	set_secret_religion = espiritista_reformed
    	clr_character_flag = character_was_espiritista_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = ghost_dance
    			}
    			has_character_flag = character_was_ghost_dance
			}
    	}
    	set_secret_religion = ghost_dance
    	clr_character_flag = character_was_ghost_dance
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = raven_tales
    			}
    			has_character_flag = character_was_raven_tales
			}
    	}
    	set_secret_religion = raven_tales
    	clr_character_flag = character_was_raven_tales
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = catholic
    			}
    			has_character_flag = character_was_catholic
			}
    	}
    	set_secret_religion = catholic
    	clr_character_flag = character_was_catholic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = neognostic
    			}
    			has_character_flag = character_was_neognostic
			}
    	}
    	set_secret_religion = neognostic
    	clr_character_flag = character_was_neognostic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sedevacantist
    			}
    			has_character_flag = character_was_sedevacantist
			}
    	}
    	set_secret_religion = sedevacantist
    	clr_character_flag = character_was_sedevacantist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = nestorian
    			}
    			has_character_flag = character_was_nestorian
			}
    	}
    	set_secret_religion = nestorian
    	clr_character_flag = character_was_nestorian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = ursuline
    			}
    			has_character_flag = character_was_ursuline
			}
    	}
    	set_secret_religion = ursuline
    	clr_character_flag = character_was_ursuline
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = angeline
    			}
    			has_character_flag = character_was_angeline
			}
    	}
    	set_secret_religion = angeline
    	clr_character_flag = character_was_angeline
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = confederated
    			}
    			has_character_flag = character_was_confederated
			}
    	}
    	set_secret_religion = confederated
    	clr_character_flag = character_was_confederated
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = anabaptist
    			}
    			has_character_flag = character_was_anabaptist
			}
    	}
    	set_secret_religion = anabaptist
    	clr_character_flag = character_was_anabaptist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = evangelical
    			}
    			has_character_flag = character_was_evangelical
			}
    	}
    	set_secret_religion = evangelical
    	clr_character_flag = character_was_evangelical
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = antinomian
    			}
    			has_character_flag = character_was_antinomian
			}
    	}
    	set_secret_religion = antinomian
    	clr_character_flag = character_was_antinomian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = charismatic
    			}
    			has_character_flag = character_was_charismatic
			}
    	}
    	set_secret_religion = charismatic
    	clr_character_flag = character_was_charismatic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = falling_star
    			}
    			has_character_flag = character_was_falling_star
			}
    	}
    	set_secret_religion = falling_star
    	clr_character_flag = character_was_falling_star
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = high_church
    			}
    			has_character_flag = character_was_high_church
			}
    	}
    	set_secret_religion = high_church
    	clr_character_flag = character_was_high_church
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = anglo_papalist
    			}
    			has_character_flag = character_was_anglo_papalist
			}
    	}
    	set_secret_religion = anglo_papalist
    	clr_character_flag = character_was_anglo_papalist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = united_church
    			}
    			has_character_flag = character_was_united_church
			}
    	}
    	set_secret_religion = united_church
    	clr_character_flag = character_was_united_church
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sacred_heart
    			}
    			has_character_flag = character_was_sacred_heart
			}
    	}
    	set_secret_religion = sacred_heart
    	clr_character_flag = character_was_sacred_heart
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = gracia_divina
    			}
    			has_character_flag = character_was_gracia_divina
			}
    	}
    	set_secret_religion = gracia_divina
    	clr_character_flag = character_was_gracia_divina
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = cetic
    			}
    			has_character_flag = character_was_cetic
			}
    	}
    	set_secret_religion = cetic
    	clr_character_flag = character_was_cetic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = gaian
    			}
    			has_character_flag = character_was_gaian
			}
    	}
    	set_secret_religion = gaian
    	clr_character_flag = character_was_gaian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = shinto
    			}
    			has_character_flag = character_was_shinto
			}
    	}
    	set_secret_religion = shinto
    	clr_character_flag = character_was_shinto
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = nousthreskeia
    			}
    			has_character_flag = character_was_nousthreskeia
			}
    	}
    	set_secret_religion = nousthreskeia
    	clr_character_flag = character_was_nousthreskeia
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = mormon
    			}
    			has_character_flag = character_was_mormon
			}
    	}
    	set_secret_religion = mormon
    	clr_character_flag = character_was_mormon
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = bickertonite
    			}
    			has_character_flag = character_was_bickertonite
			}
    	}
    	set_secret_religion = bickertonite
    	clr_character_flag = character_was_bickertonite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = godbeite
    			}
    			has_character_flag = character_was_godbeite
			}
    	}
    	set_secret_religion = godbeite
    	clr_character_flag = character_was_godbeite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = strangite
    			}
    			has_character_flag = character_was_strangite
			}
    	}
    	set_secret_religion = strangite
    	clr_character_flag = character_was_strangite
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = sol_invicta
    			}
    			has_character_flag = character_was_sol_invicta
			}
    	}
    	set_secret_religion = sol_invicta
    	clr_character_flag = character_was_sol_invicta
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = mictlantec
    			}
    			has_character_flag = character_was_mictlantec
			}
    	}
    	set_secret_religion = mictlantec
    	clr_character_flag = character_was_mictlantec
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = uahomche
    			}
    			has_character_flag = character_was_uahomche
			}
    	}
    	set_secret_religion = uahomche
    	clr_character_flag = character_was_uahomche
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = neomayan
    			}
    			has_character_flag = character_was_neomayan
			}
    	}
    	set_secret_religion = neomayan
    	clr_character_flag = character_was_neomayan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = americanist
    			}
    			has_character_flag = character_was_americanist
			}
    	}
    	set_secret_religion = americanist
    	clr_character_flag = character_was_americanist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = hamiltonian
    			}
    			has_character_flag = character_was_hamiltonian
			}
    	}
    	set_secret_religion = hamiltonian
    	clr_character_flag = character_was_hamiltonian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = jeffersonian
    			}
    			has_character_flag = character_was_jeffersonian
			}
    	}
    	set_secret_religion = jeffersonian
    	clr_character_flag = character_was_jeffersonian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = libertarian
    			}
    			has_character_flag = character_was_libertarian
			}
    	}
    	set_secret_religion = libertarian
    	clr_character_flag = character_was_libertarian
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = consumerist
    			}
    			has_character_flag = character_was_consumerist
			}
    	}
    	set_secret_religion = consumerist
    	clr_character_flag = character_was_consumerist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = atomicist
    			}
    			has_character_flag = character_was_atomicist
			}
    	}
    	set_secret_religion = atomicist
    	clr_character_flag = character_was_atomicist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = pagan
    			}
    			has_character_flag = character_was_pagan
			}
    	}
    	set_secret_religion = pagan
    	clr_character_flag = character_was_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = revelationist_reformed
    			}
    			has_character_flag = character_was_revelationist_reformed
			}
    	}
    	set_secret_religion = revelationist_reformed
    	clr_character_flag = character_was_revelationist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = revelationist
    			}
    			has_character_flag = character_was_revelationist
			}
    	}
    	set_secret_religion = revelationist
    	clr_character_flag = character_was_revelationist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rust_cultist_reformed
    			}
    			has_character_flag = character_was_rust_cultist_reformed
			}
    	}
    	set_secret_religion = rust_cultist_reformed
    	clr_character_flag = character_was_rust_cultist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = rust_cultist
    			}
    			has_character_flag = character_was_rust_cultist
			}
    	}
    	set_secret_religion = rust_cultist
    	clr_character_flag = character_was_rust_cultist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = occultist_reformed
    			}
    			has_character_flag = character_was_occultist_reformed
			}
    	}
    	set_secret_religion = occultist_reformed
    	clr_character_flag = character_was_occultist_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = occultist
    			}
    			has_character_flag = character_was_occultist
			}
    	}
    	set_secret_religion = occultist
    	clr_character_flag = character_was_occultist
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = thelemic_reformed
    			}
    			has_character_flag = character_was_thelemic_reformed
			}
    	}
    	set_secret_religion = thelemic_reformed
    	clr_character_flag = character_was_thelemic_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = thelemic
    			}
    			has_character_flag = character_was_thelemic
			}
    	}
    	set_secret_religion = thelemic
    	clr_character_flag = character_was_thelemic
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = norse_pagan_reformed
    			}
    			has_character_flag = character_was_norse_pagan_reformed
			}
    	}
    	set_secret_religion = norse_pagan_reformed
    	clr_character_flag = character_was_norse_pagan_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = norse_pagan
    			}
    			has_character_flag = character_was_norse_pagan
			}
    	}
    	set_secret_religion = norse_pagan
    	clr_character_flag = character_was_norse_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = celtic_pagan
    			}
    			has_character_flag = character_was_celtic_pagan
			}
    	}
    	set_secret_religion = celtic_pagan
    	clr_character_flag = character_was_celtic_pagan
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = celtic_pagan_reformed
    			}
    			has_character_flag = character_was_celtic_pagan_reformed
			}
    	}
    	set_secret_religion = celtic_pagan_reformed
    	clr_character_flag = character_was_celtic_pagan_reformed
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = brethren
    			}
    			has_character_flag = character_was_brethren
			}
    	}
    	set_secret_religion = brethren
    	clr_character_flag = character_was_brethren
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = jewish
    			}
    			has_character_flag = character_was_jewish
			}
    	}
    	set_secret_religion = jewish
    	clr_character_flag = character_was_jewish
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = reform
    			}
    			has_character_flag = character_was_reform
			}
    	}
    	set_secret_religion = reform
    	clr_character_flag = character_was_reform
		break = yes
    }
	if = {
    	limit = {
    		OR = {
    			AND = {
    				NOT = {
						has_character_was_religion_flag_trigger = yes
    				}
    				religion = hindu
    			}
    			has_character_flag = character_was_hindu
			}
    	}
    	set_secret_religion = hindu
    	clr_character_flag = character_was_hindu
		break = yes
    }
}

add_religion_char_flag_effect = {
	if = {
    	limit = { religion = rastafarian }
    	set_character_flag = character_was_rastafarian
    }
	if = {
    	limit = { religion = voodoo }
    	set_character_flag = character_was_voodoo
    }
	if = {
    	limit = { religion = santeria }
    	set_character_flag = character_was_santeria
    }
	if = {
    	limit = { religion = candomble }
    	set_character_flag = character_was_candomble
    }
	if = {
    	limit = { religion = espiritista }
    	set_character_flag = character_was_espiritista
    }
	if = {
    	limit = { religion = espiritista_reformed }
    	set_character_flag = character_was_espiritista_reformed
    }
	if = {
    	limit = { religion = ghost_dance }
    	set_character_flag = character_was_ghost_dance
    }
	if = {
    	limit = { religion = raven_tales }
    	set_character_flag = character_was_raven_tales
    }
	if = {
    	limit = { religion = catholic }
    	set_character_flag = character_was_catholic
    }
	if = {
    	limit = { religion = neognostic }
    	set_character_flag = character_was_neognostic
    }
	if = {
    	limit = { religion = sedevacantist }
    	set_character_flag = character_was_sedevacantist
    }
	if = {
    	limit = { religion = nestorian }
    	set_character_flag = character_was_nestorian
    }
	if = {
    	limit = { religion = ursuline }
    	set_character_flag = character_was_ursuline
    }
	if = {
    	limit = { religion = angeline }
    	set_character_flag = character_was_angeline
    }
	if = {
    	limit = { religion = confederated }
    	set_character_flag = character_was_confederated
    }
	if = {
    	limit = { religion = anabaptist }
    	set_character_flag = character_was_anabaptist
    }
	if = {
    	limit = { religion = evangelical }
    	set_character_flag = character_was_evangelical
    }
	if = {
    	limit = { religion = antinomian }
    	set_character_flag = character_was_antinomian
    }
	if = {
    	limit = { religion = charismatic }
    	set_character_flag = character_was_charismatic
    }
	if = {
    	limit = { religion = falling_star }
    	set_character_flag = character_was_falling_star
    }
	if = {
    	limit = { religion = high_church }
    	set_character_flag = character_was_high_church
    }
	if = {
    	limit = { religion = anglo_papalist }
    	set_character_flag = character_was_anglo_papalist
    }
	if = {
    	limit = { religion = united_church }
    	set_character_flag = character_was_united_church
    }
	if = {
    	limit = { religion = sacred_heart }
    	set_character_flag = character_was_sacred_heart
    }
	if = {
    	limit = { religion = gracia_divina }
    	set_character_flag = character_was_gracia_divina
    }
	if = {
    	limit = { religion = cetic }
    	set_character_flag = character_was_cetic
    }
	if = {
    	limit = { religion = gaian }
    	set_character_flag = character_was_gaian
    }
	if = {
    	limit = { religion = shinto }
    	set_character_flag = character_was_shinto
    }
	if = {
    	limit = { religion = nousthreskeia }
    	set_character_flag = character_was_nousthreskeia
    }
	if = {
    	limit = { religion = mormon }
    	set_character_flag = character_was_mormon
    }
	if = {
    	limit = { religion = bickertonite }
    	set_character_flag = character_was_bickertonite
    }
	if = {
    	limit = { religion = godbeite }
    	set_character_flag = character_was_godbeite
    }
	if = {
    	limit = { religion = strangite }
    	set_character_flag = character_was_strangite
    }
	if = {
    	limit = { religion = sol_invicta }
    	set_character_flag = character_was_sol_invicta
    }
	if = {
    	limit = { religion = mictlantec }
    	set_character_flag = character_was_mictlantec
    }
	if = {
    	limit = { religion = uahomche }
    	set_character_flag = character_was_uahomche
    }
	if = {
    	limit = { religion = neomayan }
    	set_character_flag = character_was_neomayan
    }
	if = {
    	limit = { religion = americanist }
    	set_character_flag = character_was_americanist
    }
	if = {
    	limit = { religion = hamiltonian }
    	set_character_flag = character_was_hamiltonian
    }
	if = {
    	limit = { religion = jeffersonian }
    	set_character_flag = character_was_jeffersonian
    }
	if = {
    	limit = { religion = libertarian }
    	set_character_flag = character_was_libertarian
    }
	if = {
    	limit = { religion = consumerist }
    	set_character_flag = character_was_consumerist
    }
	if = {
    	limit = { religion = atomicist }
    	set_character_flag = character_was_atomicist
    }
	if = {
    	limit = { religion = pagan }
    	set_character_flag = character_was_pagan
    }
	if = {
    	limit = { religion = revelationist_reformed }
    	set_character_flag = character_was_revelationist_reformed
    }
	if = {
    	limit = { religion = revelationist }
    	set_character_flag = character_was_revelationist
    }
	if = {
    	limit = { religion = rust_cultist_reformed }
    	set_character_flag = character_was_rust_cultist_reformed
    }
	if = {
    	limit = { religion = rust_cultist }
    	set_character_flag = character_was_rust_cultist
    }
	if = {
    	limit = { religion = occultist_reformed }
    	set_character_flag = character_was_occultist_reformed
    }
	if = {
    	limit = { religion = occultist }
    	set_character_flag = character_was_occultist
    }
	if = {
    	limit = { religion = thelemic_reformed }
    	set_character_flag = character_was_thelemic_reformed
    }
	if = {
    	limit = { religion = thelemic }
    	set_character_flag = character_was_thelemic
    }
	if = {
    	limit = { religion = norse_pagan_reformed }
    	set_character_flag = character_was_norse_pagan_reformed
    }
	if = {
    	limit = { religion = norse_pagan }
    	set_character_flag = character_was_norse_pagan
    }
	if = {
    	limit = { religion = brethren }
    	set_character_flag = character_was_brethren
    }
	if = {
    	limit = { religion = jewish }
    	set_character_flag = character_was_jewish
    }
	if = {
    	limit = { religion = reform }
    	set_character_flag = character_was_reform
    }
	if = {
    	limit = { religion = hindu }
    	set_character_flag = character_was_hindu
    }
	if = {
    	limit = { religion = celtic_pagan }
    	set_character_flag = character_was_celtic_pagan
    }
	if = {
    	limit = { religion = celtic_pagan_reformed }
    	set_character_flag = character_was_celtic_pagan_reformed
    }
}

clr_religion_char_flag_effect = {
    clr_character_flag = character_was_rastafarian
	clr_character_flag = character_was_voodoo
	clr_character_flag = character_was_santeria
	clr_character_flag = character_was_candomble
	clr_character_flag = character_was_espiritista
	clr_character_flag = character_was_espiritista_reformed
	clr_character_flag = character_was_ghost_dance
	clr_character_flag = character_was_raven_tales
	clr_character_flag = character_was_catholic
	clr_character_flag = character_was_neognostic
	clr_character_flag = character_was_sedevacantist
	clr_character_flag = character_was_ursuline
	clr_character_flag = character_was_angeline
	clr_character_flag = character_was_confederated
	clr_character_flag = character_was_anabaptist
	clr_character_flag = character_was_evangelical
	clr_character_flag = character_was_antinomian
	clr_character_flag = character_was_charismatic
	clr_character_flag = character_was_falling_star
	clr_character_flag = character_was_high_church
	clr_character_flag = character_was_anglo_papalist
	clr_character_flag = character_was_united_church
	clr_character_flag = character_was_sacred_heart
	clr_character_flag = character_was_gracia_divina
	clr_character_flag = character_was_cetic
	clr_character_flag = character_was_gaian
	clr_character_flag = character_was_shinto
	clr_character_flag = character_was_nousthreskeia
	clr_character_flag = character_was_mormon
	clr_character_flag = character_was_bickertonite
	clr_character_flag = character_was_godbeite
	clr_character_flag = character_was_strangite
	clr_character_flag = character_was_sol_invicta
	clr_character_flag = character_was_mictlantec
	clr_character_flag = character_was_uahomche
	clr_character_flag = character_was_neomayan
	clr_character_flag = character_was_americanist
	clr_character_flag = character_was_hamiltonian
	clr_character_flag = character_was_jeffersonian
	clr_character_flag = character_was_libertarian
	clr_character_flag = character_was_consumerist
	clr_character_flag = character_was_atomicist
	clr_character_flag = character_was_pagan
	clr_character_flag = character_was_revelationist_reformed
	clr_character_flag = character_was_revelationist
	clr_character_flag = character_was_rust_cultist_reformed
	clr_character_flag = character_was_rust_cultist
	clr_character_flag = character_was_occultist_reformed
	clr_character_flag = character_was_occultist
	clr_character_flag = character_was_thelemic_reformed
	clr_character_flag = character_was_thelemic
	clr_character_flag = character_was_norse_pagan_reformed
	clr_character_flag = character_was_norse_pagan
	clr_character_flag = character_was_celtic_pagan_reformed
	clr_character_flag = character_was_celtic_pagan
	clr_character_flag = character_was_brethren
	clr_character_flag = character_was_jewish
	clr_character_flag = character_was_reform
	clr_character_flag = character_was_hindu
}

event_target_old_religion_from_flag_effect = {
	if = {
    	limit = { has_character_flag = character_was_rastafarian }
    	random_character = {
    		limit = { religion = rastafarian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_voodoo }
    	random_character = {
    		limit = { religion = voodoo }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_santeria }
    	random_character = {
    		limit = { religion = santeria }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_candomble }
    	random_character = {
    		limit = { religion = candomble }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_espiritista }
    	random_character = {
    		limit = { religion = espiritista }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_espiritista_reformed }
    	random_character = {
    		limit = { religion = espiritista_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_americanist }
    	random_character = {
    		limit = { religion = americanist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_ghost_dance }
    	random_character = {
    		limit = { religion = ghost_dance }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_raven_tales }
    	random_character = {
    		limit = { religion = raven_tales }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_catholic }
    	random_character = {
    		limit = { religion = catholic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_neognostic }
    	random_character = {
    		limit = { religion = neognostic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sedevacantist }
    	random_character = {
    		limit = { religion = sedevacantist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_nestorian }
    	random_character = {
    		limit = { religion = nestorian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_ursuline }
    	random_character = {
    		limit = { religion = ursuline }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_angeline }
    	random_character = {
    		limit = { religion = angeline }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_confederated }
    	random_character = {
    		limit = { religion = confederated }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_anabaptist }
    	random_character = {
    		limit = { religion = anabaptist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_evangelical }
    	random_character = {
    		limit = { religion = evangelical }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_antinomian }
    	random_character = {
    		limit = { religion = antinomian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_charismatic }
    	random_character = {
    		limit = { religion = charismatic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_falling_star }
    	random_character = {
    		limit = { religion = falling_star }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_high_church }
    	random_character = {
    		limit = { religion = high_church }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_anglo_papalist }
    	random_character = {
    		limit = { religion = anglo_papalist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_united_church }
    	random_character = {
    		limit = { religion = united_church }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sacred_heart }
    	random_character = {
    		limit = { religion = sacred_heart }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_gracia_divina }
    	random_character = {
    		limit = { religion = gracia_divina }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_cetic }
    	random_character = {
    		limit = { religion = cetic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_gaian }
    	random_character = {
    		limit = { religion = gaian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_shinto }
    	random_character = {
    		limit = { religion = shinto }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_nousthreskeia }
    	random_character = {
    		limit = { religion = nousthreskeia }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_mormon }
    	random_character = {
    		limit = { religion = mormon }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_bickertonite }
    	random_character = {
    		limit = { religion = bickertonite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_godbeite }
    	random_character = {
    		limit = { religion = godbeite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_strangite }
    	random_character = {
    		limit = { religion = strangite }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_sol_invicta }
    	random_character = {
    		limit = { religion = sol_invicta }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_mictlantec }
    	random_character = {
    		limit = { religion = mictlantec }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_uahomche }
    	random_character = {
    		limit = { religion = uahomche }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_neomayan }
    	random_character = {
    		limit = { religion = neomayan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_americanist }
    	random_character = {
    		limit = { religion = americanist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_hamiltonian }
    	random_character = {
    		limit = { religion = hamiltonian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_jeffersonian }
    	random_character = {
    		limit = { religion = jeffersonian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_libertarian }
    	random_character = {
    		limit = { religion = libertarian }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_consumerist }
    	random_character = {
    		limit = { religion = consumerist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_atomicist }
    	random_character = {
    		limit = { religion = atomicist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_pagan }
    	random_character = {
    		limit = { religion = pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_revelationist_reformed }
    	random_character = {
    		limit = { religion = revelationist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_revelationist }
    	random_character = {
    		limit = { religion = revelationist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_rust_cultist_reformed }
    	random_character = {
    		limit = { religion = rust_cultist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_rust_cultist }
    	random_character = {
    		limit = { religion = rust_cultist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_occultist_reformed }
    	random_character = {
    		limit = { religion = occultist_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_occultist }
    	random_character = {
    		limit = { religion = occultist }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_thelemic_reformed }
    	random_character = {
    		limit = { religion = thelemic_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_thelemic }
    	random_character = {
    		limit = { religion = thelemic }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_norse_pagan_reformed }
    	random_character = {
    		limit = { religion = norse_pagan_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_norse_pagan }
    	random_character = {
    		limit = { religion = norse_pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_celtic_pagan }
    	random_character = {
    		limit = { religion = celtic_pagan }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_celtic_pagan_reformed }
    	random_character = {
    		limit = { religion = celtic_pagan_reformed }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_brethren }
    	random_character = {
    		limit = { religion = brethren }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_jewish }
    	random_character = {
    		limit = { religion = jewish }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_reform }
    	random_character = {
    		limit = { religion = reform }
    		save_event_target_as = old_religion
    	}
    }
	if = {
    	limit = { has_character_flag = character_was_hindu }
    	random_character = {
    		limit = { religion = hindu }
    		save_event_target_as = old_religion
    	}
    }
}

flip_secret_religious_community_provinces = {
	trigger_switch = {
		on_trigger = society_member_of
		secret_religious_society_rastafarian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rastafarian_community
					}
					religion = rastafarian
					remove_province_modifier = secret_rastafarian_community
				}
			}
		}
		secret_religious_society_voodoo = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_voodoo_community
					}
					religion = voodoo
					remove_province_modifier = secret_voodoo_community
				}
			}
		}
		secret_religious_society_santeria = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_santeria_community
					}
					religion = santeria
					remove_province_modifier = secret_santeria_community
				}
			}
		}
		secret_religious_society_candomble = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_candomble_community
					}
					religion = candomble
					remove_province_modifier = secret_candomble_community
				}
			}
		}
		secret_religious_society_espiritista = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_espiritista_community
					}
					religion = espiritista
					remove_province_modifier = secret_espiritista_community
				}
			}
		}
		secret_religious_society_espiritista_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_espiritista_reformed_community
					}
					religion = espiritista_reformed
					remove_province_modifier = secret_espiritista_reformed_community
				}
			}
		}
		secret_religious_society_ghost_dance = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_ghost_dance_community
					}
					religion = ghost_dance
					remove_province_modifier = secret_ghost_dance_community
				}
			}
		}
		secret_religious_society_raven_tales = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_raven_tales_community
					}
					religion = raven_tales
					remove_province_modifier = secret_raven_tales_community
				}
			}
		}
		secret_religious_society_catholic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_catholic_community
					}
					religion = catholic
					remove_province_modifier = secret_catholic_community
				}
			}
		}
		secret_religious_society_neognostic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_neognostic_community
					}
					religion = neognostic
					remove_province_modifier = secret_neognostic_community
				}
			}
		}
		secret_religious_society_sedevacantist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sedevacantist_community
					}
					religion = sedevacantist
					remove_province_modifier = secret_sedevacantist_community
				}
			}
		}
		secret_religious_society_nestorian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_nestorian_community
					}
					religion = nestorian
					remove_province_modifier = secret_nestorian_community
				}
			}
		}
		secret_religious_society_ursuline = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_ursuline_community
					}
					religion = ursuline
					remove_province_modifier = secret_ursuline_community
				}
			}
		}
		secret_religious_society_angeline = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_angeline_community
					}
					religion = angeline
					remove_province_modifier = secret_angeline_community
				}
			}
		}
		secret_religious_society_confederated = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_confederated_community
					}
					religion = confederated
					remove_province_modifier = secret_confederated_community
				}
			}
		}
		secret_religious_society_anabaptist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_anabaptist_community
					}
					religion = anabaptist
					remove_province_modifier = secret_anabaptist_community
				}
			}
		}
		secret_religious_society_evangelical = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_evangelical_community
					}
					religion = evangelical
					remove_province_modifier = secret_evangelical_community
				}
			}
		}
		secret_religious_society_antinomian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_antinomian_community
					}
					religion = antinomian
					remove_province_modifier = secret_antinomian_community
				}
			}
		}
		secret_religious_society_charismatic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_charismatic_community
					}
					religion = charismatic
					remove_province_modifier = secret_charismatic_community
				}
			}
		}
		secret_religious_society_falling_star = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_falling_star_community
					}
					religion = falling_star
					remove_province_modifier = secret_falling_star_community
				}
			}
		}
		secret_religious_society_high_church = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_high_church_community
					}
					religion = high_church
					remove_province_modifier = secret_high_church_community
				}
			}
		}
		secret_religious_society_anglo_papalist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_anglo_papalist_community
					}
					religion = anglo_papalist
					remove_province_modifier = secret_anglo_papalist_community
				}
			}
		}
		secret_religious_society_united_church = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_united_church_community
					}
					religion = united_church
					remove_province_modifier = secret_united_church_community
				}
			}
		}
		secret_religious_society_sacred_heart = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sacred_heart_community
					}
					religion = sacred_heart
					remove_province_modifier = secret_sacred_heart_community
				}
			}
		}
		secret_religious_society_gracia_divina = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_gracia_divina_community
					}
					religion = gracia_divina
					remove_province_modifier = secret_gracia_divina_community
				}
			}
		}
		secret_religious_society_cetic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_cetic_community
					}
					religion = cetic
					remove_province_modifier = secret_cetic_community
				}
			}
		}
		secret_religious_society_gaian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_gaian_community
					}
					religion = gaian
					remove_province_modifier = secret_gaian_community
				}
			}
		}
		secret_religious_society_shinto = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_shinto_community
					}
					religion = shinto
					remove_province_modifier = secret_shinto_community
				}
			}
		}
		secret_religious_society_nousthreskeia = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_nousthreskeia_community
					}
					religion = nousthreskeia
					remove_province_modifier = secret_nousthreskeia_community
				}
			}
		}
		secret_religious_society_mormon = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_mormon_community
					}
					religion = mormon
					remove_province_modifier = secret_mormon_community
				}
			}
		}
		secret_religious_society_bickertonite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_bickertonite_community
					}
					religion = bickertonite
					remove_province_modifier = secret_bickertonite_community
				}
			}
		}
		secret_religious_society_godbeite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_godbeite_community
					}
					religion = godbeite
					remove_province_modifier = secret_godbeite_community
				}
			}
		}
		secret_religious_society_strangite = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_strangite_community
					}
					religion = strangite
					remove_province_modifier = secret_strangite_community
				}
			}
		}
		secret_religious_society_sol_invicta = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sol_invicta_community
					}
					religion = sol_invicta
					remove_province_modifier = secret_sol_invicta_community
				}
			}
		}
		secret_religious_society_mictlantec = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_mictlantec_community
					}
					religion = mictlantec
					remove_province_modifier = secret_mictlantec_community
				}
			}
		}
		secret_religious_society_uahomche = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_uahomche_community
					}
					religion = uahomche
					remove_province_modifier = secret_uahomche_community
				}
			}
		}
		secret_religious_society_neomayan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_neomayan_community
					}
					religion = neomayan
					remove_province_modifier = secret_neomayan_community
				}
			}
		}
		secret_religious_society_americanist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_americanist_community
					}
					religion = americanist
					remove_province_modifier = secret_americanist_community
				}
			}
		}
		secret_religious_society_hamiltonian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hamiltonian_community
					}
					religion = hamiltonian
					remove_province_modifier = secret_hamiltonian_community
				}
			}
		}
		secret_religious_society_jeffersonian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jeffersonian_community
					}
					religion = jeffersonian
					remove_province_modifier = secret_jeffersonian_community
				}
			}
		}
		secret_religious_society_libertarian = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_libertarian_community
					}
					religion = libertarian
					remove_province_modifier = secret_libertarian_community
				}
			}
		}
		secret_religious_society_consumerist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_consumerist_community
					}
					religion = consumerist
					remove_province_modifier = secret_consumerist_community
				}
			}
		}
		secret_religious_society_atomicist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_atomicist_community
					}
					religion = atomicist
					remove_province_modifier = secret_atomicist_community
				}
			}
		}
		secret_religious_society_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_pagan_community
					}
					religion = pagan
					remove_province_modifier = secret_pagan_community
				}
			}
		}
		secret_religious_society_revelationist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_revelationist_reformed_community
					}
					religion = revelationist_reformed
					remove_province_modifier = secret_revelationist_reformed_community
				}
			}
		}
		secret_religious_society_revelationist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_revelationist_community
					}
					religion = revelationist
					remove_province_modifier = secret_revelationist_community
				}
			}
		}
		secret_religious_society_rust_cultist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rust_cultist_reformed_community
					}
					religion = rust_cultist_reformed
					remove_province_modifier = secret_rust_cultist_reformed_community
				}
			}
		}
		secret_religious_society_rust_cultist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_rust_cultist_community
					}
					religion = rust_cultist
					remove_province_modifier = secret_rust_cultist_community
				}
			}
		}
		secret_religious_society_occultist_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_occultist_reformed_community
					}
					religion = occultist_reformed
					remove_province_modifier = secret_occultist_reformed_community
				}
			}
		}
		secret_religious_society_occultist = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_occultist_community
					}
					religion = occultist
					remove_province_modifier = secret_occultist_community
				}
			}
		}
		secret_religious_society_thelemic_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_thelemic_reformed_community
					}
					religion = thelemic_reformed
					remove_province_modifier = secret_thelemic_reformed_community
				}
			}
		}
		secret_religious_society_thelemic = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_thelemic_community
					}
					religion = thelemic
					remove_province_modifier = secret_thelemic_community
				}
			}
		}
		secret_religious_society_norse_pagan_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_reformed_community
					}
					religion = norse_pagan_reformed
					remove_province_modifier = secret_norse_pagan_reformed_community
				}
			}
		}
		secret_religious_society_norse_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_community
					}
					religion = norse_pagan
					remove_province_modifier = secret_norse_pagan_community
				}
			}
		}
		secret_religious_society_celtic_pagan = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_celtic_pagan_community
					}
					religion = celtic_pagan
					remove_province_modifier = secret_celtic_pagan_community
				}
			}
		}
		secret_religious_society_celtic_pagan_reformed = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_celtic_pagan_reformed_community
					}
					religion = celtic_pagan_reformed
					remove_province_modifier = secret_celtic_pagan_reformed_community
				}
			}
		}
		secret_religious_society_brethren = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_brethren_community
					}
					religion = brethren
					remove_province_modifier = secret_brethren_community
				}
			}
		}
		secret_religious_society_jewish = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jewish_community
					}
					religion = jewish
					remove_province_modifier = secret_jewish_community
				}
			}
		}
		secret_religious_society_reform = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_reform_community
					}
					religion = reform
					remove_province_modifier = secret_reform_community
				}
			}
		}
		secret_religious_society_hindu = {
			ROOT = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hindu_community
					}
					religion = hindu
					remove_province_modifier = secret_hindu_community
				}
			}
		}
	}
}

##DEVIL WORSHIPPER##
join_from_devil_worshiper_society_effect = {
	FROM = {
		if = {
			limit = {
				society_member_of = the_satanists
			}
			ROOT = {
				join_society = the_satanists
			}
		}
		if = {
			limit = {
				society_member_of = the_plaguebringers
			}
			ROOT = {
				join_society = the_plaguebringers
			}
		}
		if = {
			limit = {
				society_member_of = the_cult_of_kali
			}
			ROOT = {
				join_society = the_cult_of_kali
			}
		}
		if = {
			limit = {
				society_member_of = the_trollcrafters
			}
			ROOT = {
				join_society = the_trollcrafters
			}
		}
		if = {
			limit = {
				society_member_of = the_illuminati
			}
			ROOT = {
				join_society = the_illuminati
			}
		}
		if = {
			limit = {
				society_member_of = the_epa
			}
			ROOT = {
				join_society = the_epa
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_cortez
			}
			ROOT = {
				join_society = cult_of_cortez
			}
		}
		if = {
			limit = {
				society_member_of = bohemian_grove
			}
			ROOT = {
				join_society = bohemian_grove
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_cortez
			}
			ROOT = {
				join_society = cult_of_cortez
			}
		}
		if = {
			limit = {
				society_member_of = davy_jones_mates
			}
			ROOT = {
				join_society = davy_jones_mates
			}
		}
		if = {
			limit = {
				society_member_of = starry_wisdom
			}
			ROOT = {
				join_society = starry_wisdom
			}
		}
		if = {
			limit = {
				society_member_of = unseelie_petitioners
			}
			ROOT = {
				join_society = unseelie_petitioners
			}
		}
	}
}

clean_up_after_leaving_society_effect = {
	hidden_effect = {
		clr_character_flag = do_not_disturb
		remove_character_modifier = quest_cooldown_timer
		
		#Powers, Missions and Interactions: the Assassins
		quest_the_assassins_assassination
		quest_the_assassins_collect_debt
		quest_the_assassins_convert_province
		quest_the_assassins_occupy_holding
		quest_the_assassins_protege
		clr_character_flag = ongoing_recruitment
		clr_character_flag = approves_of_americanist
		clr_character_flag = disapproves_of_americanist
		clr_character_flag = willing_to_join
		clr_character_flag = unwilling_to_join
		clr_character_flag = assassins_attempted_recruitment
		clr_character_flag = escape_successful
		clr_character_flag = escape_injured
		clr_character_flag = escape_death
		clr_character_flag = escape_bribe 
		
		#Powers, Missions and Interactions: Devil Worshipers
		clr_character_flag = attempted_corrupt_priest
		clr_character_flag = possessing_courtier
		clr_character_flag = desecration_in_progress
		clr_character_flag = desecration_violent
		clr_character_flag = desecration_at_home
		clr_character_flag = desecration_plotting
		clr_character_flag = approves_of_satanism
		clr_character_flag = disapproves_of_satanism
		clr_character_flag = has_ill_lover_loc
		clr_character_flag = has_ill_spouse_loc
		clr_character_flag = has_ill_child_loc
		clr_character_flag = has_money_troubles_loc
		clr_character_flag = has_some_illness_loc
		clr_character_flag = has_need_of_winning_battles_loc
		clr_character_flag = has_a_rival_loc
		clr_character_flag = is_weak_loc
		clr_character_flag = is_dumb_loc
		clr_character_flag = being_recruited_by_the_satanists
		clr_character_flag = being_recruited_by_the_trollcrafters
		clr_character_flag = being_recruited_by_the_cult_of_kali
		clr_character_flag = being_recruited_by_the_plaguebringers
		clr_character_flag = being_recruited_by_the_illuminati
		clr_character_flag = being_recruited_by_the_epa
		clr_character_flag = being_recruited_by_cult_of_cortez
		clr_character_flag = being_recruited_by_bohemian_grove
		clr_character_flag = being_recruited_by_davy_jones_mates
		clr_character_flag = being_recruited_by_starry_wisdom
		clr_character_flag = being_recruited_by_the_unseelie

		#Powers, Missions and Interactions: Secret Religious	
		clr_character_flag = sr_too_honest
	    clr_character_flag = sr_too_wroth
	    clr_character_flag = sr_too_slothful
	    clr_character_flag = sr_too_trusting
	    clr_character_flag = sr_too_indiscreet
	    clr_character_flag = free_help
	    clr_character_flag = help_for_cost
		clr_character_flag = conduct_secret_ceremony_timer
		remove_character_modifier = attempting_to_blend_in
		clr_character_flag = blending_in_timer
		clr_character_flag = attempting_to_convince_stubborn_courtier
	    clr_character_flag = attempting_to_convince_concerned_friend
	    clr_character_flag = blend_in_struggled_with_trait
	    clr_character_flag = blend_in_attended_house_of_worship
	    clr_character_flag = blend_in_general_progress
		#quest_secret_religious_societies_induct_ruler
		#quest_secret_religious_societies_sympathy_ruler
		
		#Powers, Missions and Interactions: Monastic orders
		clr_character_flag = monastic_orders_holy_seclusion
		clr_character_flag = monastic_orders_mission_charity
		clr_character_flag = monastic_orders_mission_theology
 		clr_character_flag = monastic_orders_mission_christian_pilgrimage
		clr_character_flag = monastic_orders_mission_dharmic_pilgrimage
		clr_character_flag = monastic_orders_mission_mormon_pilgrimage
		clr_character_flag = monastic_orders_mission_temple
		clr_character_flag = ascetic_arriving
		clr_character_flag = monastic_artifact_lover
		clr_character_flag = monastic_artifact_seamless_robe_of_jesus
		clr_character_flag = monastic_artifact_crown_of_thorns
		clr_character_flag = monastic_artifact_fragment_of_true_cross
		clr_character_flag = monastic_artifact_holy_foreskin
		clr_character_flag = monastic_artifact_image_of_edessa
		clr_character_flag = monastic_artifact_elaborate_danda
		clr_character_flag = monastic_artifact_sariraka_actual_body_part
		clr_character_flag = monastic_artifact_sarira
		clr_character_flag = suggestion_A_flag
		clr_character_flag = suggestion_B_flag
		clr_character_flag = 3264_deceitful_flag
		clr_character_flag = 3264_publish_flag
		clr_character_flag = 3264_depressed_flag
		clr_character_flag = 3264_deceitful_flag
		clr_character_flag = 4202_visit_monastery_flag
		clr_character_flag = 4202_hire_someone_flag
		clr_character_flag = 4202_send_my_own_samples_flag
		clr_character_flag = 4212_woke_them_up_flag
		clr_character_flag = 4212_let_them_sleep_flag
		clr_character_flag = 4212_pranked_them_flag
		remove_character_modifier = in_meditation
		remove_character_modifier = doing_penance
		clr_character_flag = holy_seclusion_timer
		clr_character_flag = holy_seclusion_struggled_with_vice
		clr_character_flag = holy_seclusion_lustful
		clr_character_flag = holy_seclusion_gluttonous
		clr_character_flag = holy_seclusion_greedy
		clr_character_flag = holy_seclusion_slothful
		clr_character_flag = holy_seclusion_struggled_with_loneliness
		clr_character_flag = holy_seclusion_scripture_reading
		clr_character_flag = holy_seclusion_scripture_reading
		clr_character_flag = holy_seclusion_interrupting_child
		clr_character_flag = success_seculison_desc_A
		clr_character_flag = success_seculison_desc_B
		clr_character_flag = success_seculison_desc_C

		#Powers, Missions and Interactions: Hermetics
		clr_character_flag = power_hungry_scrying_flag
		clr_character_flag = relationship_focused_scrying_flag
		clr_character_flag = battle_focused_scrying_flag
		remove_character_modifier = writing_magnum_opus
		remove_character_modifier = acquire_ingredients_decision_cooldown_timer
		clr_character_flag = building_laboratory
		clr_character_flag = decided_on_glass
		clr_character_flag = decided_on_crucibles
		clr_character_flag = decided_on_tools
		clr_character_flag = decided_on_books
		clr_character_flag = bribed_guards
		clr_character_flag = guards_wake_up
		clr_character_flag = distraction_failed
		clr_character_flag = caught_stealing
		clr_character_flag = caught_destroying
		remove_scrying_omen_modifiers_effect = yes
		clr_character_flag = lab_destruction
		clr_character_flag = lab_damage
		clr_character_flag = lab_explosion_death
		
		#Powers, missions, and interactions: Bankers
		clr_character_flag = forgave_debtor
		remove_character_modifier = weak_banker
		clr_character_flag = shares_100
		clr_character_flag = shares_200
		clr_character_flag = shares_400
		clr_character_flag = shares_600
		clr_character_flag = shares_800
		clr_character_flag = shares_100
		clr_character_flag = shares_selling
		remove_character_modifier = shares_sold
		remove_character_modifier = building_subsidies
		remove_character_modifier = invested_research
		remove_character_modifier = increased_prosperity
		clr_character_flag = banking_society_mission_business
		clr_character_flag = banking_society_mission_collect_debt
		clr_character_flag = banking_society_mission_city
		clr_character_flag = banking_society_make_investment
		quest_banking_society_business_focus
		quest_banking_society_collect_debt
		quest_banking_society_city_construction
		remove_character_modifier = strong_banker
	}
}

increase_visibility_minor_effect = {
	#custom_tooltip = { text = debug_vis }
	hidden_effect = {
		change_variable = { which = visibility_value value = 2 } 
		if = {
			limit = {
				check_variable = { which = visibility_value value = 15 }
				NOR = {
					has_character_modifier = under_suspicion
					has_character_modifier = highly_suspect
				}
			}
			add_character_modifier = {
				name = under_suspicion
				duration = -1
			}
			character_event = { id = MNM.6662 days = 1 }
		}
		if = {
			limit = {
				check_variable = { which = visibility_value value = 25 }
				NOT = {
					has_character_modifier = highly_suspect
				}
			}
			remove_character_modifier = under_suspicion
			add_character_modifier = {
				name = highly_suspect duration = -1 
			}
			character_event = { id = MNM.6663 days = 1 }
			liege = {
				set_character_flag = secret_societies_interference
				character_event = { id = MNM.6661 days = 1095 random = 1095 }
			}
		}
		if = { # Too visible? You auto-reveal yourself if you are independent
			limit = {
				independent = yes
				is_ruler = yes
				check_variable = { which = visibility_value value = 40 }
				NOT = {
					has_character_flag = self_reveal
				}
			}
			set_character_flag = self_reveal
			if = {
				limit = {
					is_devil_worshiper_trigger = yes
				}
				add_character_modifier = {
					name = known_satanist
					duration = -1
				}
			}
			if = {
				limit = {
					is_devil_worshiper_trigger = no
				}
				add_character_modifier = {
					name = accused_apostate
					duration = -1
				}
			}
			if = {
				limit = {
					controls_religion = no
					OR = {
						religion = catholic
						religion = ursuline
						religion = confederated
						religion = evangelical
						religion = high_church
						religion = mormon
						religion = americanist
						religion = libertarian
						religion = anabaptist
					}
				}
				add_trait = excommunicated
			}
			character_event = { id = MNM.6668 days = 1 }
		}
	}
}

##MEN IN BLACK/ASSASSINS##

pay_back_assassins_effect = {
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 50 } }
		wealth = -50
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 50
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 250 } }
		wealth = -250	
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 250
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 300 } }
		wealth = -300
		hidden_tooltip = {
			event_target:grand_master  = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 300
				}
			}
		}
	}
	if = {
		limit = { is_variable_equal = { which = assassins_debt value = 500 } }
		wealth = -500
		hidden_tooltip = {
			event_target:grand_master = {
				if = {
					limit = {
						ai = yes
						primary_title = { title = d_men_in_black } 
					}
					wealth = 500
				}
			}
		}
	}
}

monastic_order_purity_effect = {
	if = {
		limit = {
			is_monastic_member_trigger = yes
			OR = {
				trait = cynical
				trait = gluttonous
				trait = greedy
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
				trait = deceitful
				trait = cruel
				AND = {
					trait = lustful
					NOT = { religion = hindu }
					NOT = { religion_group = jewish_group }
				}
				trait = ambitious
				NOT = { trait = humble }
				NOT = { trait = charitable }
				NOT = { trait = kind }
				NOT = { trait = temperate }
				NOT = { trait = honest }
				NAND = {
					trait = chaste
					NOT = { religion = hindu }
					NOT = { religion_group = jewish_group }
				}
				NOT = { trait = patient }
				NOT = { trait = diligent }
				NOT = { trait = content }
			}
		}

		random = {
			chance = 20
			modifier = {
				factor = 1.3
				society_rank == 2
			}
			modifier = {
				factor = 1.5
				society_rank == 3
			}
			modifier = {
				factor = 1.7
				society_rank == 4
			}
			modifier = {
				factor = 1.1
				piety = 100
			}
			modifier = {
				factor = 1.3
				piety = 300
			}
			modifier = {
				factor = 1.5
				piety = 500
			}
			modifier = {
				factor = 2
				piety = 1000
			}
			character_event = { id = MNM.4400 days = 10 random = 10 }
		}
	}
}

join_prev_monastic_order_society = {
	if = {
		limit = { PREV = { society_member_of = monastic_order_evangelical } }
		join_society = monastic_order_evangelical
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_benedictine } }
		join_society = monastic_order_benedictine
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_dominican } }
		join_society = monastic_order_dominican
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_leibowitz } }
		join_society = monastic_order_leibowitz
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_ursuline } }
		join_society = monastic_order_ursuline
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_mormon } }
		join_society = monastic_order_mormon
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_hindu } }
		join_society = monastic_order_hindu
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_jewish } }
		join_society = monastic_order_jewish
	}
	if = {
		limit = { PREV = { society_member_of = monastic_order_cetic } }
		join_society = monastic_order_cetic
	}
	if = {
		limit = {
			religion = celtic_pagan_reformed
		}
		add_trait = lughs_own
	}
}

join_prev_banking_society = {
	join_society = banking_society
	scaled_wealth = -0.50
}

spawn_good_commander_effect = {
	create_random_soldier = {
		random_traits = yes
		dynasty = random
		female = no
		attributes = {
			diplomacy = 2
			learning = 2
			stewardship = 2
			intrigue = 2
			martial = 8
		}
	}
	new_character = {
		character_event = { id = misc.3 } # Diversity

		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		
		random_list = { # Flavor Randomization
			35 = { 
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = { 
				add_trait = shrewd
			}
		}
		set_character_flag = invited_soldier
		save_event_target_as = invited_character
	}
}