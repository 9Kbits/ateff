namespace=HF

character_event = { # Spawn Great Conquerors in Shattered Worlds
	id = HF.1

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes

	trigger = {
		is_shattered_world = yes
		is_save_game = no
		NOT = {
			has_alternate_start_setting = {
				setting = shattered_conquerors
				option = off
			}
		}
		NOT = {
			has_global_flag = conquerors_setup
		}
	}

	immediate = {
		set_global_flag = conquerors_setup
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_few
				}
			}
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_normal
				}
			}
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_many
				}
			}
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
			shattered_conqueror_spawn_effect = yes
		}
	}
}

character_event = { # Succession Laws in shattered worlds
	id = HF.2

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes

	trigger = {
		is_shattered_world = yes
		is_save_game = no
		NOT = {
			has_alternate_start_setting = {
				setting = shattered_succession
				option = default_laws
			}
		}
		NOT = {
			has_global_flag = succession_setup
		}
	}

	immediate = {
		set_global_flag = succession_setup
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_primogeniture
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = primogeniture
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = primogeniture
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_gavelkind
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = gavelkind
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = gavelkind
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_elective_gavelkind
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = elective_gavelkind
						voting_rules = elective_gavelkind
					}
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = elective_gavelkind
						voting_rules = elective_gavelkind
					}
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_elective
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = feudal_elective
						voting_rules = feudal_elective
					}
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = feudal_elective
						voting_rules = feudal_elective
					}
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_seniority
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = seniority
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = seniority
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_ultimogeniture
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = ultimogeniture
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = ultimogeniture
				}
			}
		}
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_tanistry
				}
			}
			if = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = tanistry
						voting_rules = tanistry
					}
				}
			}
			any_playable_ruler = {
				limit = {
					is_landed = yes
					OR = {
						is_feudal = yes
						is_tribal = yes
					}
				}
				any_demesne_title = {
					succession = {
						base_type = tanistry
						voting_rules = tanistry
					}
				}
			}
		}
	}
}

narrative_event = { # Activate GHW's and holy orders when running randomized rel names
	id = HF.3
	title = HF_3_TIT
	desc = HF_3_DESC
	picture = GFX_evt_crusaders
	border = GFX_event_narrative_frame_religion
	is_triggered_only = yes
	major = yes
	
	only_playable = yes
	ai = yes
	
	hide_new = yes

	trigger = {
		year = 2700
		controls_religion = yes
		is_alternate_start = yes
		has_alternate_start_parameter = {
			key = religion_names
			value = random
		}
		NOT = {
			has_global_flag = ghw_activated
		}
		any_independent_ruler = {
			count = 5
			is_landed = yes
			higher_tier_than = DUKE
		}
	}

	immediate = {
		set_global_flag = ghw_activated
		set_global_flag = christian_crusades_unlocked
		set_global_flag = ursuline_crusades_unlocked
		#set_global_flag = liberation_wars_unlocked #Disabled till these get fixed
		set_global_flag = mormon_expeditions_unlocked
		set_global_flag = pagan_ghws_unlocked
		
				
		set_global_flag = assassins_founded
		activate_title = { title = d_men_in_black status = yes }
		create_character = {
			random_traits = no
			name = "Hoover"
			dynasty = random
			religion = americanist
			culture = beltway
			female = no
			age = 40
			attributes = {
				martial = 6
				diplomacy = 8
				stewardship = 9
				intrigue = 12
				learning = 12
			}
			health = 6
			fertility = 0.8
			trait = elusive_shadow
			trait = patient
			trait = zealous
			trait = scholar
			trait = chaste
			trait = temperate
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			set_character_flag = hassan_the_assassin
			wealth = 500
			add_artifact = old_world_shades
			d_men_in_black = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_followers_arjuna status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = hindu
			culture = guyanese
			female = no
			age = 33
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_followers_arjuna = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_golden_bears status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = cetic
			culture = bayfolk
			female = no
			age = 33
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_golden_bears = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_judah_lions status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = rastafarian
			culture = west_indian
			female = no
			age = 33
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_judah_lions = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_knights_of_columbus status = yes }
		create_random_soldier = {
			dynasty = none
			random_traits = yes
			religion = catholic
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			d_knights_of_columbus = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_knights_of_peter_claver status = yes }
		create_random_soldier = {
			dynasty = none
			random_traits = yes
			religion = catholic
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			d_knights_of_peter_claver = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_st_ursulas_chosen status = yes }
		create_random_soldier = {
			dynasty = none
			female = yes
			random_traits = yes
			religion = catholic
		}
		new_character = {
			d_st_ursulas_chosen = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_lebanon_brethren status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = anabaptist
			culture = deitsch
			female = no
			age = 31
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_lebanon_brethren = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_uel status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = confederated
			culture = ontarian
			female = no
			age = 31
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_uel = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_oppenheimer status = yes }
		create_character = {
			random_traits = no
			name = "Julius"
			dynasty = random
			religion = atomicist
			culture = arixan
			female = no
			age = 25
			attributes = {
				martial = 10
				diplomacy = 9
				stewardship = 9
				intrigue = 7
				learning = 9
			}
			health = 6
			fertility = 0.5
			trait = brilliant_strategist
			trait = patient
			trait = zealous
			trait = scholar
			trait = temperate
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_oppenheimer = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_national_cathedral status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = evangelical
			culture = beltway
			female = no
			age = 31
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_national_cathedral = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_saint_expedit status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = voodoo
			culture = creole
			female = no
			age = 33
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_saint_expedit = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_followers_ogun status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = santeria
			culture = afrocubano
			female = no
			age = 27
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_followers_ogun = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_shomrim status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = jewish
			culture = yiddish
			female = no
			age = 29
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_shomrim = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_golden_archers status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = consumerist
			female = no
			age = 31
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			wealth = 500
			d_golden_archers = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		activate_title = { title = d_nauvoo_legion status = yes }
		create_character = {
			random_traits = no
			dynasty = random
			religion = mormon
			culture = utahn
			female = no
			age = 31
			trait = brilliant_strategist
			trait = zealous
			trait = humble
			trait = ambitious
			trait = strategist
			trait = holy_warrior
		}
		new_character = {
			wealth = 500
			d_nauvoo_legion = {
				grant_title = PREV
			}
			set_government_type = feudal_government
		}
		
		#set_global_flag = army_light_founded
		#activate_title = { title = d_army_light status = yes }
		#create_character = {
		#	random_traits = yes
		#	religion = manichean
		#	culture = persian
		#	dynasty = NONE
		#	female = no
		#	age = 34
		#	trait = skilled_tactician
		#}
		#new_character = {
		#	d_army_light = {
		#		grant_title = PREV
		#	}
		#	set_government_type = feudal_government
		#}
	}
	
	option = {
		name = INTERESTING
		custom_tooltip = {
			text = HF_3_TOOLTIP
		}
	}
}

character_event = { # Alternate Start general maintenance
	id = HF.5

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes

	trigger = {
		is_alternate_start = yes
		is_save_game = no
		NOT = {
			has_global_flag = general_maintenance_performed
		}
	}

	immediate = {
		set_global_flag = general_maintenance_performed
		
		if = {
			limit = {
				has_alternate_start_parameter = {
					key = culture_names
					value = random
				}
			}
			d_breton_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_sardinian_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_lombard_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_swiss_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_catalan_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_saxon_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_cuman_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_rus_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_finnish_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_lappish_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_lithuanian_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_abyssinian_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_nubian_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_scottish_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_irish_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_alan_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_pecheneg_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_bulgarian_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_turkic_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_ghanan_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_jurchen_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_tamil_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_marathi_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_bengal_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_rajput_band = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_sunni_turkic_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_shiite_turkic_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_sunni_cuman_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_sunni_berber_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_sunni_bedouin_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_shiite_cuman_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_shiite_berber_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_shiite_bedouin_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_catalan_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_navarrese_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_swiss_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_breton_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_sardinian_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_cuman_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_rus_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_pecheneg_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_bulgarian_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY"
				adjective="ALT_MERC_COMPANY_ADJ"
				set_random_coa_effect = yes
			}
			d_turkic_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_victual_brothers = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_varangian_guard = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_mamluks = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_ghilman = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_persian_caravan_guards = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_silk_road_sentinels = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_turkic_guard = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_white_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_great_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_company_of_st_george = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_star_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_little_hat_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_rose_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_marathi_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_bengal_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_rajput_company = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_han_massive = {
				set_random_coa_effect = yes
			}
			d_han_large = {
				set_random_coa_effect = yes
			}
			d_han_mid = {
				set_random_coa_effect = yes
			}
			d_han_mid_low = {
				set_random_coa_effect = yes
			}
			d_outlaws_of_the_marsh = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_han_low = {
				set_random_coa_effect = yes
			}
			d_han_tiny_1 = {
				set_random_coa_effect = yes
			}
			d_han_tiny_2 = {
				set_random_coa_effect = yes
			}
			## African
			d_african_massive = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_COMPANY_ALT"
				adjective="ALT_MERC_COMPANY_ALT_ADJ"
				set_random_coa_effect = yes
			}
			d_african_large = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_african_mid = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BROTHERS"
				adjective="ALT_MERC_BROTHERS_ADJ"
				set_random_coa_effect = yes
			}
			d_african_mid_low_1 = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_african_mid_low_2 = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_african_low = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_african_tiny = {
				set_random_coa_effect = yes
			}
			# Tangut
			d_tangut_low = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_bodpa_low = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_BAND"
				adjective="ALT_MERC_BAND_ADJ"
				set_random_coa_effect = yes
			}
			d_venetian_navy = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_genoese_navy = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_hanseatic_navy = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_frisian_navy = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_maghreb_corsairs = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_han_junks = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
			d_jurchen_corsairs = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_name="ALT_MERC_NAVY"
				adjective="ALT_MERC_NAVY_ADJ"
				set_random_coa_effect = yes
			}
		}
		# Set appropriate CoAs for all rel head titles
		if = {
			limit = {
				catholic = {
					is_name_randomized = yes
				}
			}
			k_papal_state = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				orthodox = {
					is_name_randomized = yes
				}
			}
			k_orthodox = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				sunni = {
					is_name_randomized = yes
				}
			}
			d_sunni = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				shiite = {
					is_name_randomized = yes
				}
			}
			d_shiite = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				miaphysite = {
					is_name_randomized = yes
				}
			}
			d_miaphysite = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				monophysite = {
					is_name_randomized = yes
				}
			}
			d_monophysite = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				nestorian = {
					is_name_randomized = yes
				}
			}
			d_nestorian = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				paulician = {
					is_name_randomized = yes
				}
			}
			d_paulician = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				monothelite = {
					is_name_randomized = yes
				}
			}
			d_monothelite = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				fraticelli = {
					is_name_randomized = yes
				}
			}
			d_fraticelli = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				iconoclast = {
					is_name_randomized = yes
				}
			}
			d_iconoclast = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				yazidi = {
					is_name_randomized = yes
				}
			}
			d_yazidi = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				ibadi = {
					is_name_randomized = yes
				}
			}
			d_ibadi = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				kharijite = {
					is_name_randomized = yes
				}
			}
			d_kharijite = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				hurufi = {
					is_name_randomized = yes
				}
			}
			d_hurufi = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				tengri_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_tengri_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				baltic_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_baltic_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				finnish_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_finnish_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				slavic_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_slavic_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				aztec_reformed = {
					is_name_randomized = yes
				}
			}
			d_aztec_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				west_african_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_west_african_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				zun_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_zun_pagan_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				zoroastrian = {
					is_name_randomized = yes
				}
			}
			d_zoroastrian = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				jewish = {
					is_name_randomized = yes
				}
			}
			d_jewish = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				bon_reformed = {
					is_name_randomized = yes
				}
			}
			d_bon_reformed = {
				set_random_coa_effect = yes
			}
		}
		if = {
			limit = {
				manichean = {
					is_name_randomized = yes
				}
			}
			d_manichean = {
				set_random_coa_effect = yes
			}
		}
		# Holy Orders
		if = {
			limit = {
				catholic = {
					is_name_randomized = yes
				}
			}
			d_knights_templar = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
			d_teutonic_order = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
			d_livonian_order = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
			d_knights_hospitaler = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
			d_knights_santiago = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
			d_knights_calatrava = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				shiite = {
					is_name_randomized = yes
				}
			}
			d_hashshashin = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				sunni = {
					is_name_randomized = yes
				}
			}
			d_bektashi = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				ibadi = {
					is_name_randomized = yes
				}
			}
			d_haruriyyah = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				norse_pagan = {
					is_name_randomized = yes
				}
			}
			d_jomsvikings = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				zoroastrian = {
					is_name_randomized = yes
				}
			}
			d_immortals = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				jewish = {
					is_name_randomized = yes
				}
			}
			d_zealots = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				orthodox = {
					is_name_randomized = yes
				}
			}
			d_holy_sepulchre = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				miaphysite = {
					is_name_randomized = yes
				}
			}
			d_saint_anthony = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				nestorian = {
					is_name_randomized = yes
				}
			}
			d_saint_addai = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				tengri_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_sky_lords = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				west_african_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_spirit_guardians = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				slavic_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_warriors_perun = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				baltic_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_chosen_perkunas = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				finnish_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_sons_kaleva = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				aztec_reformed = {
					is_name_randomized = yes
				}
			}
			d_huitzilopochtli = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				hindu = {
					is_name_randomized = yes
				}
			}
			d_followers_arjuna = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				buddhist = {
					is_name_randomized = yes
				}
			}
			d_ashokas_chosen = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				bon_reformed = {
					is_name_randomized = yes
				}
			}
			d_dralhas_children = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				jain = {
					is_name_randomized = yes
				}
			}
			d_bulls_rishabha = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				zun_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_zun_warriors = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				hellenic_pagan_reformed = {
					is_name_randomized = yes
				}
			}
			d_myrmidons = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		if = {
			limit = {
				manichean = {
					is_name_randomized = yes
				}
			}
			d_army_light = {
				holder_scope = {
					save_event_target_as = renaming_target
				}
				set_random_coa_effect = yes
				set_name="ALT_HO_LOCATION"
				adjective="ALT_HO_LOCATION_ADJ"
			}
		}
		any_independent_ruler = { # Being stranded on an island isn't fun regardless of setting
			any_realm_province = {
				limit = {
					port = yes
				}
				if = {
					limit = {
						NOT = {
							TECH_NAVAL = 1
						}
					}
					change_tech = {
						technology = TECH_NAVAL
						value = 1
					}
				}
				any_province_holding = {
					if = {
						limit = {
							holding_type = castle
							NOT = { has_building = ca_shipyard_1 }
						}
						add_building = ca_shipyard_1
					}
					if = {
						limit = {
							holding_type = city
							NOT = { has_building = ct_shipyard_1 }
						}
						add_building = ct_shipyard_1
					}
					if = {
						limit = {
							holding_type = city
							NOT = { has_building = ct_shipyard_1 }
						}
						add_building = ct_shipyard_1
					}
					if = {
						limit = {
							holding_type = temple
							NOT = { has_building = tp_shipyard_1 }
						}
						add_building = tp_shipyard_1
					}
					if = {
						limit = {
							holding_type = tribal
							NOT = { has_building = tb_shipyard_1 }
						}
						add_building = tb_shipyard_1
					}
					if = {
						limit = {
							holding_type = nomad
							NOT = { has_building = no_harbor_1 }
						}
						add_building = no_harbor_1
					}
					if = {
						limit = {
							holding_type = nomad
							NOT = { has_building = no_fishing_village_1 }
						}
						add_building = no_fishing_village_1
					}
				}
			}
		}
		any_playable_ruler = { # Chance for Agnatic-Cognatic
			limit = {
				is_landed = yes
				is_republic = no
				NOT = { has_religion_feature = religion_patriarchal }
				has_law = agnatic_succession
				any_demesne_title = {
					is_law_potential = cognatic_succession
				}
				NOT = {
					has_game_rule = {
						name = gender
						value = all
					} 
				}
			}
			if = { # If female with no male kids, 100% chance
				limit = {
					is_female = yes
					NOT = {
						any_child = {
							is_female = no
						}
					}
				}
				any_demesne_title = {
					limit = {
						is_law_potential = cognatic_succession
					}
					add_law = {
						law = cognatic_succession
						cooldown = no
						opinion_effect = no
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						AND = { # If female with male kids, slightly lower chance
							is_female = yes
							any_child = {
								is_female = no
							}
						}
						AND = { # Or if male with only female kids
							is_female = no
							NOT = {
								any_child = {
									is_female = no
								}
							}
						}
					}
				}
				random = {
					chance = 90
					any_demesne_title = {
						limit = {
							is_law_potential = cognatic_succession
						}
						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}
			else_if = { # Otherwise slightly higher chance for females
				limit = {
					is_female = yes
				}
				random = {
					chance = 70
					any_demesne_title = {
						limit = {
							is_law_potential = cognatic_succession
						}
						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}
			else = { # Else around 50%
				random = {
					chance = 50
					any_demesne_title = {
						limit = {
							is_law_potential = cognatic_succession
						}
						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}
			recalc_succession = yes
		}
		any_independent_ruler = { # Fix castes
			any_realm_character = {
				limit = {
					religion = hindu
				}
				if = {
					limit = {
						is_feudal = yes
					}
					add_trait = kshatriya
					remove_trait = vaishya
					remove_trait = brahmin
					any_dynasty_member = {
						limit = {
							is_landed = no
						}
						add_trait = kshatriya
						remove_trait = vaishya
						remove_trait = brahmin
					}
				}
				else_if = {
					limit = {
						is_republic = yes
					}
					remove_trait = kshatriya
					add_trait = vaishya
					remove_trait = brahmin
					any_dynasty_member = {
						limit = {
							is_landed = no
						}
						remove_trait = kshatriya
						add_trait = vaishya
						remove_trait = brahmin
					}
				}
				else_if = {
					limit = {
						is_theocracy = yes
					}
					remove_trait = kshatriya
					remove_trait = vaishya
					add_trait = brahmin
					any_dynasty_member = {
						limit = {
							is_landed = no
						}
						remove_trait = kshatriya
						remove_trait = vaishya
						add_trait = brahmin
					}
				}
				else_if = {
					limit = {
						is_landed = no
						spouse = { is_landed = yes }
					}
					if = {
						limit = {
							spouse = { is_feudal = yes }
						}
						add_trait = kshatriya
						remove_trait = vaishya
						remove_trait = brahmin
					}
					else_if = {
						limit = {
							spouse = { is_republic = yes }
						}
						remove_trait = kshatriya
						add_trait = vaishya
						remove_trait = brahmin
					}
					else_if = {
						limit = {
							spouse = { is_theocracy = yes }
						}
						remove_trait = kshatriya
						remove_trait = vaishya
						add_trait = brahmin
					}
				}
			}
		}
	}
}