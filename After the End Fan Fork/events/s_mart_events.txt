namespace = REP

### The Rise of S-Mart

# S-Mart formed in First Coast (AI)
character_event = {
	id = REP.40
	hide_window = yes
	
	ai = yes
	only_playable = yes
	
	trigger = {
		has_landed_title = c_first_coast
		year = 2770
		#top_liege = { 
		#	has_landed_title = e_hre
		#	religion_group = christian 
		#}
		#1086 = { 				#Could potentially tie it to the original culture, if so uncomment this
		#	culture = dixie		#Other options, dynamic culture, or just use original culture and don't care
		#}
		OR = {
			NOT = { is_merchant_republic = yes }
			NOT = { liege = { is_merchant_republic = yes } }
			NOT = { is_patrician = yes }
		}
		NOT = { has_global_flag = hansa_formed }
		has_global_flag = consumerist_revolt_successful
	}
	
	immediate = {
		#top_liege = { character_event = { id = REP.45 } }
		character_event = { id = REP.50 }
	}
	
	mean_time_to_happen = {
		months = 1020
	}
}

# S-Mart formed in Chicago (AI)
character_event = {
	id = REP.41
	hide_window = yes
	
	ai = yes
	only_playable = yes
	
	trigger = {
		has_landed_title = c_chicago
		year = 2770
		#top_liege = { 
		#	has_landed_title = e_hre
		#	religion_group = christian 
		#}
		#170 = { 				#Could potentially tie it to the original culture, if so uncomment this
		#	culture = chicagoan	#Other options, dynamic culture, or just use original culture and don't care
		#}
		OR = {
			NOT = { is_merchant_republic = yes }
			NOT = { liege = { is_merchant_republic = yes } }
			NOT = { is_patrician = yes }
		}
		NOT = { has_global_flag = hansa_formed }
		has_global_flag = consumerist_revolt_successful
	}
	
	immediate = {
		#top_liege = { character_event = { id = REP.46 } }
		character_event = { id = REP.51 }
	}
	
	mean_time_to_happen = {
		months = 510 #Shorter MTTH because holy site. Change this number as required.
	}
}

# S-Mart formed in Seattle (AI)
character_event = {
	id = REP.42
	hide_window = yes
	
	ai = yes
	only_playable = yes
	
	trigger = {
		has_landed_title = c_seattle
		year = 2770
		#top_liege = { 
		#	has_landed_title = e_hre
		#	religion_group = christian 
		#}
		#543 = { 				#Could potentially tie it to the original culture, if so uncomment this
		#	culture = canuck	#Other options, dynamic culture, or just use original culture and don't care
		#}
		OR = {
			NOT = { is_merchant_republic = yes }
			NOT = { liege = { is_merchant_republic = yes } }
			NOT = { is_patrician = yes }
		}
		NOT = { has_global_flag = hansa_formed }
		has_global_flag = consumerist_revolt_successful
	}
	
	immediate = {
		#top_liege = { character_event = { id = REP.47 } }
		character_event = { id = REP.52 }
	}
	
	mean_time_to_happen = {
		months = 1020
	}
}

# S-Mart formed in Alameda (AI)
character_event = {
	id = REP.43
	hide_window = yes
	
	ai = yes
	only_playable = yes
	
	trigger = {
		has_landed_title = c_alameda
		year = 2770
		#top_liege = { 
		#	has_landed_title = e_hre
		#	religion_group = christian 
		#}
		#2032 = { 				#Could potentially tie it to the original culture, if so uncomment this
		#	culture = bayfolk	#Other options, dynamic culture, or just use original culture and don't care
		#}
		OR = {
			NOT = { is_merchant_republic = yes }
			NOT = { liege = { is_merchant_republic = yes } }
			NOT = { is_patrician = yes }
		}
		NOT = { has_global_flag = hansa_formed }
		has_global_flag = consumerist_revolt_successful
	}
	
	immediate = {
		#top_liege = { character_event = { id = REP.48 } }
		character_event = { id = REP.53 }
	}
	
	mean_time_to_happen = {
		months = 1020
	}
}

# S-Mart formed in Merrimack (AI)
character_event = {
	id = REP.44
	hide_window = yes
	
	ai = yes
	only_playable = yes
	
	trigger = {
		has_landed_title = c_merrimack
		year = 2770
		#top_liege = { 
		#	has_landed_title = e_hre
		#	religion_group = christian 
		#}
		#70 = { 				#Could potentially tie it to the original culture, if so uncomment this
		#	culture = yankee	#Other options, dynamic culture, or just use original culture and don't care
		#}
		OR = {
			NOT = { is_merchant_republic = yes }
			NOT = { liege = { is_merchant_republic = yes } }
			NOT = { is_patrician = yes }
		}
		NOT = { has_global_flag = hansa_formed }
		has_global_flag = consumerist_revolt_successful
	}
	
	immediate = {
		#top_liege = { character_event = { id = REP.49 } }
		character_event = { id = REP.54 }
	}
	
	mean_time_to_happen = {
		months = 1020
	}
}

##These are bypassed currently, but could be added back in (e.g. let d_consumerist make the decision, etc.)
# Permit S-Mart in First Coast?
character_event = {
	id = REP.45
	desc = EVTDESC_REP_45
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_45
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = { character_event = { id = REP.50 } }
		}
		FROM = {
			opinion = {
				modifier = opinion_unhappy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = permit_hansa_tooltip }
	}
	option = {
		name = EVTOPTB_REP_45
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = deny_hansa_tooltip }
		set_global_flag = hansa_formed
	}
}

# Permit S-Mart in Chicago?
character_event = {
	id = REP.46
	desc = EVTDESC_REP_46
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_45
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = { character_event = { id = REP.51 } }
		}
		FROM = {
			opinion = {
				modifier = opinion_unhappy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = permit_hansa_tooltip }
	}
	option = {
		name = EVTOPTB_REP_45
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = deny_hansa_tooltip }
		set_global_flag = hansa_formed
	}
}

# Permit S-Mart in Seattle?
character_event = {
	id = REP.47
	desc = EVTDESC_REP_47
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_45
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = { character_event = { id = REP.52 } }
		}
		FROM = {
			opinion = {
				modifier = opinion_unhappy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = permit_hansa_tooltip }
	}
	option = {
		name = EVTOPTB_REP_45
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = deny_hansa_tooltip }
		set_global_flag = hansa_formed
	}
}

# Permit S-Mart in Alameda?
character_event = {
	id = REP.48
	desc = EVTDESC_REP_48
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_45
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = { character_event = { id = REP.53 } }
		}
		FROM = {
			opinion = {
				modifier = opinion_unhappy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = permit_hansa_tooltip }
	}
	option = {
		name = EVTOPTB_REP_45
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = deny_hansa_tooltip }
		set_global_flag = hansa_formed
	}
}

# Permit S-Mart in Merrimack?
character_event = {
	id = REP.49
	desc = EVTDESC_REP_49
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_45
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = { character_event = { id = REP.54 } }
		}
		FROM = {
			opinion = {
				modifier = opinion_unhappy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = permit_hansa_tooltip }
	}
	option = {
		name = EVTOPTB_REP_45
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 4
			}
		}
		if = {
			limit = {
				FROM = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
			FROM = {
				liege = {
					opinion = {
						modifier = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}
		custom_tooltip = { text = deny_hansa_tooltip }
		set_global_flag = hansa_formed
	}
}

### The Rise of S-Mart

# S-Mart formed in First Coast (AI)
character_event = {
	id = REP.50
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			random_traits = yes
			name="Ashley"
			trait = one_handed
			trait = tough_soldier
			trait = brave
			trait = proud
			trait = lustful
			trait = wroth
			trait = cynical
			dynasty = random
			religion = consumerist
			culture = dixie #Could be made dynamic
			female = no
			age = 30
		}
		new_character = {
			add_artifact = ate_firearm
			b_jacksonville_FL = {
				usurp_title = PREV
			}
			c_first_coast = {
				usurp_title = PREV
			}
			k_s_mart = {
				usurp_title = PREV
			}
			character_event = { id = REP.60 }
			#e_hre = {
			#	holder_scope = {
			#		set_defacto_vassal = PREVPREV
			#	}
			#}
			create_character = { # Extra courtiers
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 20
			}
			new_character = {
				spawn_unit = {
					province = 1089
					home = 1089
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 25
			}
			new_character = {
				spawn_unit = {
					province = 1089
					home = 1089
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 26
			}
			new_character = {
				spawn_unit = {
					province = 1089
					home = 1089
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 28
			}
			new_character = {
				spawn_unit = {
					province = 1089
					home = 1089
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 17
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 20
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
		}
		set_global_flag = hansa_formed
	}
}

# S-Mart formed in Chicago (AI)
character_event = {
	id = REP.51
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes

	immediate = {
		create_character = {
			random_traits = yes
			dynasty = random
			religion = consumerist
			culture = chicagoan #Could be made dynamic
			female = no
			age = 30
		}
		new_character = {
			b_cicero_IL = {
				usurp_title = PREV
			}
			c_chicago = {
				usurp_title = PREV
			}
			k_s_mart = {
				usurp_title = PREV
			}
			character_event = { id = REP.60 }
			#e_hre = {
			#	holder_scope = {
			#		set_defacto_vassal = PREVPREV
			#	}
			#}
			create_character = { # Extra courtiers
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 20
			}
			new_character = {
				spawn_unit = {
					province = 170
					home = 170
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 25
			}
			new_character = {
				spawn_unit = {
					province = 170
					home = 170
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 26
			}
			new_character = {
				spawn_unit = {
					province = 170
					home = 170
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 28
			}
			new_character = {
				spawn_unit = {
					province = 170
					home = 170
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 17
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 20
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
		}
		set_global_flag = hansa_formed
	}
}

# S-Mart formed in Seattle (AI)
character_event = {
	id = REP.52
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			random_traits = yes
			dynasty = random
			religion = consumerist
			culture = canuck #Could be made dynamic
			female = no
			age = 30
		}
		new_character = {
			b_bellevue_WA = {
				usurp_title = PREV
			}
			c_seattle = {
				usurp_title = PREV
			}
			k_s_mart = {
				usurp_title = PREV
			}
			character_event = { id = REP.60 }
			#e_hre = {
			#	holder_scope = {
			#		set_defacto_vassal = PREVPREV
			#	}
			#}
			create_character = { # Extra courtiers
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 20
			}
			new_character = {
				spawn_unit = {
					province = 543
					home = 543
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 25
			}
			new_character = {
				spawn_unit = {
					province = 543
					home = 543
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 26
			}
			new_character = {
				spawn_unit = {
					province = 543
					home = 543
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 28
			}
			new_character = {
				spawn_unit = {
					province = 543
					home = 543
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 17
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 20
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
		}
		set_global_flag = hansa_formed
	}
}

# S-Mart formed in Alameda (AI)
character_event = {
	id = REP.53
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			random_traits = yes
			dynasty = random
			religion = consumerist
			culture = bayfolk
			female = no
			age = 30
		}
		new_character = {
			b_fremont_CA = {
				usurp_title = PREV
			}
			c_alameda = {
				usurp_title = PREV
			}
			k_s_mart = {
				usurp_title = PREV
			}
			character_event = { id = REP.60 }
			#e_hre = {
			#	holder_scope = {
			#		set_defacto_vassal = PREVPREV
			#	}
			#}
			create_character = { # Extra courtiers
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 20
			}
			new_character = {
				spawn_unit = {
					province = 2032
					home = 2032
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 25
			}
			new_character = {
				spawn_unit = {
					province = 2032
					home = 2032
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 26
			}
			new_character = {
				spawn_unit = {
					province = 2032
					home = 2032
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 28
			}
			new_character = {
				spawn_unit = {
					province = 2032
					home = 2032
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 17
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 20
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
		}
		set_global_flag = hansa_formed
	}
}

# S-Mart formed in Merrimack (AI)
character_event = {
	id = REP.54
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_character = {
			random_traits = yes
			dynasty = random
			religion = consumerist
			culture = yankee
			female = no
			age = 30
		}
		new_character = {
			b_gloucester_MA = { #Concern: Province starts as tribal with city unbuilt. Test.
				usurp_title = PREV
			}
			c_merrimack = {
				usurp_title = PREV
			}
			k_s_mart = {
				usurp_title = PREV
			}
			character_event = { id = REP.60 }
			#e_hre = {
			#	holder_scope = {
			#		set_defacto_vassal = PREVPREV
			#	}
			#}
			create_character = { # Extra courtiers
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 20
			}
			new_character = {
				spawn_unit = {
					province = 70
					home = 70
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 25
			}
			new_character = {
				spawn_unit = {
					province = 70
					home = 70
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 26
			}
			new_character = {
				spawn_unit = {
					province = 70
					home = 70
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = no
				age = 28
			}
			new_character = {
				spawn_unit = {
					province = 70
					home = 70
					owner = PREV
					leader = THIS
					#match_character = PREVPREV
					#match_mult = 0.1 #0.058
					troops = {
						light_cavalry = { 200 200 }
						light_infantry = { 600 600 }
						heavy_infantry = { 300 300 }
						knights = { 100 100 }
						pikemen = { 200 200 }
					}
					attrition = 0.5
					maintenance_multiplier = 0.3
					cannot_inherit = yes
				}
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 16
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 17
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 18
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = consumerist
				culture = PREV
				female = yes
				age = 20
			}
			new_character = {
				character_event = { id = misc.3 } # Diversity
			}
		}
		set_global_flag = hansa_formed
	}
}

# The Rise of S-Mart (AI)
character_event = {
	id = REP.60
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes
	
	immediate = {
		narrative_event = { id = REP.61 }
		#character_event = { id = REP.65 days = 6 } #Disabled for now
		wealth = 1000
		location = {
			if = {
				limit = { has_trade_post = yes }
				seize_trade_post = ROOT
				any_neighbor_province = {
					seize_trade_post = ROOT
				}
			}
		}
	}
}

# The Rise of S-Mart
narrative_event = {
	id = REP.61
	title = EVTNAME_REP_61
	desc = EVTDESC_REP_61
	major = yes
	picture = GFX_evt_busy_trading_dock_republic
	
	is_triggered_only = yes
	
	major_trigger = {
		ai = no
	}	
	
	option = {
		name = EVTOPTA_REP_61
		trigger = {
			OR = {
				NOT = { is_merchant_republic = yes }
				NOT = { liege = { is_merchant_republic = yes } }
				NOT = { is_patrician = yes }
			}
		}
	}
	option = {
		name = EVTOPTB_REP_61
		trigger = {
			OR = {
				is_merchant_republic = yes
				is_patrician = yes
			}
		}
	}
}

# Set up Patricians
character_event = {
	id = REP.65
	hide_window = yes
	
	ai = yes
	
	is_triggered_only = yes

	immediate = {
		random_vassal = {
			limit = { 
				is_patrician = yes
				NOT = {
					has_character_flag = patrician_1
					has_character_flag = patrician_2
					has_character_flag = patrician_3
					has_character_flag = patrician_4
				}
			}
			set_character_flag = patrician_1
		}
		random_vassal = {
			limit = { 
				is_patrician = yes
				NOT = {
					has_character_flag = patrician_1
					has_character_flag = patrician_2
					has_character_flag = patrician_3
					has_character_flag = patrician_4
				}
			}
			set_character_flag = patrician_2
		}
		random_vassal = {
			limit = { 
				is_patrician = yes
				NOT = {
					has_character_flag = patrician_1
					has_character_flag = patrician_2
					has_character_flag = patrician_3
					has_character_flag = patrician_4
				}
			}
			set_character_flag = patrician_3
		}
		random_vassal = {
			limit = { 
				is_patrician = yes
				NOT = {
					has_character_flag = patrician_1
					has_character_flag = patrician_2
					has_character_flag = patrician_3
					has_character_flag = patrician_4
				}
			}
			set_character_flag = patrician_4
		}
		random_vassal = {
			limit = { has_character_flag = patrician_1 }
			character_event = { id = REP.66 }
		}
		random_vassal = {
			limit = { has_character_flag = patrician_2 }
			character_event = { id = REP.67 }
		}
		random_vassal = {
			limit = { has_character_flag = patrician_3 }
			character_event = { id = REP.68 }
		}
		random_vassal = {
			limit = { has_character_flag = patrician_4 }
			character_event = { id = REP.69 }
		}
	}
}

# Set up Patrician 1
character_event = {
	id = REP.66
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { 
				267 = { has_trade_post = yes }
			}
			267 = { 
				trade_post_owner = { character_event = { id = REP.70 } }
				seize_trade_post = ROOT 
			}
		}
		if = {
			limit = { 
				296 = { has_trade_post = yes }
			}
			296 = { 
				trade_post_owner = { character_event = { id = REP.71 } }
				seize_trade_post = ROOT
			}
		}
		wealth = 1000
	}
}

# Set up Patrician 2
character_event = {
	id = REP.67
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { 
				84 = { has_trade_post = yes }
			}
			84 = { 
				trade_post_owner = { character_event = { id = REP.72 } }
				seize_trade_post = ROOT
			}
		}
		if = {
			limit = { 
				83 = { has_trade_post = yes }
			}
			83 = { 
				trade_post_owner = { character_event = { id = REP.73 } }
				seize_trade_post = ROOT				
			}
		}
		wealth = 1000
	}
}

# Set up Patrician 3
character_event = {
	id = REP.68
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { 
				32 = { has_trade_post = yes }
			}
			32 = { 
				trade_post_owner = { character_event = { id = REP.74 } }
				seize_trade_post = ROOT				
			}
		}
		if = {
			limit = { 
				74 = { has_trade_post = yes }
			}
			74 = { 
				trade_post_owner = { character_event = { id = REP.75 } }
				seize_trade_post = ROOT 
			}
		}
		wealth = 1000
	}
}

# Set up Patrician 4
character_event = {
	id = REP.69
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { 
				368 = { has_trade_post = yes }
			}
			368 = { 
				trade_post_owner = { character_event = { id = REP.76 } }
				seize_trade_post = ROOT 
			}
		}
		if = {
			limit = { 
				370 = { has_trade_post = yes }
			}
			370 = { 
				trade_post_owner = { character_event = { id = REP.77 } }
				seize_trade_post = ROOT 
			}
		}
		wealth = 1000
	}
}

# Former Trade Post Owner Informed 267
character_event = {
	id = REP.70
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			267 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 296
character_event = {
	id = REP.71
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			296 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 84
character_event = {
	id = REP.72
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			84 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 83
character_event = {
	id = REP.73
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			83 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 32
character_event = {
	id = REP.74
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			32 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 74
character_event = {
	id = REP.75
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			74 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 368
character_event = {
	id = REP.76
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			368 = { 
				seize_trade_post = FROM
			}
		}
	}
}

# Former Trade Post Owner Informed 370
character_event = {
	id = REP.77
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_REP_070
		tooltip = {
			370 = { 
				seize_trade_post = FROM
			}
		}
	}
}