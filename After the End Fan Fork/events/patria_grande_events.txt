
namespace = patria

# Choose patron deity
character_event = {
	id = patria.1
	desc = EVTDESC_patria_choose
	picture = GFX_evt_bishop
	religion = patria_grande
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_alternate_start_parameter = { key = religion_names value = random }
		}
	}

	option = {
		name = EVTOPT_patria_santander
		hidden_tooltip = {
			remove_trait = patria_bolivar
			remove_trait = patria_manuelita
			remove_trait = patria_santander
		}
		if = {
			limit = {
				ai = yes
			}
			add_trait = patria_santander
		}
		else_if = {
			limit = {
				ai = no
			}
			character_event = { id = patria.4 }
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 2 trait = patria_santander }
			modifier = { factor = 1.5 trait = zealous }
			modifier = { factor = 1.5 trait = charitable }
			modifier = { factor = 1.5 trait = kind }
			modifier = { factor = 1.5 trait = humble }
			modifier = { factor = 1.5 learning = 10 }
			modifier = { factor = 1.5 diplomacy = 10 }
			modifier = { factor = 0.2 trait = cynical }
		}
	}

	option = {
		name = EVTOPT_patria_bolivar
		hidden_tooltip = {
			remove_trait = patria_santander
			remove_trait = patria_manuelita
			remove_trait = patria_bolivar
		}
		if = {
			limit = {
				ai = yes
			}
			add_trait = patria_bolivar
		}
		else_if = {
			limit = {
				ai = no
			}
			character_event = { id = patria.5 }
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 2 trait = patria_bolivar }
			modifier = { factor = 2 trait = strong }
			modifier = { factor = 5 trait = brilliant_strategist }
			modifier = { factor = 4 trait = skilled_tactician }
			modifier = { factor = 3 trait = tough_soldier }
			modifier = { factor = 2 trait = misguided_warrior }
			modifier = { factor = 1.5 trait = brave }
			modifier = { factor = 1.5 trait = wroth }
			modifier = { factor = 2	martial = 10 }
			modifier = { factor = 0.2 trait = craven }
		}
	}
	
	option = {
		name = EVTOPT_patria_manuelita
		hidden_tooltip = {
			remove_trait = patria_bolivar
			remove_trait = patria_santander
			remove_trait = patria_manuelita
		}
		if = {
			limit = {
				ai = yes
			}
			add_trait = patria_manuelita
		}
		else_if = {
			limit = {
				ai = no
			}
			character_event = { id = patria.6 }
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 2 trait = patria_manuelita }
			modifier = { factor = 2 trait = mystic }
			modifier = { factor = 5 trait = grey_eminence }
			modifier = { factor = 4 trait = charismatic_negotiator }
			modifier = { factor = 3 trait = underhanded_rogue }
			modifier = { factor = 2 trait = naive_appeaser }
			modifier = { factor = 1.5 trait = lustful }
			modifier = { factor = 1.5 trait = gregarious }
			modifier = { factor = 2	diplomacy = 10 }
			modifier = { factor = 0.2 trait = chaste }
			modifier = { factor = 5.0 is_tribal = yes }
		}
	}
}

narrative_event = {
	id = patria.2
	title = EVTNAME_patria.2
	desc = EVTDESC_patria.2
	picture = GFX_evt_bishop
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	major = yes
	
	option = {
		name = EVTOPTA_patria.2
		trigger = {
			has_landed_title = e_gran_colombia
			religion = patria_grande
		}
		give_nickname = nick_the_liberator
		if = { #New Imperial Bloodline. (male)
			limit = { 
				has_dlc = "Holy Fury" 
				is_female = no
			}
			create_bloodline = {
				type = libertador_male
			}
			new_bloodline = {
				set_description = "bloodline_desc_libertador"
			}	
			sound_effect = bloodline_added	
		}
		else_if = { #New Imperial Bloodline. (female)
			limit = { 
				has_dlc = "Holy Fury" 
				is_female = yes
			}
			create_bloodline = {
				type = libertador_female
			}
			new_bloodline = {
				set_description = "bloodline_desc_libertador"
			}	
			sound_effect = bloodline_added		
		}
	}
	option = {
		name = EVTOPTB_patria.2
		trigger = {
			NOT = { has_landed_title = e_gran_colombia }
			religion_group = cult_of_saints
		}
	}
	option = {
		name = EVTOPTC_patria.2
		trigger = {
			NOT = {
				religion_group = cult_of_saints
			}
		}
	}
}

character_event = { # Make all existing descendants also Libertador descendants
	id = patria.3
	
	is_triggered_only = yes
	
	hide_window = yes
	
	immediate = {
		add_trait = libertador_descendant
		any_child_even_if_dead = { repeat_event = { id = patria.3 } }
	}
}

character_event = {
	id = patria.4
	desc = EVTDESC_patria_santander
	picture = GFX_evt_religious_exultation
	religion = patria_grande
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_patria_santander
		add_trait = patria_santander
	}
}

character_event = {
	id = patria.5
	desc = EVTDESC_patria_bolivar
	picture = GFX_evt_religious_exultation
	religion = patria_grande
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_patria_bolivar
		add_trait = patria_bolivar
	}
}

character_event = {
	id = patria.6
	desc = EVTDESC_patria_manuelita
	picture = GFX_evt_religious_exultation
	religion = patria_grande
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_patria_manuelita
		add_trait = patria_manuelita
	}
}

narrative_event = {
	id = patria.10
	title = EVTTITLE_patria_10
	desc = EVTDESC_patria_10
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_patria_10
		custom_tooltip = { text = TXT_EVTOPTA_patria_10 }
		character_event = { id = patria.11 days = 1 }
	}
}

character_event = {
	id = patria.11
	desc = EVTDESC_patria_11
	picture = GFX_evt_vision_quest
	border = GFX_event_normal_frame_religion
	religion = patria_grande
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_patria_11
		hidden_tooltip = {
			random_list = {
				50 = {
					narrative_event = { id = patria.12 days = 1 }
				}
				50 = {
					narrative_event = { id = patria.13 days = 1 }
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_patria_11
		random_list = {
				50 = {
					narrative_event = { id = patria.14 days = 1 }
				}
				50 = {
					narrative_event = { id = patria.15 days = 1 }
				}
			}
	}
	
	option = {
		name = EVTOPTC_patria_11
		random_list = {
				50 = {
					narrative_event = { id = patria.16 days = 1 }
				}
				50 = {
					narrative_event = { id = patria.17 days = 1 }
				}
			}
	}
}

narrative_event = {
	id = patria.12
	title = EVTTITLE_patria_12
	desc = EVTDESC_patria_12
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_12
		add_character_modifier = {
			name = patria_vision_beauty
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = trusting }
			}
			random_list = {
				30 = {
					add_trait = trusting
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}

narrative_event = {
	id = patria.13
	title = EVTTITLE_patria_13
	desc = EVTDESC_patria_13
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_12
		add_character_modifier = {
			name = patria_vision_loss
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = paranoid }
			}
			random_list = {
				30 = {
					add_trait = paranoid
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}

narrative_event = {
	id = patria.14
	title = EVTTITLE_patria_14
	desc = EVTDESC_patria_14
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_12
		add_character_modifier = {
			name = patria_vision_power
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = zealous }
			}
			random_list = {
				30 = {
					add_trait = zealous
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}

narrative_event = {
	id = patria.15
	title = EVTTITLE_patria_15
	desc = EVTDESC_patria_15
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_15
		add_character_modifier = {
			name = patria_vision_defeat
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = cynical }
			}
			random_list = {
				30 = {
					add_trait = cynical
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}

narrative_event = {
	id = patria.16
	title = EVTTITLE_patria_16
	desc = EVTDESC_patria_16
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_16
		add_character_modifier = {
			name = patria_vision_madness
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = brave }
			}
			random_list = {
				30 = {
					add_trait = brave
				}
				70 = { }
			}
		}
		if = {
			limit = {
				NOT = { trait = arbitrary }
			}
			random_list = {
				30 = {
					add_trait = arbitrary
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}

narrative_event = {
	id = patria.17
	title = EVTTITLE_patria_17
	desc = EVTDESC_patria_17
	picture = GFX_evt_vision_quest
	border = GFX_event_narrative_frame_religion
	religion = patria_grande
	is_triggered_only = yes

	option = {
		name = EVTOPTA_patria_17
		add_character_modifier = {
			name = patria_vision_love
			years = 1
		}
		if = {
			limit = {
				NOT = { trait = lustful }
			}
			random_list = {
				30 = {
					add_trait = lustful
				}
				70 = { }
			}
		}
	}
	
	after = {
		clr_character_flag = patria_marquess_meditating
		add_character_modifier = {
			name = patria_vision_cooldown
			hidden = yes
			years = 3
		}
	}
}