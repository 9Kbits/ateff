# Colonization events by Sam

namespace = col

# Japan decides to colonize province
province_event = {
	id = col.10
	desc = EVTDESC_bounce
	picture = GFX_evt_colonial_japan
	hide_window = yes
	
	trigger = {
		year = 2740
		NOT = { is_title_active = e_edokko }
		NOT = { has_global_flag = edokko_defeated }
		port = yes
		county = {
			OR = {
				de_jure_liege_or_above = k_baja_california
				de_jure_liege_or_above = k_jefferson
				de_jure_liege_or_above = k_francisco
				de_jure_liege_or_above = k_socal
				de_jure_liege_or_above = k_cascadia
				de_jure_liege_or_above = k_sonora
				de_jure_liege_or_above = k_jalisco
				de_jure_liege_or_above = k_colima
				de_jure_liege_or_above = k_michoacan
				de_jure_liege_or_above = k_british_columbia
			}
		}
	}
	
	mean_time_to_happen = {
		years = 1000
		modifier = {
			factor = 0.75
			has_global_flag = colonists_victorious
		}
		modifier = {
			factor = 0.95
			num_of_settlements = 4
		}
		modifier = {
			factor = 0.9
			num_of_settlements = 6
		}
		modifier = {
			factor = 1.1
			NOT = { num_of_settlements = 3 }
		}
	}
	
	option = {
		holder_scope = {
			top_liege = {
				activate_title = { title = e_edokko status = yes }
				create_character = {
					random_traits = yes
					dynasty = none
					culture = edokko
					religion = cetic # for now
					age = 30
				}
				new_character = {
					e_edokko = {
						grant_title = PREV
					}
					wealth = 5000
					character_event = { id = salvage.140 } # Give random salvage
					character_event = { id = salvage.140 } # Give random salvage
					character_event = { id = salvage.140 } # Give random salvage
					character_event = { id = salvage.140 } # Give random salvage
					set_character_flag = colonist
					set_defacto_liege = THIS
					military_techpoints = 10000
					economy_techpoints = 10000
					culture_techpoints = 10000
					#character_event = { id = misc.3 } # Diversity
					narrative_event = { id = col.11 }
				}
			}
		}
	}
}

# Japan declares war
narrative_event = {
	id = col.11
	title = col.11.title
	desc = col.11.text
	major = yes
	is_triggered_only = yes
	
	picture = "GFX_evt_colonial_japan"
	border = "GFX_event_narrative_frame_war"

	option = {
		name = col.11.optA
		trigger = { NOT = { has_landed_title = e_edokko } }
	}
	
	option = {
		name = col.11.optB
		trigger = { has_landed_title = e_edokko }
		create_character = {
			random_traits = yes
			dynasty = none
			religion = cetic
			culture = edokko
			female = no
			age = 30
			trait = salvage_firearm
		}
		new_character = {
			spawn_unit = {
				province = FROM
				troops =
				{
					horse_archers = { 50 50 }
					light_cavalry = { 200 200 }
					light_infantry = { 250 250 }
					heavy_infantry = { 150 150 }
					knights = { 150 150 }
					pikemen = { 200 200 }
					archers = { 250 250 }
				}
				attrition = 0.25
			}
			character_event = { id = salvage.140 } # Give random salvage
			character_event = { id = salvage.140 } # Give random salvage
			#character_event = { id = misc.3 } # Diversity
		}
		create_character = {
			random_traits = yes
			dynasty = none
			religion = cetic
			culture = edokko
			female = no
			age = 35
			trait = salvage_firearm
		}
		new_character = {
			spawn_unit = {
				province = FROM
				troops =
				{
					horse_archers = { 50 50 }
					light_cavalry = { 200 200 }
					light_infantry = { 250 250 }
					heavy_infantry = { 150 150 }
					knights = { 150 150 }
					pikemen = { 200 200 }
					archers = { 250 250 }
				}
				attrition = 0.25
			}
			character_event = { id = salvage.140 } # Give random salvage
			character_event = { id = salvage.140 } # Give random salvage
			#character_event = { id = misc.3 } # Diversity
		}
		create_character = {
			random_traits = yes
			dynasty = none
			religion = cetic
			culture = edokko
			female = no
			age = 39
			trait = salvage_firearm
		}
		new_character = {
			spawn_unit = {
				province = FROM
				troops =
				{
					horse_archers = { 50 50 }
					light_cavalry = { 200 200 }
					light_infantry = { 250 250 }
					heavy_infantry = { 150 150 }
					knights = { 150 150 }
					pikemen = { 200 200 }
					archers = { 250 250 }
				}
				attrition = 0.25
			}
			character_event = { id = salvage.140 } # Give random salvage
			character_event = { id = salvage.140 } # Give random salvage
			#character_event = { id = misc.3 } # Diversity
		}
		# Some extra courtiers
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 16
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 18
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 18
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 20
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 25
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 26
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = no
			age = 28
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = yes
			age = 16
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = yes
			age = 17
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = yes
			age = 18
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = yes
			age = 18
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		create_character = {
			random_traits = yes
			dynasty = random
			religion = cetic # for now
			culture = edokko
			female = yes
			age = 20
		}
		new_character = { character_event = { id = salvage.140 } } # Give random salvage
		
		FROM = { # triggering province
			duchy = {
				ROOT = {
					war = {
						casus_belli = colonization
						target = PREVPREV # The top liege of the owner
						thirdparty_title = PREV # The de jure duchy
					}
				}
			}
		}
	}
}

# Japan victorious
narrative_event = {
	id = col.12
	title = col.12.title
	desc = col.12.text
	major = yes
	is_triggered_only = yes
	
	picture = "GFX_evt_colonial_japan"
	border = "GFX_event_narrative_frame_war"
	
	option = {
		name = col.12.optA
		trigger = { NOT = { has_landed_title = e_edokko } }
		set_global_flag = colonists_victorious
	}
	
	option = {
		name = col.12.optB
		trigger = { has_landed_title = e_edokko }
		set_global_flag = colonists_victorious
		e_edokko = {
			any_realm_lord = {
				limit = { is_patrician = yes }
				wealth = 5000 # help them set up their trade empire
			}
		}
	}
}

# Japan defeated
narrative_event = {
	id = col.13
	title = col.13.title
	desc = col.13.text
	major = yes
	is_triggered_only = yes
	
	picture = "GFX_evt_colonial_japan"
	border = "GFX_event_narrative_frame_war"
	
	option = {
		name = col.13.optA
		set_global_flag = edokko_defeated
	}
}
