namespace = consumer

# RISE OF CONSUMERISM
narrative_event = {
	id = consumer.1
	title = EVTNAMECONSUMER1
	desc = EVTDESCCONSUMER1
	picture = GFX_evt_bishop
	border = GFX_event_narrative_frame_religion
	
	major = yes
	
	only_independent = yes
	only_playable = yes
	
	trigger = {
		controls_religion = no
		is_landed = yes
		OR = {
			religion = catholic
			religion = evangelical
			religion = americanist
			religion = atomicist
			religion = machine_cultist
			religion = occultist
			religion = norse_pagan
			religion = anabaptist
		}
		NOT = { religion = consumerist }
		higher_tier_than = DUKE
		d_consumerist = {
			has_holder = no
		}
		#decadence = 10
		NOT = { has_global_flag = consumerist_revolt_ongoing }
		any_realm_province = {
			kingdom = {
				OR = {
					has_holder = no
					holder_scope = {
						character = ROOT
					}
				}
				num_title_realm_provs = {
					who = ROOT
					num = 6
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1800
		modifier = {
			factor = 0.25
			OR = {
				c_manhattan = {
					holder_scope = {
						same_realm = ROOT
					}
				}
				c_chicago = {
					holder_scope = {
						same_realm = ROOT
					}
				}
				c_detroit = {
					holder_scope = {
						same_realm = ROOT
					}
				}
			}
		}
		#modifier = {
		#	factor = 0.5
		#	decadence = 90
		#}
		#modifier = {
		#	factor = 4.0
		#	NOT = { decadence = 25 }
		#}
		#modifier = {
		#	factor = 2.0
		#	year = 2700
		#}
		modifier = {
			factor = 10.0
			ai = no
		}
	}
	
	immediate = {
		set_character_flag = consumerist_revolt
		set_global_flag = consumerist_revolt_ongoing
		
		#decadence = -30 # Do not want to be hit with a decadence revolt as well!
		
		random_realm_province = {
			limit = {
				kingdom = {
					OR = {
						has_holder = no
						holder_scope = {
							character = ROOT
						}
					}
					num_title_realm_provs = {
						who = ROOT
						num = 3 #6
					}
				}
			}
			ROOT = {
				create_character = {
					dynasty = random
					religion = consumerist
					culture = ROOT
					#female = no
					age = 35
					health = 6.5
					fertility = 0.6
					trait = genius
					trait = mastermind_theologian
					trait = patient
					trait = greedy
					trait = zealous
					trait = gregarious
					trait = holy_warrior
					trait = siege_leader
					trait = ambitious
					trait = brave
					trait = diligent
					trait = sayyid
					attributes = {
						learning = 6
						diplomacy = 6
						martial = 8
						stewardship = 6
						intrigue = 6
					}
				}
				
				new_character = {
					give_nickname = nick_the_prophet
					set_character_flag = consumerist_prophet
					set_character_flag = the_prophet # for conversion events
					create_title = {
						tier = DUKE
						landless = yes
						temporary = yes
						culture = ROOT
						name = CONSUMERIST_REVOLT
						holder = THIS
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 30
						trait = brilliant_strategist
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 27
						trait = brilliant_strategist
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 25
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 23
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 27
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 24
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.075
							attrition = 0.5
							cannot_inherit = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 32
						trait = brilliant_strategist
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.15
							attrition = 0.0
							cannot_inherit = yes
							disband_on_peace = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 25
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.15
							attrition = 0.0
							cannot_inherit = yes
							disband_on_peace = yes
						}
					}
					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						age = 28
						trait = skilled_tactician
					}
					new_character = {
						spawn_unit = {
							province = PREVPREVPREV
							home = PREVPREVPREV
							owner = PREV
							leader = THIS
							match_character = PREVPREV
							match_mult = 0.15
							attrition = 0.0
							cannot_inherit = yes
							disband_on_peace = yes
						}
					}
					war = {
						target = ROOT
						casus_belli = consumerist_rising
						thirdparty_title = PREVPREV
						tier = KING
					}
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTACONSUMER1"
		trigger = {
			has_character_flag = consumerist_revolt 
		}
		clr_character_flag = consumerist_revolt
	}
	
	option = {
		name = "EVTOPTBCONSUMER1"
	}
}
